{"ast":null,"code":"import { isFunction } from 'min-dash'; // TODO(nikku): remove with future bpmn-js version\n\n/**\n * Wraps APIs to check:\n *\n * 1) If a callback is passed -> Warn users about callback deprecation.\n * 2) If Promise class is implemented in current environment.\n *\n * @private\n */\n\nexport function wrapForCompatibility(api) {\n  return function () {\n    if (!window.Promise) {\n      throw new Error('Promises is not supported in this environment. Please polyfill Promise.');\n    }\n\n    var argLen = arguments.length;\n\n    if (argLen >= 1 && isFunction(arguments[argLen - 1])) {\n      var callback = arguments[argLen - 1];\n      console.warn(new Error('Passing callbacks to ' + api.name + ' is deprecated and will be removed in a future major release. ' + 'Please switch to promises: https://bpmn.io/l/moving-to-promises.html'));\n      var argsWithoutCallback = Array.prototype.slice.call(arguments, 0, -1);\n      api.apply(this, argsWithoutCallback).then(function (result) {\n        var firstKey = Object.keys(result)[0]; // The APIs we are wrapping all resolve a single item depending on the API.\n        // For instance, importXML resolves { warnings } and saveXML returns { xml }.\n        // That's why we can call the callback with the first item of result.\n\n        return callback(null, result[firstKey]); // Passing a second paramter instead of catch because we don't want to\n        // catch errors thrown by callback().\n      }, function (err) {\n        return callback(err, err.warnings);\n      });\n    } else {\n      return api.apply(this, arguments);\n    }\n  };\n}","map":{"version":3,"names":["isFunction","wrapForCompatibility","api","window","Promise","Error","argLen","arguments","length","callback","console","warn","name","argsWithoutCallback","Array","prototype","slice","call","apply","then","result","firstKey","Object","keys","err","warnings"],"sources":["D:/projects/Camunda/rpsboacamundajul2022/Camunda-Reactjs/node_modules/bpmn-js/lib/util/CompatibilityUtil.js"],"sourcesContent":["import { isFunction } from 'min-dash';\n\n// TODO(nikku): remove with future bpmn-js version\n\n/**\n * Wraps APIs to check:\n *\n * 1) If a callback is passed -> Warn users about callback deprecation.\n * 2) If Promise class is implemented in current environment.\n *\n * @private\n */\nexport function wrapForCompatibility(api) {\n\n  return function() {\n\n    if (!window.Promise) {\n      throw new Error('Promises is not supported in this environment. Please polyfill Promise.');\n    }\n\n    var argLen = arguments.length;\n    if (argLen >= 1 && isFunction(arguments[argLen - 1])) {\n\n      var callback = arguments[argLen - 1];\n\n      console.warn(new Error(\n        'Passing callbacks to ' + api.name + ' is deprecated and will be removed in a future major release. ' +\n        'Please switch to promises: https://bpmn.io/l/moving-to-promises.html'\n      ));\n\n      var argsWithoutCallback = Array.prototype.slice.call(arguments, 0, -1);\n\n      api.apply(this, argsWithoutCallback).then(function(result) {\n\n        var firstKey = Object.keys(result)[0];\n\n        // The APIs we are wrapping all resolve a single item depending on the API.\n        // For instance, importXML resolves { warnings } and saveXML returns { xml }.\n        // That's why we can call the callback with the first item of result.\n        return callback(null, result[firstKey]);\n\n        // Passing a second paramter instead of catch because we don't want to\n        // catch errors thrown by callback().\n      }, function(err) {\n\n        return callback(err, err.warnings);\n      });\n    } else {\n\n      return api.apply(this, arguments);\n    }\n  };\n}\n"],"mappings":"AAAA,SAASA,UAAT,QAA2B,UAA3B,C,CAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASC,oBAAT,CAA8BC,GAA9B,EAAmC;EAExC,OAAO,YAAW;IAEhB,IAAI,CAACC,MAAM,CAACC,OAAZ,EAAqB;MACnB,MAAM,IAAIC,KAAJ,CAAU,yEAAV,CAAN;IACD;;IAED,IAAIC,MAAM,GAAGC,SAAS,CAACC,MAAvB;;IACA,IAAIF,MAAM,IAAI,CAAV,IAAeN,UAAU,CAACO,SAAS,CAACD,MAAM,GAAG,CAAV,CAAV,CAA7B,EAAsD;MAEpD,IAAIG,QAAQ,GAAGF,SAAS,CAACD,MAAM,GAAG,CAAV,CAAxB;MAEAI,OAAO,CAACC,IAAR,CAAa,IAAIN,KAAJ,CACX,0BAA0BH,GAAG,CAACU,IAA9B,GAAqC,gEAArC,GACA,sEAFW,CAAb;MAKA,IAAIC,mBAAmB,GAAGC,KAAK,CAACC,SAAN,CAAgBC,KAAhB,CAAsBC,IAAtB,CAA2BV,SAA3B,EAAsC,CAAtC,EAAyC,CAAC,CAA1C,CAA1B;MAEAL,GAAG,CAACgB,KAAJ,CAAU,IAAV,EAAgBL,mBAAhB,EAAqCM,IAArC,CAA0C,UAASC,MAAT,EAAiB;QAEzD,IAAIC,QAAQ,GAAGC,MAAM,CAACC,IAAP,CAAYH,MAAZ,EAAoB,CAApB,CAAf,CAFyD,CAIzD;QACA;QACA;;QACA,OAAOX,QAAQ,CAAC,IAAD,EAAOW,MAAM,CAACC,QAAD,CAAb,CAAf,CAPyD,CASzD;QACA;MACD,CAXD,EAWG,UAASG,GAAT,EAAc;QAEf,OAAOf,QAAQ,CAACe,GAAD,EAAMA,GAAG,CAACC,QAAV,CAAf;MACD,CAdD;IAeD,CA1BD,MA0BO;MAEL,OAAOvB,GAAG,CAACgB,KAAJ,CAAU,IAAV,EAAgBX,SAAhB,CAAP;IACD;EACF,CArCD;AAsCD"},"metadata":{},"sourceType":"module"}