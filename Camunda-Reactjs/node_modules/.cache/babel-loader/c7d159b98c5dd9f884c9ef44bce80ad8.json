{"ast":null,"code":"import inherits from 'inherits';\nimport { isObject, assign, forEach } from 'min-dash';\nimport BaseRenderer from 'diagram-js/lib/draw/BaseRenderer';\nimport { isExpanded, isEventSubProcess } from '../util/DiUtil';\nimport { getLabel } from '../features/label-editing/LabelUtil';\nimport { is } from '../util/ModelUtil';\nimport { createLine } from 'diagram-js/lib/util/RenderUtil';\nimport { isTypedEvent, isThrowEvent, isCollection, getDi, getSemantic, getCirclePath, getRoundRectPath, getDiamondPath, getRectPath, getFillColor, getStrokeColor } from './BpmnRenderUtil';\nimport { query as domQuery } from 'min-dom';\nimport { append as svgAppend, attr as svgAttr, create as svgCreate, classes as svgClasses } from 'tiny-svg';\nimport { rotate, transform, translate } from 'diagram-js/lib/util/SvgTransformUtil';\nimport Ids from 'ids';\nvar RENDERER_IDS = new Ids();\nvar TASK_BORDER_RADIUS = 10;\nvar INNER_OUTER_DIST = 3;\nvar DEFAULT_FILL_OPACITY = .95,\n    HIGH_FILL_OPACITY = .35;\nexport default function BpmnRenderer(config, eventBus, styles, pathMap, canvas, textRenderer, priority) {\n  BaseRenderer.call(this, eventBus, priority);\n  var defaultFillColor = config && config.defaultFillColor,\n      defaultStrokeColor = config && config.defaultStrokeColor;\n  var rendererId = RENDERER_IDS.next();\n  var markers = {};\n  var computeStyle = styles.computeStyle;\n\n  function addMarker(id, options) {\n    var attrs = assign({\n      fill: 'black',\n      strokeWidth: 1,\n      strokeLinecap: 'round',\n      strokeDasharray: 'none'\n    }, options.attrs);\n    var ref = options.ref || {\n      x: 0,\n      y: 0\n    };\n    var scale = options.scale || 1; // fix for safari / chrome / firefox bug not correctly\n    // resetting stroke dash array\n\n    if (attrs.strokeDasharray === 'none') {\n      attrs.strokeDasharray = [10000, 1];\n    }\n\n    var marker = svgCreate('marker');\n    svgAttr(options.element, attrs);\n    svgAppend(marker, options.element);\n    svgAttr(marker, {\n      id: id,\n      viewBox: '0 0 20 20',\n      refX: ref.x,\n      refY: ref.y,\n      markerWidth: 20 * scale,\n      markerHeight: 20 * scale,\n      orient: 'auto'\n    });\n    var defs = domQuery('defs', canvas._svg);\n\n    if (!defs) {\n      defs = svgCreate('defs');\n      svgAppend(canvas._svg, defs);\n    }\n\n    svgAppend(defs, marker);\n    markers[id] = marker;\n  }\n\n  function colorEscape(str) {\n    // only allow characters and numbers\n    return str.replace(/[^0-9a-zA-z]+/g, '_');\n  }\n\n  function marker(type, fill, stroke) {\n    var id = type + '-' + colorEscape(fill) + '-' + colorEscape(stroke) + '-' + rendererId;\n\n    if (!markers[id]) {\n      createMarker(id, type, fill, stroke);\n    }\n\n    return 'url(#' + id + ')';\n  }\n\n  function createMarker(id, type, fill, stroke) {\n    if (type === 'sequenceflow-end') {\n      var sequenceflowEnd = svgCreate('path');\n      svgAttr(sequenceflowEnd, {\n        d: 'M 1 5 L 11 10 L 1 15 Z'\n      });\n      addMarker(id, {\n        element: sequenceflowEnd,\n        ref: {\n          x: 11,\n          y: 10\n        },\n        scale: 0.5,\n        attrs: {\n          fill: stroke,\n          stroke: stroke\n        }\n      });\n    }\n\n    if (type === 'messageflow-start') {\n      var messageflowStart = svgCreate('circle');\n      svgAttr(messageflowStart, {\n        cx: 6,\n        cy: 6,\n        r: 3.5\n      });\n      addMarker(id, {\n        element: messageflowStart,\n        attrs: {\n          fill: fill,\n          stroke: stroke\n        },\n        ref: {\n          x: 6,\n          y: 6\n        }\n      });\n    }\n\n    if (type === 'messageflow-end') {\n      var messageflowEnd = svgCreate('path');\n      svgAttr(messageflowEnd, {\n        d: 'm 1 5 l 0 -3 l 7 3 l -7 3 z'\n      });\n      addMarker(id, {\n        element: messageflowEnd,\n        attrs: {\n          fill: fill,\n          stroke: stroke,\n          strokeLinecap: 'butt'\n        },\n        ref: {\n          x: 8.5,\n          y: 5\n        }\n      });\n    }\n\n    if (type === 'association-start') {\n      var associationStart = svgCreate('path');\n      svgAttr(associationStart, {\n        d: 'M 11 5 L 1 10 L 11 15'\n      });\n      addMarker(id, {\n        element: associationStart,\n        attrs: {\n          fill: 'none',\n          stroke: stroke,\n          strokeWidth: 1.5\n        },\n        ref: {\n          x: 1,\n          y: 10\n        },\n        scale: 0.5\n      });\n    }\n\n    if (type === 'association-end') {\n      var associationEnd = svgCreate('path');\n      svgAttr(associationEnd, {\n        d: 'M 1 5 L 11 10 L 1 15'\n      });\n      addMarker(id, {\n        element: associationEnd,\n        attrs: {\n          fill: 'none',\n          stroke: stroke,\n          strokeWidth: 1.5\n        },\n        ref: {\n          x: 12,\n          y: 10\n        },\n        scale: 0.5\n      });\n    }\n\n    if (type === 'conditional-flow-marker') {\n      var conditionalflowMarker = svgCreate('path');\n      svgAttr(conditionalflowMarker, {\n        d: 'M 0 10 L 8 6 L 16 10 L 8 14 Z'\n      });\n      addMarker(id, {\n        element: conditionalflowMarker,\n        attrs: {\n          fill: fill,\n          stroke: stroke\n        },\n        ref: {\n          x: -1,\n          y: 10\n        },\n        scale: 0.5\n      });\n    }\n\n    if (type === 'conditional-default-flow-marker') {\n      var conditionaldefaultflowMarker = svgCreate('path');\n      svgAttr(conditionaldefaultflowMarker, {\n        d: 'M 6 4 L 10 16'\n      });\n      addMarker(id, {\n        element: conditionaldefaultflowMarker,\n        attrs: {\n          stroke: stroke\n        },\n        ref: {\n          x: 0,\n          y: 10\n        },\n        scale: 0.5\n      });\n    }\n  }\n\n  function drawCircle(parentGfx, width, height, offset, attrs) {\n    if (isObject(offset)) {\n      attrs = offset;\n      offset = 0;\n    }\n\n    offset = offset || 0;\n    attrs = computeStyle(attrs, {\n      stroke: 'black',\n      strokeWidth: 2,\n      fill: 'white'\n    });\n\n    if (attrs.fill === 'none') {\n      delete attrs.fillOpacity;\n    }\n\n    var cx = width / 2,\n        cy = height / 2;\n    var circle = svgCreate('circle');\n    svgAttr(circle, {\n      cx: cx,\n      cy: cy,\n      r: Math.round((width + height) / 4 - offset)\n    });\n    svgAttr(circle, attrs);\n    svgAppend(parentGfx, circle);\n    return circle;\n  }\n\n  function drawRect(parentGfx, width, height, r, offset, attrs) {\n    if (isObject(offset)) {\n      attrs = offset;\n      offset = 0;\n    }\n\n    offset = offset || 0;\n    attrs = computeStyle(attrs, {\n      stroke: 'black',\n      strokeWidth: 2,\n      fill: 'white'\n    });\n    var rect = svgCreate('rect');\n    svgAttr(rect, {\n      x: offset,\n      y: offset,\n      width: width - offset * 2,\n      height: height - offset * 2,\n      rx: r,\n      ry: r\n    });\n    svgAttr(rect, attrs);\n    svgAppend(parentGfx, rect);\n    return rect;\n  }\n\n  function drawDiamond(parentGfx, width, height, attrs) {\n    var x_2 = width / 2;\n    var y_2 = height / 2;\n    var points = [{\n      x: x_2,\n      y: 0\n    }, {\n      x: width,\n      y: y_2\n    }, {\n      x: x_2,\n      y: height\n    }, {\n      x: 0,\n      y: y_2\n    }];\n    var pointsString = points.map(function (point) {\n      return point.x + ',' + point.y;\n    }).join(' ');\n    attrs = computeStyle(attrs, {\n      stroke: 'black',\n      strokeWidth: 2,\n      fill: 'white'\n    });\n    var polygon = svgCreate('polygon');\n    svgAttr(polygon, {\n      points: pointsString\n    });\n    svgAttr(polygon, attrs);\n    svgAppend(parentGfx, polygon);\n    return polygon;\n  }\n\n  function drawLine(parentGfx, waypoints, attrs) {\n    attrs = computeStyle(attrs, ['no-fill'], {\n      stroke: 'black',\n      strokeWidth: 2,\n      fill: 'none'\n    });\n    var line = createLine(waypoints, attrs);\n    svgAppend(parentGfx, line);\n    return line;\n  }\n\n  function drawPath(parentGfx, d, attrs) {\n    attrs = computeStyle(attrs, ['no-fill'], {\n      strokeWidth: 2,\n      stroke: 'black'\n    });\n    var path = svgCreate('path');\n    svgAttr(path, {\n      d: d\n    });\n    svgAttr(path, attrs);\n    svgAppend(parentGfx, path);\n    return path;\n  }\n\n  function drawMarker(type, parentGfx, path, attrs) {\n    return drawPath(parentGfx, path, assign({\n      'data-marker': type\n    }, attrs));\n  }\n\n  function as(type) {\n    return function (parentGfx, element) {\n      return handlers[type](parentGfx, element);\n    };\n  }\n\n  function renderer(type) {\n    return handlers[type];\n  }\n\n  function renderEventContent(element, parentGfx) {\n    var event = getSemantic(element);\n    var isThrowing = isThrowEvent(event);\n\n    if (event.eventDefinitions && event.eventDefinitions.length > 1) {\n      if (event.parallelMultiple) {\n        return renderer('bpmn:ParallelMultipleEventDefinition')(parentGfx, element, isThrowing);\n      } else {\n        return renderer('bpmn:MultipleEventDefinition')(parentGfx, element, isThrowing);\n      }\n    }\n\n    if (isTypedEvent(event, 'bpmn:MessageEventDefinition')) {\n      return renderer('bpmn:MessageEventDefinition')(parentGfx, element, isThrowing);\n    }\n\n    if (isTypedEvent(event, 'bpmn:TimerEventDefinition')) {\n      return renderer('bpmn:TimerEventDefinition')(parentGfx, element, isThrowing);\n    }\n\n    if (isTypedEvent(event, 'bpmn:ConditionalEventDefinition')) {\n      return renderer('bpmn:ConditionalEventDefinition')(parentGfx, element);\n    }\n\n    if (isTypedEvent(event, 'bpmn:SignalEventDefinition')) {\n      return renderer('bpmn:SignalEventDefinition')(parentGfx, element, isThrowing);\n    }\n\n    if (isTypedEvent(event, 'bpmn:EscalationEventDefinition')) {\n      return renderer('bpmn:EscalationEventDefinition')(parentGfx, element, isThrowing);\n    }\n\n    if (isTypedEvent(event, 'bpmn:LinkEventDefinition')) {\n      return renderer('bpmn:LinkEventDefinition')(parentGfx, element, isThrowing);\n    }\n\n    if (isTypedEvent(event, 'bpmn:ErrorEventDefinition')) {\n      return renderer('bpmn:ErrorEventDefinition')(parentGfx, element, isThrowing);\n    }\n\n    if (isTypedEvent(event, 'bpmn:CancelEventDefinition')) {\n      return renderer('bpmn:CancelEventDefinition')(parentGfx, element, isThrowing);\n    }\n\n    if (isTypedEvent(event, 'bpmn:CompensateEventDefinition')) {\n      return renderer('bpmn:CompensateEventDefinition')(parentGfx, element, isThrowing);\n    }\n\n    if (isTypedEvent(event, 'bpmn:TerminateEventDefinition')) {\n      return renderer('bpmn:TerminateEventDefinition')(parentGfx, element, isThrowing);\n    }\n\n    return null;\n  }\n\n  function renderLabel(parentGfx, label, options) {\n    options = assign({\n      size: {\n        width: 100\n      }\n    }, options);\n    var text = textRenderer.createText(label || '', options);\n    svgClasses(text).add('djs-label');\n    svgAppend(parentGfx, text);\n    return text;\n  }\n\n  function renderEmbeddedLabel(parentGfx, element, align) {\n    var semantic = getSemantic(element);\n    return renderLabel(parentGfx, semantic.name, {\n      box: element,\n      align: align,\n      padding: 5,\n      style: {\n        fill: getStrokeColor(element, defaultStrokeColor)\n      }\n    });\n  }\n\n  function renderExternalLabel(parentGfx, element) {\n    var box = {\n      width: 90,\n      height: 30,\n      x: element.width / 2 + element.x,\n      y: element.height / 2 + element.y\n    };\n    return renderLabel(parentGfx, getLabel(element), {\n      box: box,\n      fitBox: true,\n      style: assign({}, textRenderer.getExternalStyle(), {\n        fill: getStrokeColor(element, defaultStrokeColor)\n      })\n    });\n  }\n\n  function renderLaneLabel(parentGfx, text, element) {\n    var textBox = renderLabel(parentGfx, text, {\n      box: {\n        height: 30,\n        width: element.height\n      },\n      align: 'center-middle',\n      style: {\n        fill: getStrokeColor(element, defaultStrokeColor)\n      }\n    });\n    var top = -1 * element.height;\n    transform(textBox, 0, -top, 270);\n  }\n\n  function createPathFromConnection(connection) {\n    var waypoints = connection.waypoints;\n    var pathData = 'm  ' + waypoints[0].x + ',' + waypoints[0].y;\n\n    for (var i = 1; i < waypoints.length; i++) {\n      pathData += 'L' + waypoints[i].x + ',' + waypoints[i].y + ' ';\n    }\n\n    return pathData;\n  }\n\n  var handlers = this.handlers = {\n    'bpmn:Event': function (parentGfx, element, attrs) {\n      if (!('fillOpacity' in attrs)) {\n        attrs.fillOpacity = DEFAULT_FILL_OPACITY;\n      }\n\n      return drawCircle(parentGfx, element.width, element.height, attrs);\n    },\n    'bpmn:StartEvent': function (parentGfx, element) {\n      var attrs = {\n        fill: getFillColor(element, defaultFillColor),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      };\n      var semantic = getSemantic(element);\n\n      if (!semantic.isInterrupting) {\n        attrs = {\n          strokeDasharray: '6',\n          strokeLinecap: 'round',\n          fill: getFillColor(element, defaultFillColor),\n          stroke: getStrokeColor(element, defaultStrokeColor)\n        };\n      }\n\n      var circle = renderer('bpmn:Event')(parentGfx, element, attrs);\n      renderEventContent(element, parentGfx);\n      return circle;\n    },\n    'bpmn:MessageEventDefinition': function (parentGfx, element, isThrowing) {\n      var pathData = pathMap.getScaledPath('EVENT_MESSAGE', {\n        xScaleFactor: 0.9,\n        yScaleFactor: 0.9,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0.235,\n          my: 0.315\n        }\n      });\n      var fill = isThrowing ? getStrokeColor(element, defaultStrokeColor) : getFillColor(element, defaultFillColor);\n      var stroke = isThrowing ? getFillColor(element, defaultFillColor) : getStrokeColor(element, defaultStrokeColor);\n      var messagePath = drawPath(parentGfx, pathData, {\n        strokeWidth: 1,\n        fill: fill,\n        stroke: stroke\n      });\n      return messagePath;\n    },\n    'bpmn:TimerEventDefinition': function (parentGfx, element) {\n      var circle = drawCircle(parentGfx, element.width, element.height, 0.2 * element.height, {\n        strokeWidth: 2,\n        fill: getFillColor(element, defaultFillColor),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n      var pathData = pathMap.getScaledPath('EVENT_TIMER_WH', {\n        xScaleFactor: 0.75,\n        yScaleFactor: 0.75,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0.5,\n          my: 0.5\n        }\n      });\n      drawPath(parentGfx, pathData, {\n        strokeWidth: 2,\n        strokeLinecap: 'square',\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n\n      for (var i = 0; i < 12; i++) {\n        var linePathData = pathMap.getScaledPath('EVENT_TIMER_LINE', {\n          xScaleFactor: 0.75,\n          yScaleFactor: 0.75,\n          containerWidth: element.width,\n          containerHeight: element.height,\n          position: {\n            mx: 0.5,\n            my: 0.5\n          }\n        });\n        var width = element.width / 2;\n        var height = element.height / 2;\n        drawPath(parentGfx, linePathData, {\n          strokeWidth: 1,\n          strokeLinecap: 'square',\n          transform: 'rotate(' + i * 30 + ',' + height + ',' + width + ')',\n          stroke: getStrokeColor(element, defaultStrokeColor)\n        });\n      }\n\n      return circle;\n    },\n    'bpmn:EscalationEventDefinition': function (parentGfx, event, isThrowing) {\n      var pathData = pathMap.getScaledPath('EVENT_ESCALATION', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.5,\n          my: 0.2\n        }\n      });\n      var fill = isThrowing ? getStrokeColor(event, defaultStrokeColor) : 'none';\n      return drawPath(parentGfx, pathData, {\n        strokeWidth: 1,\n        fill: fill,\n        stroke: getStrokeColor(event, defaultStrokeColor)\n      });\n    },\n    'bpmn:ConditionalEventDefinition': function (parentGfx, event) {\n      var pathData = pathMap.getScaledPath('EVENT_CONDITIONAL', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.5,\n          my: 0.222\n        }\n      });\n      return drawPath(parentGfx, pathData, {\n        strokeWidth: 1,\n        stroke: getStrokeColor(event, defaultStrokeColor)\n      });\n    },\n    'bpmn:LinkEventDefinition': function (parentGfx, event, isThrowing) {\n      var pathData = pathMap.getScaledPath('EVENT_LINK', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.57,\n          my: 0.263\n        }\n      });\n      var fill = isThrowing ? getStrokeColor(event, defaultStrokeColor) : 'none';\n      return drawPath(parentGfx, pathData, {\n        strokeWidth: 1,\n        fill: fill,\n        stroke: getStrokeColor(event, defaultStrokeColor)\n      });\n    },\n    'bpmn:ErrorEventDefinition': function (parentGfx, event, isThrowing) {\n      var pathData = pathMap.getScaledPath('EVENT_ERROR', {\n        xScaleFactor: 1.1,\n        yScaleFactor: 1.1,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.2,\n          my: 0.722\n        }\n      });\n      var fill = isThrowing ? getStrokeColor(event, defaultStrokeColor) : 'none';\n      return drawPath(parentGfx, pathData, {\n        strokeWidth: 1,\n        fill: fill,\n        stroke: getStrokeColor(event, defaultStrokeColor)\n      });\n    },\n    'bpmn:CancelEventDefinition': function (parentGfx, event, isThrowing) {\n      var pathData = pathMap.getScaledPath('EVENT_CANCEL_45', {\n        xScaleFactor: 1.0,\n        yScaleFactor: 1.0,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.638,\n          my: -0.055\n        }\n      });\n      var fill = isThrowing ? getStrokeColor(event, defaultStrokeColor) : 'none';\n      var path = drawPath(parentGfx, pathData, {\n        strokeWidth: 1,\n        fill: fill,\n        stroke: getStrokeColor(event, defaultStrokeColor)\n      });\n      rotate(path, 45);\n      return path;\n    },\n    'bpmn:CompensateEventDefinition': function (parentGfx, event, isThrowing) {\n      var pathData = pathMap.getScaledPath('EVENT_COMPENSATION', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.22,\n          my: 0.5\n        }\n      });\n      var fill = isThrowing ? getStrokeColor(event, defaultStrokeColor) : 'none';\n      return drawPath(parentGfx, pathData, {\n        strokeWidth: 1,\n        fill: fill,\n        stroke: getStrokeColor(event, defaultStrokeColor)\n      });\n    },\n    'bpmn:SignalEventDefinition': function (parentGfx, event, isThrowing) {\n      var pathData = pathMap.getScaledPath('EVENT_SIGNAL', {\n        xScaleFactor: 0.9,\n        yScaleFactor: 0.9,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.5,\n          my: 0.2\n        }\n      });\n      var fill = isThrowing ? getStrokeColor(event, defaultStrokeColor) : 'none';\n      return drawPath(parentGfx, pathData, {\n        strokeWidth: 1,\n        fill: fill,\n        stroke: getStrokeColor(event, defaultStrokeColor)\n      });\n    },\n    'bpmn:MultipleEventDefinition': function (parentGfx, event, isThrowing) {\n      var pathData = pathMap.getScaledPath('EVENT_MULTIPLE', {\n        xScaleFactor: 1.1,\n        yScaleFactor: 1.1,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.222,\n          my: 0.36\n        }\n      });\n      var fill = isThrowing ? getStrokeColor(event, defaultStrokeColor) : 'none';\n      return drawPath(parentGfx, pathData, {\n        strokeWidth: 1,\n        fill: fill\n      });\n    },\n    'bpmn:ParallelMultipleEventDefinition': function (parentGfx, event) {\n      var pathData = pathMap.getScaledPath('EVENT_PARALLEL_MULTIPLE', {\n        xScaleFactor: 1.2,\n        yScaleFactor: 1.2,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.458,\n          my: 0.194\n        }\n      });\n      return drawPath(parentGfx, pathData, {\n        strokeWidth: 1,\n        fill: getStrokeColor(event, defaultStrokeColor),\n        stroke: getStrokeColor(event, defaultStrokeColor)\n      });\n    },\n    'bpmn:EndEvent': function (parentGfx, element) {\n      var circle = renderer('bpmn:Event')(parentGfx, element, {\n        strokeWidth: 4,\n        fill: getFillColor(element, defaultFillColor),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n      renderEventContent(element, parentGfx, true);\n      return circle;\n    },\n    'bpmn:TerminateEventDefinition': function (parentGfx, element) {\n      var circle = drawCircle(parentGfx, element.width, element.height, 8, {\n        strokeWidth: 4,\n        fill: getStrokeColor(element, defaultStrokeColor),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n      return circle;\n    },\n    'bpmn:IntermediateEvent': function (parentGfx, element) {\n      var outer = renderer('bpmn:Event')(parentGfx, element, {\n        strokeWidth: 1,\n        fill: getFillColor(element, defaultFillColor),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n      /* inner */\n\n      drawCircle(parentGfx, element.width, element.height, INNER_OUTER_DIST, {\n        strokeWidth: 1,\n        fill: getFillColor(element, 'none'),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n      renderEventContent(element, parentGfx);\n      return outer;\n    },\n    'bpmn:IntermediateCatchEvent': as('bpmn:IntermediateEvent'),\n    'bpmn:IntermediateThrowEvent': as('bpmn:IntermediateEvent'),\n    'bpmn:Activity': function (parentGfx, element, attrs) {\n      attrs = attrs || {};\n\n      if (!('fillOpacity' in attrs)) {\n        attrs.fillOpacity = DEFAULT_FILL_OPACITY;\n      }\n\n      return drawRect(parentGfx, element.width, element.height, TASK_BORDER_RADIUS, attrs);\n    },\n    'bpmn:Task': function (parentGfx, element) {\n      var attrs = {\n        fill: getFillColor(element, defaultFillColor),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      };\n      var rect = renderer('bpmn:Activity')(parentGfx, element, attrs);\n      renderEmbeddedLabel(parentGfx, element, 'center-middle');\n      attachTaskMarkers(parentGfx, element);\n      return rect;\n    },\n    'bpmn:ServiceTask': function (parentGfx, element) {\n      var task = renderer('bpmn:Task')(parentGfx, element);\n      var pathDataBG = pathMap.getScaledPath('TASK_TYPE_SERVICE', {\n        abspos: {\n          x: 12,\n          y: 18\n        }\n      });\n      /* service bg */\n\n      drawPath(parentGfx, pathDataBG, {\n        strokeWidth: 1,\n        fill: getFillColor(element, defaultFillColor),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n      var fillPathData = pathMap.getScaledPath('TASK_TYPE_SERVICE_FILL', {\n        abspos: {\n          x: 17.2,\n          y: 18\n        }\n      });\n      /* service fill */\n\n      drawPath(parentGfx, fillPathData, {\n        strokeWidth: 0,\n        fill: getFillColor(element, defaultFillColor)\n      });\n      var pathData = pathMap.getScaledPath('TASK_TYPE_SERVICE', {\n        abspos: {\n          x: 17,\n          y: 22\n        }\n      });\n      /* service */\n\n      drawPath(parentGfx, pathData, {\n        strokeWidth: 1,\n        fill: getFillColor(element, defaultFillColor),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n      return task;\n    },\n    'bpmn:UserTask': function (parentGfx, element) {\n      var task = renderer('bpmn:Task')(parentGfx, element);\n      var x = 15;\n      var y = 12;\n      var pathData = pathMap.getScaledPath('TASK_TYPE_USER_1', {\n        abspos: {\n          x: x,\n          y: y\n        }\n      });\n      /* user path */\n\n      drawPath(parentGfx, pathData, {\n        strokeWidth: 0.5,\n        fill: getFillColor(element, defaultFillColor),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n      var pathData2 = pathMap.getScaledPath('TASK_TYPE_USER_2', {\n        abspos: {\n          x: x,\n          y: y\n        }\n      });\n      /* user2 path */\n\n      drawPath(parentGfx, pathData2, {\n        strokeWidth: 0.5,\n        fill: getFillColor(element, defaultFillColor),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n      var pathData3 = pathMap.getScaledPath('TASK_TYPE_USER_3', {\n        abspos: {\n          x: x,\n          y: y\n        }\n      });\n      /* user3 path */\n\n      drawPath(parentGfx, pathData3, {\n        strokeWidth: 0.5,\n        fill: getStrokeColor(element, defaultStrokeColor),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n      return task;\n    },\n    'bpmn:ManualTask': function (parentGfx, element) {\n      var task = renderer('bpmn:Task')(parentGfx, element);\n      var pathData = pathMap.getScaledPath('TASK_TYPE_MANUAL', {\n        abspos: {\n          x: 17,\n          y: 15\n        }\n      });\n      /* manual path */\n\n      drawPath(parentGfx, pathData, {\n        strokeWidth: 0.5,\n        // 0.25,\n        fill: getFillColor(element, defaultFillColor),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n      return task;\n    },\n    'bpmn:SendTask': function (parentGfx, element) {\n      var task = renderer('bpmn:Task')(parentGfx, element);\n      var pathData = pathMap.getScaledPath('TASK_TYPE_SEND', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: 21,\n        containerHeight: 14,\n        position: {\n          mx: 0.285,\n          my: 0.357\n        }\n      });\n      /* send path */\n\n      drawPath(parentGfx, pathData, {\n        strokeWidth: 1,\n        fill: getStrokeColor(element, defaultStrokeColor),\n        stroke: getFillColor(element, defaultFillColor)\n      });\n      return task;\n    },\n    'bpmn:ReceiveTask': function (parentGfx, element) {\n      var semantic = getSemantic(element);\n      var task = renderer('bpmn:Task')(parentGfx, element);\n      var pathData;\n\n      if (semantic.instantiate) {\n        drawCircle(parentGfx, 28, 28, 20 * 0.22, {\n          strokeWidth: 1\n        });\n        pathData = pathMap.getScaledPath('TASK_TYPE_INSTANTIATING_SEND', {\n          abspos: {\n            x: 7.77,\n            y: 9.52\n          }\n        });\n      } else {\n        pathData = pathMap.getScaledPath('TASK_TYPE_SEND', {\n          xScaleFactor: 0.9,\n          yScaleFactor: 0.9,\n          containerWidth: 21,\n          containerHeight: 14,\n          position: {\n            mx: 0.3,\n            my: 0.4\n          }\n        });\n      }\n      /* receive path */\n\n\n      drawPath(parentGfx, pathData, {\n        strokeWidth: 1,\n        fill: getFillColor(element, defaultFillColor),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n      return task;\n    },\n    'bpmn:ScriptTask': function (parentGfx, element) {\n      var task = renderer('bpmn:Task')(parentGfx, element);\n      var pathData = pathMap.getScaledPath('TASK_TYPE_SCRIPT', {\n        abspos: {\n          x: 15,\n          y: 20\n        }\n      });\n      /* script path */\n\n      drawPath(parentGfx, pathData, {\n        strokeWidth: 1,\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n      return task;\n    },\n    'bpmn:BusinessRuleTask': function (parentGfx, element) {\n      var task = renderer('bpmn:Task')(parentGfx, element);\n      var headerPathData = pathMap.getScaledPath('TASK_TYPE_BUSINESS_RULE_HEADER', {\n        abspos: {\n          x: 8,\n          y: 8\n        }\n      });\n      var businessHeaderPath = drawPath(parentGfx, headerPathData);\n      svgAttr(businessHeaderPath, {\n        strokeWidth: 1,\n        fill: getFillColor(element, '#aaaaaa'),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n      var headerData = pathMap.getScaledPath('TASK_TYPE_BUSINESS_RULE_MAIN', {\n        abspos: {\n          x: 8,\n          y: 8\n        }\n      });\n      var businessPath = drawPath(parentGfx, headerData);\n      svgAttr(businessPath, {\n        strokeWidth: 1,\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n      return task;\n    },\n    'bpmn:SubProcess': function (parentGfx, element, attrs) {\n      attrs = assign({\n        fill: getFillColor(element, defaultFillColor),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      }, attrs);\n      var rect = renderer('bpmn:Activity')(parentGfx, element, attrs);\n      var expanded = isExpanded(element);\n\n      if (isEventSubProcess(element)) {\n        svgAttr(rect, {\n          strokeDasharray: '1,2'\n        });\n      }\n\n      renderEmbeddedLabel(parentGfx, element, expanded ? 'center-top' : 'center-middle');\n\n      if (expanded) {\n        attachTaskMarkers(parentGfx, element);\n      } else {\n        attachTaskMarkers(parentGfx, element, ['SubProcessMarker']);\n      }\n\n      return rect;\n    },\n    'bpmn:AdHocSubProcess': function (parentGfx, element) {\n      return renderer('bpmn:SubProcess')(parentGfx, element);\n    },\n    'bpmn:Transaction': function (parentGfx, element) {\n      var outer = renderer('bpmn:SubProcess')(parentGfx, element);\n      var innerAttrs = styles.style(['no-fill', 'no-events'], {\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n      /* inner path */\n\n      drawRect(parentGfx, element.width, element.height, TASK_BORDER_RADIUS - 2, INNER_OUTER_DIST, innerAttrs);\n      return outer;\n    },\n    'bpmn:CallActivity': function (parentGfx, element) {\n      return renderer('bpmn:SubProcess')(parentGfx, element, {\n        strokeWidth: 5\n      });\n    },\n    'bpmn:Participant': function (parentGfx, element) {\n      var attrs = {\n        fillOpacity: DEFAULT_FILL_OPACITY,\n        fill: getFillColor(element, defaultFillColor),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      };\n      var lane = renderer('bpmn:Lane')(parentGfx, element, attrs);\n      var expandedPool = isExpanded(element);\n\n      if (expandedPool) {\n        drawLine(parentGfx, [{\n          x: 30,\n          y: 0\n        }, {\n          x: 30,\n          y: element.height\n        }], {\n          stroke: getStrokeColor(element, defaultStrokeColor)\n        });\n        var text = getSemantic(element).name;\n        renderLaneLabel(parentGfx, text, element);\n      } else {\n        // Collapsed pool draw text inline\n        var text2 = getSemantic(element).name;\n        renderLabel(parentGfx, text2, {\n          box: element,\n          align: 'center-middle',\n          style: {\n            fill: getStrokeColor(element, defaultStrokeColor)\n          }\n        });\n      }\n\n      var participantMultiplicity = !!getSemantic(element).participantMultiplicity;\n\n      if (participantMultiplicity) {\n        renderer('ParticipantMultiplicityMarker')(parentGfx, element);\n      }\n\n      return lane;\n    },\n    'bpmn:Lane': function (parentGfx, element, attrs) {\n      var rect = drawRect(parentGfx, element.width, element.height, 0, assign({\n        fill: getFillColor(element, defaultFillColor),\n        fillOpacity: HIGH_FILL_OPACITY,\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      }, attrs));\n      var semantic = getSemantic(element);\n\n      if (semantic.$type === 'bpmn:Lane') {\n        var text = semantic.name;\n        renderLaneLabel(parentGfx, text, element);\n      }\n\n      return rect;\n    },\n    'bpmn:InclusiveGateway': function (parentGfx, element) {\n      var diamond = renderer('bpmn:Gateway')(parentGfx, element);\n      /* circle path */\n\n      drawCircle(parentGfx, element.width, element.height, element.height * 0.24, {\n        strokeWidth: 2.5,\n        fill: getFillColor(element, defaultFillColor),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n      return diamond;\n    },\n    'bpmn:ExclusiveGateway': function (parentGfx, element) {\n      var diamond = renderer('bpmn:Gateway')(parentGfx, element);\n      var pathData = pathMap.getScaledPath('GATEWAY_EXCLUSIVE', {\n        xScaleFactor: 0.4,\n        yScaleFactor: 0.4,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0.32,\n          my: 0.3\n        }\n      });\n\n      if (getDi(element).isMarkerVisible) {\n        drawPath(parentGfx, pathData, {\n          strokeWidth: 1,\n          fill: getStrokeColor(element, defaultStrokeColor),\n          stroke: getStrokeColor(element, defaultStrokeColor)\n        });\n      }\n\n      return diamond;\n    },\n    'bpmn:ComplexGateway': function (parentGfx, element) {\n      var diamond = renderer('bpmn:Gateway')(parentGfx, element);\n      var pathData = pathMap.getScaledPath('GATEWAY_COMPLEX', {\n        xScaleFactor: 0.5,\n        yScaleFactor: 0.5,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0.46,\n          my: 0.26\n        }\n      });\n      /* complex path */\n\n      drawPath(parentGfx, pathData, {\n        strokeWidth: 1,\n        fill: getStrokeColor(element, defaultStrokeColor),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n      return diamond;\n    },\n    'bpmn:ParallelGateway': function (parentGfx, element) {\n      var diamond = renderer('bpmn:Gateway')(parentGfx, element);\n      var pathData = pathMap.getScaledPath('GATEWAY_PARALLEL', {\n        xScaleFactor: 0.6,\n        yScaleFactor: 0.6,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0.46,\n          my: 0.2\n        }\n      });\n      /* parallel path */\n\n      drawPath(parentGfx, pathData, {\n        strokeWidth: 1,\n        fill: getStrokeColor(element, defaultStrokeColor),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n      return diamond;\n    },\n    'bpmn:EventBasedGateway': function (parentGfx, element) {\n      var semantic = getSemantic(element);\n      var diamond = renderer('bpmn:Gateway')(parentGfx, element);\n      /* outer circle path */\n\n      drawCircle(parentGfx, element.width, element.height, element.height * 0.20, {\n        strokeWidth: 1,\n        fill: 'none',\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n      var type = semantic.eventGatewayType;\n      var instantiate = !!semantic.instantiate;\n\n      function drawEvent() {\n        var pathData = pathMap.getScaledPath('GATEWAY_EVENT_BASED', {\n          xScaleFactor: 0.18,\n          yScaleFactor: 0.18,\n          containerWidth: element.width,\n          containerHeight: element.height,\n          position: {\n            mx: 0.36,\n            my: 0.44\n          }\n        });\n        var attrs = {\n          strokeWidth: 2,\n          fill: getFillColor(element, 'none'),\n          stroke: getStrokeColor(element, defaultStrokeColor)\n        };\n        /* event path */\n\n        drawPath(parentGfx, pathData, attrs);\n      }\n\n      if (type === 'Parallel') {\n        var pathData = pathMap.getScaledPath('GATEWAY_PARALLEL', {\n          xScaleFactor: 0.4,\n          yScaleFactor: 0.4,\n          containerWidth: element.width,\n          containerHeight: element.height,\n          position: {\n            mx: 0.474,\n            my: 0.296\n          }\n        });\n        var parallelPath = drawPath(parentGfx, pathData);\n        svgAttr(parallelPath, {\n          strokeWidth: 1,\n          fill: 'none'\n        });\n      } else if (type === 'Exclusive') {\n        if (!instantiate) {\n          var innerCircle = drawCircle(parentGfx, element.width, element.height, element.height * 0.26);\n          svgAttr(innerCircle, {\n            strokeWidth: 1,\n            fill: 'none',\n            stroke: getStrokeColor(element, defaultStrokeColor)\n          });\n        }\n\n        drawEvent();\n      }\n\n      return diamond;\n    },\n    'bpmn:Gateway': function (parentGfx, element) {\n      var attrs = {\n        fill: getFillColor(element, defaultFillColor),\n        fillOpacity: DEFAULT_FILL_OPACITY,\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      };\n      return drawDiamond(parentGfx, element.width, element.height, attrs);\n    },\n    'bpmn:SequenceFlow': function (parentGfx, element) {\n      var pathData = createPathFromConnection(element);\n      var fill = getFillColor(element, defaultFillColor),\n          stroke = getStrokeColor(element, defaultStrokeColor);\n      var attrs = {\n        strokeLinejoin: 'round',\n        markerEnd: marker('sequenceflow-end', fill, stroke),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      };\n      var path = drawPath(parentGfx, pathData, attrs);\n      var sequenceFlow = getSemantic(element);\n      var source;\n\n      if (element.source) {\n        source = element.source.businessObject; // conditional flow marker\n\n        if (sequenceFlow.conditionExpression && source.$instanceOf('bpmn:Activity')) {\n          svgAttr(path, {\n            markerStart: marker('conditional-flow-marker', fill, stroke)\n          });\n        } // default marker\n\n\n        if (source.default && (source.$instanceOf('bpmn:Gateway') || source.$instanceOf('bpmn:Activity')) && source.default === sequenceFlow) {\n          svgAttr(path, {\n            markerStart: marker('conditional-default-flow-marker', fill, stroke)\n          });\n        }\n      }\n\n      return path;\n    },\n    'bpmn:Association': function (parentGfx, element, attrs) {\n      var semantic = getSemantic(element);\n      var fill = getFillColor(element, defaultFillColor),\n          stroke = getStrokeColor(element, defaultStrokeColor);\n      attrs = assign({\n        strokeDasharray: '0.5, 5',\n        strokeLinecap: 'round',\n        strokeLinejoin: 'round',\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      }, attrs || {});\n\n      if (semantic.associationDirection === 'One' || semantic.associationDirection === 'Both') {\n        attrs.markerEnd = marker('association-end', fill, stroke);\n      }\n\n      if (semantic.associationDirection === 'Both') {\n        attrs.markerStart = marker('association-start', fill, stroke);\n      }\n\n      return drawLine(parentGfx, element.waypoints, attrs);\n    },\n    'bpmn:DataInputAssociation': function (parentGfx, element) {\n      var fill = getFillColor(element, defaultFillColor),\n          stroke = getStrokeColor(element, defaultStrokeColor);\n      return renderer('bpmn:Association')(parentGfx, element, {\n        markerEnd: marker('association-end', fill, stroke)\n      });\n    },\n    'bpmn:DataOutputAssociation': function (parentGfx, element) {\n      var fill = getFillColor(element, defaultFillColor),\n          stroke = getStrokeColor(element, defaultStrokeColor);\n      return renderer('bpmn:Association')(parentGfx, element, {\n        markerEnd: marker('association-end', fill, stroke)\n      });\n    },\n    'bpmn:MessageFlow': function (parentGfx, element) {\n      var semantic = getSemantic(element),\n          di = getDi(element);\n      var fill = getFillColor(element, defaultFillColor),\n          stroke = getStrokeColor(element, defaultStrokeColor);\n      var pathData = createPathFromConnection(element);\n      var attrs = {\n        markerEnd: marker('messageflow-end', fill, stroke),\n        markerStart: marker('messageflow-start', fill, stroke),\n        strokeDasharray: '10, 12',\n        strokeLinecap: 'round',\n        strokeLinejoin: 'round',\n        strokeWidth: '1.5px',\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      };\n      var path = drawPath(parentGfx, pathData, attrs);\n\n      if (semantic.messageRef) {\n        var midPoint = path.getPointAtLength(path.getTotalLength() / 2);\n        var markerPathData = pathMap.getScaledPath('MESSAGE_FLOW_MARKER', {\n          abspos: {\n            x: midPoint.x,\n            y: midPoint.y\n          }\n        });\n        var messageAttrs = {\n          strokeWidth: 1\n        };\n\n        if (di.messageVisibleKind === 'initiating') {\n          messageAttrs.fill = 'white';\n          messageAttrs.stroke = 'black';\n        } else {\n          messageAttrs.fill = '#888';\n          messageAttrs.stroke = 'white';\n        }\n\n        drawPath(parentGfx, markerPathData, messageAttrs);\n      }\n\n      return path;\n    },\n    'bpmn:DataObject': function (parentGfx, element) {\n      var pathData = pathMap.getScaledPath('DATA_OBJECT_PATH', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0.474,\n          my: 0.296\n        }\n      });\n      var elementObject = drawPath(parentGfx, pathData, {\n        fill: getFillColor(element, defaultFillColor),\n        fillOpacity: DEFAULT_FILL_OPACITY,\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n      var semantic = getSemantic(element);\n\n      if (isCollection(semantic)) {\n        renderDataItemCollection(parentGfx, element);\n      }\n\n      return elementObject;\n    },\n    'bpmn:DataObjectReference': as('bpmn:DataObject'),\n    'bpmn:DataInput': function (parentGfx, element) {\n      var arrowPathData = pathMap.getRawPath('DATA_ARROW'); // page\n\n      var elementObject = renderer('bpmn:DataObject')(parentGfx, element);\n      /* input arrow path */\n\n      drawPath(parentGfx, arrowPathData, {\n        strokeWidth: 1\n      });\n      return elementObject;\n    },\n    'bpmn:DataOutput': function (parentGfx, element) {\n      var arrowPathData = pathMap.getRawPath('DATA_ARROW'); // page\n\n      var elementObject = renderer('bpmn:DataObject')(parentGfx, element);\n      /* output arrow path */\n\n      drawPath(parentGfx, arrowPathData, {\n        strokeWidth: 1,\n        fill: 'black'\n      });\n      return elementObject;\n    },\n    'bpmn:DataStoreReference': function (parentGfx, element) {\n      var DATA_STORE_PATH = pathMap.getScaledPath('DATA_STORE', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0,\n          my: 0.133\n        }\n      });\n      var elementStore = drawPath(parentGfx, DATA_STORE_PATH, {\n        strokeWidth: 2,\n        fill: getFillColor(element, defaultFillColor),\n        fillOpacity: DEFAULT_FILL_OPACITY,\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n      return elementStore;\n    },\n    'bpmn:BoundaryEvent': function (parentGfx, element) {\n      var semantic = getSemantic(element),\n          cancel = semantic.cancelActivity;\n      var attrs = {\n        strokeWidth: 1,\n        fill: getFillColor(element, defaultFillColor),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      };\n\n      if (!cancel) {\n        attrs.strokeDasharray = '6';\n        attrs.strokeLinecap = 'round';\n      } // apply fillOpacity\n\n\n      var outerAttrs = assign({}, attrs, {\n        fillOpacity: 1\n      }); // apply no-fill\n\n      var innerAttrs = assign({}, attrs, {\n        fill: 'none'\n      });\n      var outer = renderer('bpmn:Event')(parentGfx, element, outerAttrs);\n      /* inner path */\n\n      drawCircle(parentGfx, element.width, element.height, INNER_OUTER_DIST, innerAttrs);\n      renderEventContent(element, parentGfx);\n      return outer;\n    },\n    'bpmn:Group': function (parentGfx, element) {\n      var group = drawRect(parentGfx, element.width, element.height, TASK_BORDER_RADIUS, {\n        stroke: getStrokeColor(element, defaultStrokeColor),\n        strokeWidth: 1,\n        strokeDasharray: '8,3,1,3',\n        fill: 'none',\n        pointerEvents: 'none'\n      });\n      return group;\n    },\n    'label': function (parentGfx, element) {\n      return renderExternalLabel(parentGfx, element);\n    },\n    'bpmn:TextAnnotation': function (parentGfx, element) {\n      var style = {\n        'fill': 'none',\n        'stroke': 'none'\n      };\n      var textElement = drawRect(parentGfx, element.width, element.height, 0, 0, style);\n      var textPathData = pathMap.getScaledPath('TEXT_ANNOTATION', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0.0,\n          my: 0.0\n        }\n      });\n      drawPath(parentGfx, textPathData, {\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n      var text = getSemantic(element).text || '';\n      renderLabel(parentGfx, text, {\n        box: element,\n        align: 'left-top',\n        padding: 5,\n        style: {\n          fill: getStrokeColor(element, defaultStrokeColor)\n        }\n      });\n      return textElement;\n    },\n    'ParticipantMultiplicityMarker': function (parentGfx, element) {\n      var markerPath = pathMap.getScaledPath('MARKER_PARALLEL', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: element.width / 2 / element.width,\n          my: (element.height - 15) / element.height\n        }\n      });\n      drawMarker('participant-multiplicity', parentGfx, markerPath, {\n        strokeWidth: 2,\n        fill: getFillColor(element, defaultFillColor),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n    },\n    'SubProcessMarker': function (parentGfx, element) {\n      var markerRect = drawRect(parentGfx, 14, 14, 0, {\n        strokeWidth: 1,\n        fill: getFillColor(element, defaultFillColor),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      }); // Process marker is placed in the middle of the box\n      // therefore fixed values can be used here\n\n      translate(markerRect, element.width / 2 - 7.5, element.height - 20);\n      var markerPath = pathMap.getScaledPath('MARKER_SUB_PROCESS', {\n        xScaleFactor: 1.5,\n        yScaleFactor: 1.5,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: (element.width / 2 - 7.5) / element.width,\n          my: (element.height - 20) / element.height\n        }\n      });\n      drawMarker('sub-process', parentGfx, markerPath, {\n        fill: getFillColor(element, defaultFillColor),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n    },\n    'ParallelMarker': function (parentGfx, element, position) {\n      var markerPath = pathMap.getScaledPath('MARKER_PARALLEL', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: (element.width / 2 + position.parallel) / element.width,\n          my: (element.height - 20) / element.height\n        }\n      });\n      drawMarker('parallel', parentGfx, markerPath, {\n        fill: getFillColor(element, defaultFillColor),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n    },\n    'SequentialMarker': function (parentGfx, element, position) {\n      var markerPath = pathMap.getScaledPath('MARKER_SEQUENTIAL', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: (element.width / 2 + position.seq) / element.width,\n          my: (element.height - 19) / element.height\n        }\n      });\n      drawMarker('sequential', parentGfx, markerPath, {\n        fill: getFillColor(element, defaultFillColor),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n    },\n    'CompensationMarker': function (parentGfx, element, position) {\n      var markerMath = pathMap.getScaledPath('MARKER_COMPENSATION', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: (element.width / 2 + position.compensation) / element.width,\n          my: (element.height - 13) / element.height\n        }\n      });\n      drawMarker('compensation', parentGfx, markerMath, {\n        strokeWidth: 1,\n        fill: getFillColor(element, defaultFillColor),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n    },\n    'LoopMarker': function (parentGfx, element, position) {\n      var markerPath = pathMap.getScaledPath('MARKER_LOOP', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: (element.width / 2 + position.loop) / element.width,\n          my: (element.height - 7) / element.height\n        }\n      });\n      drawMarker('loop', parentGfx, markerPath, {\n        strokeWidth: 1,\n        fill: getFillColor(element, defaultFillColor),\n        stroke: getStrokeColor(element, defaultStrokeColor),\n        strokeLinecap: 'round',\n        strokeMiterlimit: 0.5\n      });\n    },\n    'AdhocMarker': function (parentGfx, element, position) {\n      var markerPath = pathMap.getScaledPath('MARKER_ADHOC', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: (element.width / 2 + position.adhoc) / element.width,\n          my: (element.height - 15) / element.height\n        }\n      });\n      drawMarker('adhoc', parentGfx, markerPath, {\n        strokeWidth: 1,\n        fill: getStrokeColor(element, defaultStrokeColor),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n    }\n  };\n\n  function attachTaskMarkers(parentGfx, element, taskMarkers) {\n    var obj = getSemantic(element);\n    var subprocess = taskMarkers && taskMarkers.indexOf('SubProcessMarker') !== -1;\n    var position;\n\n    if (subprocess) {\n      position = {\n        seq: -21,\n        parallel: -22,\n        compensation: -42,\n        loop: -18,\n        adhoc: 10\n      };\n    } else {\n      position = {\n        seq: -3,\n        parallel: -6,\n        compensation: -27,\n        loop: 0,\n        adhoc: 10\n      };\n    }\n\n    forEach(taskMarkers, function (marker) {\n      renderer(marker)(parentGfx, element, position);\n    });\n\n    if (obj.isForCompensation) {\n      renderer('CompensationMarker')(parentGfx, element, position);\n    }\n\n    if (obj.$type === 'bpmn:AdHocSubProcess') {\n      renderer('AdhocMarker')(parentGfx, element, position);\n    }\n\n    var loopCharacteristics = obj.loopCharacteristics,\n        isSequential = loopCharacteristics && loopCharacteristics.isSequential;\n\n    if (loopCharacteristics) {\n      if (isSequential === undefined) {\n        renderer('LoopMarker')(parentGfx, element, position);\n      }\n\n      if (isSequential === false) {\n        renderer('ParallelMarker')(parentGfx, element, position);\n      }\n\n      if (isSequential === true) {\n        renderer('SequentialMarker')(parentGfx, element, position);\n      }\n    }\n  }\n\n  function renderDataItemCollection(parentGfx, element) {\n    var yPosition = (element.height - 18) / element.height;\n    var pathData = pathMap.getScaledPath('DATA_OBJECT_COLLECTION_PATH', {\n      xScaleFactor: 1,\n      yScaleFactor: 1,\n      containerWidth: element.width,\n      containerHeight: element.height,\n      position: {\n        mx: 0.33,\n        my: yPosition\n      }\n    });\n    /* collection path */\n\n    drawPath(parentGfx, pathData, {\n      strokeWidth: 2\n    });\n  } // extension API, use at your own risk\n\n\n  this._drawPath = drawPath;\n}\ninherits(BpmnRenderer, BaseRenderer);\nBpmnRenderer.$inject = ['config.bpmnRenderer', 'eventBus', 'styles', 'pathMap', 'canvas', 'textRenderer'];\n\nBpmnRenderer.prototype.canRender = function (element) {\n  return is(element, 'bpmn:BaseElement');\n};\n\nBpmnRenderer.prototype.drawShape = function (parentGfx, element) {\n  var type = element.type;\n  var h = this.handlers[type];\n  /* jshint -W040 */\n\n  return h(parentGfx, element);\n};\n\nBpmnRenderer.prototype.drawConnection = function (parentGfx, element) {\n  var type = element.type;\n  var h = this.handlers[type];\n  /* jshint -W040 */\n\n  return h(parentGfx, element);\n};\n\nBpmnRenderer.prototype.getShapePath = function (element) {\n  if (is(element, 'bpmn:Event')) {\n    return getCirclePath(element);\n  }\n\n  if (is(element, 'bpmn:Activity')) {\n    return getRoundRectPath(element, TASK_BORDER_RADIUS);\n  }\n\n  if (is(element, 'bpmn:Gateway')) {\n    return getDiamondPath(element);\n  }\n\n  return getRectPath(element);\n};","map":{"version":3,"names":["inherits","isObject","assign","forEach","BaseRenderer","isExpanded","isEventSubProcess","getLabel","is","createLine","isTypedEvent","isThrowEvent","isCollection","getDi","getSemantic","getCirclePath","getRoundRectPath","getDiamondPath","getRectPath","getFillColor","getStrokeColor","query","domQuery","append","svgAppend","attr","svgAttr","create","svgCreate","classes","svgClasses","rotate","transform","translate","Ids","RENDERER_IDS","TASK_BORDER_RADIUS","INNER_OUTER_DIST","DEFAULT_FILL_OPACITY","HIGH_FILL_OPACITY","BpmnRenderer","config","eventBus","styles","pathMap","canvas","textRenderer","priority","call","defaultFillColor","defaultStrokeColor","rendererId","next","markers","computeStyle","addMarker","id","options","attrs","fill","strokeWidth","strokeLinecap","strokeDasharray","ref","x","y","scale","marker","element","viewBox","refX","refY","markerWidth","markerHeight","orient","defs","_svg","colorEscape","str","replace","type","stroke","createMarker","sequenceflowEnd","d","messageflowStart","cx","cy","r","messageflowEnd","associationStart","associationEnd","conditionalflowMarker","conditionaldefaultflowMarker","drawCircle","parentGfx","width","height","offset","fillOpacity","circle","Math","round","drawRect","rect","rx","ry","drawDiamond","x_2","y_2","points","pointsString","map","point","join","polygon","drawLine","waypoints","line","drawPath","path","drawMarker","as","handlers","renderer","renderEventContent","event","isThrowing","eventDefinitions","length","parallelMultiple","renderLabel","label","size","text","createText","add","renderEmbeddedLabel","align","semantic","name","box","padding","style","renderExternalLabel","fitBox","getExternalStyle","renderLaneLabel","textBox","top","createPathFromConnection","connection","pathData","i","isInterrupting","getScaledPath","xScaleFactor","yScaleFactor","containerWidth","containerHeight","position","mx","my","messagePath","linePathData","outer","attachTaskMarkers","task","pathDataBG","abspos","fillPathData","pathData2","pathData3","instantiate","headerPathData","businessHeaderPath","headerData","businessPath","expanded","innerAttrs","lane","expandedPool","text2","participantMultiplicity","$type","diamond","isMarkerVisible","eventGatewayType","drawEvent","parallelPath","innerCircle","strokeLinejoin","markerEnd","sequenceFlow","source","businessObject","conditionExpression","$instanceOf","markerStart","default","associationDirection","di","messageRef","midPoint","getPointAtLength","getTotalLength","markerPathData","messageAttrs","messageVisibleKind","elementObject","renderDataItemCollection","arrowPathData","getRawPath","DATA_STORE_PATH","elementStore","cancel","cancelActivity","outerAttrs","group","pointerEvents","textElement","textPathData","markerPath","markerRect","parallel","seq","markerMath","compensation","loop","strokeMiterlimit","adhoc","taskMarkers","obj","subprocess","indexOf","isForCompensation","loopCharacteristics","isSequential","undefined","yPosition","_drawPath","$inject","prototype","canRender","drawShape","h","drawConnection","getShapePath"],"sources":["D:/projects/Camunda/rpsboacamundajul2022/Camunda-Reactjs/node_modules/bpmn-js/lib/draw/BpmnRenderer.js"],"sourcesContent":["import inherits from 'inherits';\n\nimport {\n  isObject,\n  assign,\n  forEach\n} from 'min-dash';\n\nimport BaseRenderer from 'diagram-js/lib/draw/BaseRenderer';\n\nimport {\n  isExpanded,\n  isEventSubProcess\n} from '../util/DiUtil';\n\nimport {\n  getLabel\n} from '../features/label-editing/LabelUtil';\n\nimport { is } from '../util/ModelUtil';\n\nimport {\n  createLine\n} from 'diagram-js/lib/util/RenderUtil';\n\nimport {\n  isTypedEvent,\n  isThrowEvent,\n  isCollection,\n  getDi,\n  getSemantic,\n  getCirclePath,\n  getRoundRectPath,\n  getDiamondPath,\n  getRectPath,\n  getFillColor,\n  getStrokeColor\n} from './BpmnRenderUtil';\n\nimport {\n  query as domQuery\n} from 'min-dom';\n\nimport {\n  append as svgAppend,\n  attr as svgAttr,\n  create as svgCreate,\n  classes as svgClasses\n} from 'tiny-svg';\n\nimport {\n  rotate,\n  transform,\n  translate\n} from 'diagram-js/lib/util/SvgTransformUtil';\n\nimport Ids from 'ids';\n\nvar RENDERER_IDS = new Ids();\n\nvar TASK_BORDER_RADIUS = 10;\nvar INNER_OUTER_DIST = 3;\n\nvar DEFAULT_FILL_OPACITY = .95,\n    HIGH_FILL_OPACITY = .35;\n\n\nexport default function BpmnRenderer(\n    config, eventBus, styles, pathMap,\n    canvas, textRenderer, priority) {\n\n  BaseRenderer.call(this, eventBus, priority);\n\n  var defaultFillColor = config && config.defaultFillColor,\n      defaultStrokeColor = config && config.defaultStrokeColor;\n\n  var rendererId = RENDERER_IDS.next();\n\n  var markers = {};\n\n  var computeStyle = styles.computeStyle;\n\n  function addMarker(id, options) {\n    var attrs = assign({\n      fill: 'black',\n      strokeWidth: 1,\n      strokeLinecap: 'round',\n      strokeDasharray: 'none'\n    }, options.attrs);\n\n    var ref = options.ref || { x: 0, y: 0 };\n\n    var scale = options.scale || 1;\n\n    // fix for safari / chrome / firefox bug not correctly\n    // resetting stroke dash array\n    if (attrs.strokeDasharray === 'none') {\n      attrs.strokeDasharray = [10000, 1];\n    }\n\n    var marker = svgCreate('marker');\n\n    svgAttr(options.element, attrs);\n\n    svgAppend(marker, options.element);\n\n    svgAttr(marker, {\n      id: id,\n      viewBox: '0 0 20 20',\n      refX: ref.x,\n      refY: ref.y,\n      markerWidth: 20 * scale,\n      markerHeight: 20 * scale,\n      orient: 'auto'\n    });\n\n    var defs = domQuery('defs', canvas._svg);\n\n    if (!defs) {\n      defs = svgCreate('defs');\n\n      svgAppend(canvas._svg, defs);\n    }\n\n    svgAppend(defs, marker);\n\n    markers[id] = marker;\n  }\n\n  function colorEscape(str) {\n\n    // only allow characters and numbers\n    return str.replace(/[^0-9a-zA-z]+/g, '_');\n  }\n\n  function marker(type, fill, stroke) {\n    var id = type + '-' + colorEscape(fill) + '-' + colorEscape(stroke) + '-' + rendererId;\n\n    if (!markers[id]) {\n      createMarker(id, type, fill, stroke);\n    }\n\n    return 'url(#' + id + ')';\n  }\n\n  function createMarker(id, type, fill, stroke) {\n\n    if (type === 'sequenceflow-end') {\n      var sequenceflowEnd = svgCreate('path');\n      svgAttr(sequenceflowEnd, { d: 'M 1 5 L 11 10 L 1 15 Z' });\n\n      addMarker(id, {\n        element: sequenceflowEnd,\n        ref: { x: 11, y: 10 },\n        scale: 0.5,\n        attrs: {\n          fill: stroke,\n          stroke: stroke\n        }\n      });\n    }\n\n    if (type === 'messageflow-start') {\n      var messageflowStart = svgCreate('circle');\n      svgAttr(messageflowStart, { cx: 6, cy: 6, r: 3.5 });\n\n      addMarker(id, {\n        element: messageflowStart,\n        attrs: {\n          fill: fill,\n          stroke: stroke\n        },\n        ref: { x: 6, y: 6 }\n      });\n    }\n\n    if (type === 'messageflow-end') {\n      var messageflowEnd = svgCreate('path');\n      svgAttr(messageflowEnd, { d: 'm 1 5 l 0 -3 l 7 3 l -7 3 z' });\n\n      addMarker(id, {\n        element: messageflowEnd,\n        attrs: {\n          fill: fill,\n          stroke: stroke,\n          strokeLinecap: 'butt'\n        },\n        ref: { x: 8.5, y: 5 }\n      });\n    }\n\n    if (type === 'association-start') {\n      var associationStart = svgCreate('path');\n      svgAttr(associationStart, { d: 'M 11 5 L 1 10 L 11 15' });\n\n      addMarker(id, {\n        element: associationStart,\n        attrs: {\n          fill: 'none',\n          stroke: stroke,\n          strokeWidth: 1.5\n        },\n        ref: { x: 1, y: 10 },\n        scale: 0.5\n      });\n    }\n\n    if (type === 'association-end') {\n      var associationEnd = svgCreate('path');\n      svgAttr(associationEnd, { d: 'M 1 5 L 11 10 L 1 15' });\n\n      addMarker(id, {\n        element: associationEnd,\n        attrs: {\n          fill: 'none',\n          stroke: stroke,\n          strokeWidth: 1.5\n        },\n        ref: { x: 12, y: 10 },\n        scale: 0.5\n      });\n    }\n\n    if (type === 'conditional-flow-marker') {\n      var conditionalflowMarker = svgCreate('path');\n      svgAttr(conditionalflowMarker, { d: 'M 0 10 L 8 6 L 16 10 L 8 14 Z' });\n\n      addMarker(id, {\n        element: conditionalflowMarker,\n        attrs: {\n          fill: fill,\n          stroke: stroke\n        },\n        ref: { x: -1, y: 10 },\n        scale: 0.5\n      });\n    }\n\n    if (type === 'conditional-default-flow-marker') {\n      var conditionaldefaultflowMarker = svgCreate('path');\n      svgAttr(conditionaldefaultflowMarker, { d: 'M 6 4 L 10 16' });\n\n      addMarker(id, {\n        element: conditionaldefaultflowMarker,\n        attrs: {\n          stroke: stroke\n        },\n        ref: { x: 0, y: 10 },\n        scale: 0.5\n      });\n    }\n  }\n\n  function drawCircle(parentGfx, width, height, offset, attrs) {\n\n    if (isObject(offset)) {\n      attrs = offset;\n      offset = 0;\n    }\n\n    offset = offset || 0;\n\n    attrs = computeStyle(attrs, {\n      stroke: 'black',\n      strokeWidth: 2,\n      fill: 'white'\n    });\n\n    if (attrs.fill === 'none') {\n      delete attrs.fillOpacity;\n    }\n\n    var cx = width / 2,\n        cy = height / 2;\n\n    var circle = svgCreate('circle');\n    svgAttr(circle, {\n      cx: cx,\n      cy: cy,\n      r: Math.round((width + height) / 4 - offset)\n    });\n    svgAttr(circle, attrs);\n\n    svgAppend(parentGfx, circle);\n\n    return circle;\n  }\n\n  function drawRect(parentGfx, width, height, r, offset, attrs) {\n\n    if (isObject(offset)) {\n      attrs = offset;\n      offset = 0;\n    }\n\n    offset = offset || 0;\n\n    attrs = computeStyle(attrs, {\n      stroke: 'black',\n      strokeWidth: 2,\n      fill: 'white'\n    });\n\n    var rect = svgCreate('rect');\n    svgAttr(rect, {\n      x: offset,\n      y: offset,\n      width: width - offset * 2,\n      height: height - offset * 2,\n      rx: r,\n      ry: r\n    });\n    svgAttr(rect, attrs);\n\n    svgAppend(parentGfx, rect);\n\n    return rect;\n  }\n\n  function drawDiamond(parentGfx, width, height, attrs) {\n\n    var x_2 = width / 2;\n    var y_2 = height / 2;\n\n    var points = [{ x: x_2, y: 0 }, { x: width, y: y_2 }, { x: x_2, y: height }, { x: 0, y: y_2 }];\n\n    var pointsString = points.map(function(point) {\n      return point.x + ',' + point.y;\n    }).join(' ');\n\n    attrs = computeStyle(attrs, {\n      stroke: 'black',\n      strokeWidth: 2,\n      fill: 'white'\n    });\n\n    var polygon = svgCreate('polygon');\n    svgAttr(polygon, {\n      points: pointsString\n    });\n    svgAttr(polygon, attrs);\n\n    svgAppend(parentGfx, polygon);\n\n    return polygon;\n  }\n\n  function drawLine(parentGfx, waypoints, attrs) {\n    attrs = computeStyle(attrs, [ 'no-fill' ], {\n      stroke: 'black',\n      strokeWidth: 2,\n      fill: 'none'\n    });\n\n    var line = createLine(waypoints, attrs);\n\n    svgAppend(parentGfx, line);\n\n    return line;\n  }\n\n  function drawPath(parentGfx, d, attrs) {\n\n    attrs = computeStyle(attrs, [ 'no-fill' ], {\n      strokeWidth: 2,\n      stroke: 'black'\n    });\n\n    var path = svgCreate('path');\n    svgAttr(path, { d: d });\n    svgAttr(path, attrs);\n\n    svgAppend(parentGfx, path);\n\n    return path;\n  }\n\n  function drawMarker(type, parentGfx, path, attrs) {\n    return drawPath(parentGfx, path, assign({ 'data-marker': type }, attrs));\n  }\n\n  function as(type) {\n    return function(parentGfx, element) {\n      return handlers[type](parentGfx, element);\n    };\n  }\n\n  function renderer(type) {\n    return handlers[type];\n  }\n\n  function renderEventContent(element, parentGfx) {\n\n    var event = getSemantic(element);\n    var isThrowing = isThrowEvent(event);\n\n    if (event.eventDefinitions && event.eventDefinitions.length>1) {\n      if (event.parallelMultiple) {\n        return renderer('bpmn:ParallelMultipleEventDefinition')(parentGfx, element, isThrowing);\n      }\n      else {\n        return renderer('bpmn:MultipleEventDefinition')(parentGfx, element, isThrowing);\n      }\n    }\n\n    if (isTypedEvent(event, 'bpmn:MessageEventDefinition')) {\n      return renderer('bpmn:MessageEventDefinition')(parentGfx, element, isThrowing);\n    }\n\n    if (isTypedEvent(event, 'bpmn:TimerEventDefinition')) {\n      return renderer('bpmn:TimerEventDefinition')(parentGfx, element, isThrowing);\n    }\n\n    if (isTypedEvent(event, 'bpmn:ConditionalEventDefinition')) {\n      return renderer('bpmn:ConditionalEventDefinition')(parentGfx, element);\n    }\n\n    if (isTypedEvent(event, 'bpmn:SignalEventDefinition')) {\n      return renderer('bpmn:SignalEventDefinition')(parentGfx, element, isThrowing);\n    }\n\n    if (isTypedEvent(event, 'bpmn:EscalationEventDefinition')) {\n      return renderer('bpmn:EscalationEventDefinition')(parentGfx, element, isThrowing);\n    }\n\n    if (isTypedEvent(event, 'bpmn:LinkEventDefinition')) {\n      return renderer('bpmn:LinkEventDefinition')(parentGfx, element, isThrowing);\n    }\n\n    if (isTypedEvent(event, 'bpmn:ErrorEventDefinition')) {\n      return renderer('bpmn:ErrorEventDefinition')(parentGfx, element, isThrowing);\n    }\n\n    if (isTypedEvent(event, 'bpmn:CancelEventDefinition')) {\n      return renderer('bpmn:CancelEventDefinition')(parentGfx, element, isThrowing);\n    }\n\n    if (isTypedEvent(event, 'bpmn:CompensateEventDefinition')) {\n      return renderer('bpmn:CompensateEventDefinition')(parentGfx, element, isThrowing);\n    }\n\n    if (isTypedEvent(event, 'bpmn:TerminateEventDefinition')) {\n      return renderer('bpmn:TerminateEventDefinition')(parentGfx, element, isThrowing);\n    }\n\n    return null;\n  }\n\n  function renderLabel(parentGfx, label, options) {\n\n    options = assign({\n      size: {\n        width: 100\n      }\n    }, options);\n\n    var text = textRenderer.createText(label || '', options);\n\n    svgClasses(text).add('djs-label');\n\n    svgAppend(parentGfx, text);\n\n    return text;\n  }\n\n  function renderEmbeddedLabel(parentGfx, element, align) {\n    var semantic = getSemantic(element);\n\n    return renderLabel(parentGfx, semantic.name, {\n      box: element,\n      align: align,\n      padding: 5,\n      style: {\n        fill: getStrokeColor(element, defaultStrokeColor)\n      }\n    });\n  }\n\n  function renderExternalLabel(parentGfx, element) {\n\n    var box = {\n      width: 90,\n      height: 30,\n      x: element.width / 2 + element.x,\n      y: element.height / 2 + element.y\n    };\n\n    return renderLabel(parentGfx, getLabel(element), {\n      box: box,\n      fitBox: true,\n      style: assign(\n        {},\n        textRenderer.getExternalStyle(),\n        {\n          fill: getStrokeColor(element, defaultStrokeColor)\n        }\n      )\n    });\n  }\n\n  function renderLaneLabel(parentGfx, text, element) {\n    var textBox = renderLabel(parentGfx, text, {\n      box: {\n        height: 30,\n        width: element.height\n      },\n      align: 'center-middle',\n      style: {\n        fill: getStrokeColor(element, defaultStrokeColor)\n      }\n    });\n\n    var top = -1 * element.height;\n\n    transform(textBox, 0, -top, 270);\n  }\n\n  function createPathFromConnection(connection) {\n    var waypoints = connection.waypoints;\n\n    var pathData = 'm  ' + waypoints[0].x + ',' + waypoints[0].y;\n    for (var i = 1; i < waypoints.length; i++) {\n      pathData += 'L' + waypoints[i].x + ',' + waypoints[i].y + ' ';\n    }\n    return pathData;\n  }\n\n  var handlers = this.handlers = {\n    'bpmn:Event': function(parentGfx, element, attrs) {\n\n      if (!('fillOpacity' in attrs)) {\n        attrs.fillOpacity = DEFAULT_FILL_OPACITY;\n      }\n\n      return drawCircle(parentGfx, element.width, element.height, attrs);\n    },\n    'bpmn:StartEvent': function(parentGfx, element) {\n      var attrs = {\n        fill: getFillColor(element, defaultFillColor),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      };\n\n      var semantic = getSemantic(element);\n\n      if (!semantic.isInterrupting) {\n        attrs = {\n          strokeDasharray: '6',\n          strokeLinecap: 'round',\n          fill: getFillColor(element, defaultFillColor),\n          stroke: getStrokeColor(element, defaultStrokeColor)\n        };\n      }\n\n      var circle = renderer('bpmn:Event')(parentGfx, element, attrs);\n\n      renderEventContent(element, parentGfx);\n\n      return circle;\n    },\n    'bpmn:MessageEventDefinition': function(parentGfx, element, isThrowing) {\n      var pathData = pathMap.getScaledPath('EVENT_MESSAGE', {\n        xScaleFactor: 0.9,\n        yScaleFactor: 0.9,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0.235,\n          my: 0.315\n        }\n      });\n\n      var fill = isThrowing ? getStrokeColor(element, defaultStrokeColor) : getFillColor(element, defaultFillColor);\n      var stroke = isThrowing ? getFillColor(element, defaultFillColor) : getStrokeColor(element, defaultStrokeColor);\n\n      var messagePath = drawPath(parentGfx, pathData, {\n        strokeWidth: 1,\n        fill: fill,\n        stroke: stroke\n      });\n\n      return messagePath;\n    },\n    'bpmn:TimerEventDefinition': function(parentGfx, element) {\n      var circle = drawCircle(parentGfx, element.width, element.height, 0.2 * element.height, {\n        strokeWidth: 2,\n        fill: getFillColor(element, defaultFillColor),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n\n      var pathData = pathMap.getScaledPath('EVENT_TIMER_WH', {\n        xScaleFactor: 0.75,\n        yScaleFactor: 0.75,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0.5,\n          my: 0.5\n        }\n      });\n\n      drawPath(parentGfx, pathData, {\n        strokeWidth: 2,\n        strokeLinecap: 'square',\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n\n      for (var i = 0;i < 12; i++) {\n\n        var linePathData = pathMap.getScaledPath('EVENT_TIMER_LINE', {\n          xScaleFactor: 0.75,\n          yScaleFactor: 0.75,\n          containerWidth: element.width,\n          containerHeight: element.height,\n          position: {\n            mx: 0.5,\n            my: 0.5\n          }\n        });\n\n        var width = element.width / 2;\n        var height = element.height / 2;\n\n        drawPath(parentGfx, linePathData, {\n          strokeWidth: 1,\n          strokeLinecap: 'square',\n          transform: 'rotate(' + (i * 30) + ',' + height + ',' + width + ')',\n          stroke: getStrokeColor(element, defaultStrokeColor)\n        });\n      }\n\n      return circle;\n    },\n    'bpmn:EscalationEventDefinition': function(parentGfx, event, isThrowing) {\n      var pathData = pathMap.getScaledPath('EVENT_ESCALATION', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.5,\n          my: 0.2\n        }\n      });\n\n      var fill = isThrowing ? getStrokeColor(event, defaultStrokeColor) : 'none';\n\n      return drawPath(parentGfx, pathData, {\n        strokeWidth: 1,\n        fill: fill,\n        stroke: getStrokeColor(event, defaultStrokeColor)\n      });\n    },\n    'bpmn:ConditionalEventDefinition': function(parentGfx, event) {\n      var pathData = pathMap.getScaledPath('EVENT_CONDITIONAL', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.5,\n          my: 0.222\n        }\n      });\n\n      return drawPath(parentGfx, pathData, {\n        strokeWidth: 1,\n        stroke: getStrokeColor(event, defaultStrokeColor)\n      });\n    },\n    'bpmn:LinkEventDefinition': function(parentGfx, event, isThrowing) {\n      var pathData = pathMap.getScaledPath('EVENT_LINK', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.57,\n          my: 0.263\n        }\n      });\n\n      var fill = isThrowing ? getStrokeColor(event, defaultStrokeColor) : 'none';\n\n      return drawPath(parentGfx, pathData, {\n        strokeWidth: 1,\n        fill: fill,\n        stroke: getStrokeColor(event, defaultStrokeColor)\n      });\n    },\n    'bpmn:ErrorEventDefinition': function(parentGfx, event, isThrowing) {\n      var pathData = pathMap.getScaledPath('EVENT_ERROR', {\n        xScaleFactor: 1.1,\n        yScaleFactor: 1.1,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.2,\n          my: 0.722\n        }\n      });\n\n      var fill = isThrowing ? getStrokeColor(event, defaultStrokeColor) : 'none';\n\n      return drawPath(parentGfx, pathData, {\n        strokeWidth: 1,\n        fill: fill,\n        stroke: getStrokeColor(event, defaultStrokeColor)\n      });\n    },\n    'bpmn:CancelEventDefinition': function(parentGfx, event, isThrowing) {\n      var pathData = pathMap.getScaledPath('EVENT_CANCEL_45', {\n        xScaleFactor: 1.0,\n        yScaleFactor: 1.0,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.638,\n          my: -0.055\n        }\n      });\n\n      var fill = isThrowing ? getStrokeColor(event, defaultStrokeColor) : 'none';\n\n      var path = drawPath(parentGfx, pathData, {\n        strokeWidth: 1,\n        fill: fill,\n        stroke: getStrokeColor(event, defaultStrokeColor)\n      });\n\n      rotate(path, 45);\n\n      return path;\n    },\n    'bpmn:CompensateEventDefinition': function(parentGfx, event, isThrowing) {\n      var pathData = pathMap.getScaledPath('EVENT_COMPENSATION', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.22,\n          my: 0.5\n        }\n      });\n\n      var fill = isThrowing ? getStrokeColor(event, defaultStrokeColor) : 'none';\n\n      return drawPath(parentGfx, pathData, {\n        strokeWidth: 1,\n        fill: fill,\n        stroke: getStrokeColor(event, defaultStrokeColor)\n      });\n    },\n    'bpmn:SignalEventDefinition': function(parentGfx, event, isThrowing) {\n      var pathData = pathMap.getScaledPath('EVENT_SIGNAL', {\n        xScaleFactor: 0.9,\n        yScaleFactor: 0.9,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.5,\n          my: 0.2\n        }\n      });\n\n      var fill = isThrowing ? getStrokeColor(event, defaultStrokeColor) : 'none';\n\n      return drawPath(parentGfx, pathData, {\n        strokeWidth: 1,\n        fill: fill,\n        stroke: getStrokeColor(event, defaultStrokeColor)\n      });\n    },\n    'bpmn:MultipleEventDefinition': function(parentGfx, event, isThrowing) {\n      var pathData = pathMap.getScaledPath('EVENT_MULTIPLE', {\n        xScaleFactor: 1.1,\n        yScaleFactor: 1.1,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.222,\n          my: 0.36\n        }\n      });\n\n      var fill = isThrowing ? getStrokeColor(event, defaultStrokeColor) : 'none';\n\n      return drawPath(parentGfx, pathData, {\n        strokeWidth: 1,\n        fill: fill\n      });\n    },\n    'bpmn:ParallelMultipleEventDefinition': function(parentGfx, event) {\n      var pathData = pathMap.getScaledPath('EVENT_PARALLEL_MULTIPLE', {\n        xScaleFactor: 1.2,\n        yScaleFactor: 1.2,\n        containerWidth: event.width,\n        containerHeight: event.height,\n        position: {\n          mx: 0.458,\n          my: 0.194\n        }\n      });\n\n      return drawPath(parentGfx, pathData, {\n        strokeWidth: 1,\n        fill: getStrokeColor(event, defaultStrokeColor),\n        stroke: getStrokeColor(event, defaultStrokeColor)\n      });\n    },\n    'bpmn:EndEvent': function(parentGfx, element) {\n      var circle = renderer('bpmn:Event')(parentGfx, element, {\n        strokeWidth: 4,\n        fill: getFillColor(element, defaultFillColor),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n\n      renderEventContent(element, parentGfx, true);\n\n      return circle;\n    },\n    'bpmn:TerminateEventDefinition': function(parentGfx, element) {\n      var circle = drawCircle(parentGfx, element.width, element.height, 8, {\n        strokeWidth: 4,\n        fill: getStrokeColor(element, defaultStrokeColor),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n\n      return circle;\n    },\n    'bpmn:IntermediateEvent': function(parentGfx, element) {\n      var outer = renderer('bpmn:Event')(parentGfx, element, {\n        strokeWidth: 1,\n        fill: getFillColor(element, defaultFillColor),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n\n      /* inner */\n      drawCircle(parentGfx, element.width, element.height, INNER_OUTER_DIST, {\n        strokeWidth: 1,\n        fill: getFillColor(element, 'none'),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n\n      renderEventContent(element, parentGfx);\n\n      return outer;\n    },\n    'bpmn:IntermediateCatchEvent': as('bpmn:IntermediateEvent'),\n    'bpmn:IntermediateThrowEvent': as('bpmn:IntermediateEvent'),\n\n    'bpmn:Activity': function(parentGfx, element, attrs) {\n\n      attrs = attrs || {};\n\n      if (!('fillOpacity' in attrs)) {\n        attrs.fillOpacity = DEFAULT_FILL_OPACITY;\n      }\n\n      return drawRect(parentGfx, element.width, element.height, TASK_BORDER_RADIUS, attrs);\n    },\n\n    'bpmn:Task': function(parentGfx, element) {\n      var attrs = {\n        fill: getFillColor(element, defaultFillColor),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      };\n\n      var rect = renderer('bpmn:Activity')(parentGfx, element, attrs);\n\n      renderEmbeddedLabel(parentGfx, element, 'center-middle');\n      attachTaskMarkers(parentGfx, element);\n\n      return rect;\n    },\n    'bpmn:ServiceTask': function(parentGfx, element) {\n      var task = renderer('bpmn:Task')(parentGfx, element);\n\n      var pathDataBG = pathMap.getScaledPath('TASK_TYPE_SERVICE', {\n        abspos: {\n          x: 12,\n          y: 18\n        }\n      });\n\n      /* service bg */ drawPath(parentGfx, pathDataBG, {\n        strokeWidth: 1,\n        fill: getFillColor(element, defaultFillColor),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n\n      var fillPathData = pathMap.getScaledPath('TASK_TYPE_SERVICE_FILL', {\n        abspos: {\n          x: 17.2,\n          y: 18\n        }\n      });\n\n      /* service fill */ drawPath(parentGfx, fillPathData, {\n        strokeWidth: 0,\n        fill: getFillColor(element, defaultFillColor)\n      });\n\n      var pathData = pathMap.getScaledPath('TASK_TYPE_SERVICE', {\n        abspos: {\n          x: 17,\n          y: 22\n        }\n      });\n\n      /* service */ drawPath(parentGfx, pathData, {\n        strokeWidth: 1,\n        fill: getFillColor(element, defaultFillColor),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n\n      return task;\n    },\n    'bpmn:UserTask': function(parentGfx, element) {\n      var task = renderer('bpmn:Task')(parentGfx, element);\n\n      var x = 15;\n      var y = 12;\n\n      var pathData = pathMap.getScaledPath('TASK_TYPE_USER_1', {\n        abspos: {\n          x: x,\n          y: y\n        }\n      });\n\n      /* user path */ drawPath(parentGfx, pathData, {\n        strokeWidth: 0.5,\n        fill: getFillColor(element, defaultFillColor),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n\n      var pathData2 = pathMap.getScaledPath('TASK_TYPE_USER_2', {\n        abspos: {\n          x: x,\n          y: y\n        }\n      });\n\n      /* user2 path */ drawPath(parentGfx, pathData2, {\n        strokeWidth: 0.5,\n        fill: getFillColor(element, defaultFillColor),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n\n      var pathData3 = pathMap.getScaledPath('TASK_TYPE_USER_3', {\n        abspos: {\n          x: x,\n          y: y\n        }\n      });\n\n      /* user3 path */ drawPath(parentGfx, pathData3, {\n        strokeWidth: 0.5,\n        fill: getStrokeColor(element, defaultStrokeColor),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n\n      return task;\n    },\n    'bpmn:ManualTask': function(parentGfx, element) {\n      var task = renderer('bpmn:Task')(parentGfx, element);\n\n      var pathData = pathMap.getScaledPath('TASK_TYPE_MANUAL', {\n        abspos: {\n          x: 17,\n          y: 15\n        }\n      });\n\n      /* manual path */ drawPath(parentGfx, pathData, {\n        strokeWidth: 0.5, // 0.25,\n        fill: getFillColor(element, defaultFillColor),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n\n      return task;\n    },\n    'bpmn:SendTask': function(parentGfx, element) {\n      var task = renderer('bpmn:Task')(parentGfx, element);\n\n      var pathData = pathMap.getScaledPath('TASK_TYPE_SEND', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: 21,\n        containerHeight: 14,\n        position: {\n          mx: 0.285,\n          my: 0.357\n        }\n      });\n\n      /* send path */ drawPath(parentGfx, pathData, {\n        strokeWidth: 1,\n        fill: getStrokeColor(element, defaultStrokeColor),\n        stroke: getFillColor(element, defaultFillColor)\n      });\n\n      return task;\n    },\n    'bpmn:ReceiveTask' : function(parentGfx, element) {\n      var semantic = getSemantic(element);\n\n      var task = renderer('bpmn:Task')(parentGfx, element);\n      var pathData;\n\n      if (semantic.instantiate) {\n        drawCircle(parentGfx, 28, 28, 20 * 0.22, { strokeWidth: 1 });\n\n        pathData = pathMap.getScaledPath('TASK_TYPE_INSTANTIATING_SEND', {\n          abspos: {\n            x: 7.77,\n            y: 9.52\n          }\n        });\n      } else {\n\n        pathData = pathMap.getScaledPath('TASK_TYPE_SEND', {\n          xScaleFactor: 0.9,\n          yScaleFactor: 0.9,\n          containerWidth: 21,\n          containerHeight: 14,\n          position: {\n            mx: 0.3,\n            my: 0.4\n          }\n        });\n      }\n\n      /* receive path */ drawPath(parentGfx, pathData, {\n        strokeWidth: 1,\n        fill: getFillColor(element, defaultFillColor),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n\n      return task;\n    },\n    'bpmn:ScriptTask': function(parentGfx, element) {\n      var task = renderer('bpmn:Task')(parentGfx, element);\n\n      var pathData = pathMap.getScaledPath('TASK_TYPE_SCRIPT', {\n        abspos: {\n          x: 15,\n          y: 20\n        }\n      });\n\n      /* script path */ drawPath(parentGfx, pathData, {\n        strokeWidth: 1,\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n\n      return task;\n    },\n    'bpmn:BusinessRuleTask': function(parentGfx, element) {\n      var task = renderer('bpmn:Task')(parentGfx, element);\n\n      var headerPathData = pathMap.getScaledPath('TASK_TYPE_BUSINESS_RULE_HEADER', {\n        abspos: {\n          x: 8,\n          y: 8\n        }\n      });\n\n      var businessHeaderPath = drawPath(parentGfx, headerPathData);\n      svgAttr(businessHeaderPath, {\n        strokeWidth: 1,\n        fill: getFillColor(element, '#aaaaaa'),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n\n      var headerData = pathMap.getScaledPath('TASK_TYPE_BUSINESS_RULE_MAIN', {\n        abspos: {\n          x: 8,\n          y: 8\n        }\n      });\n\n      var businessPath = drawPath(parentGfx, headerData);\n      svgAttr(businessPath, {\n        strokeWidth: 1,\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n\n      return task;\n    },\n    'bpmn:SubProcess': function(parentGfx, element, attrs) {\n      attrs = assign({\n        fill: getFillColor(element, defaultFillColor),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      }, attrs);\n\n      var rect = renderer('bpmn:Activity')(parentGfx, element, attrs);\n\n      var expanded = isExpanded(element);\n\n      if (isEventSubProcess(element)) {\n        svgAttr(rect, {\n          strokeDasharray: '1,2'\n        });\n      }\n\n      renderEmbeddedLabel(parentGfx, element, expanded ? 'center-top' : 'center-middle');\n\n      if (expanded) {\n        attachTaskMarkers(parentGfx, element);\n      } else {\n        attachTaskMarkers(parentGfx, element, ['SubProcessMarker']);\n      }\n\n      return rect;\n    },\n    'bpmn:AdHocSubProcess': function(parentGfx, element) {\n      return renderer('bpmn:SubProcess')(parentGfx, element);\n    },\n    'bpmn:Transaction': function(parentGfx, element) {\n      var outer = renderer('bpmn:SubProcess')(parentGfx, element);\n\n      var innerAttrs = styles.style([ 'no-fill', 'no-events' ], {\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n\n      /* inner path */ drawRect(parentGfx, element.width, element.height, TASK_BORDER_RADIUS - 2, INNER_OUTER_DIST, innerAttrs);\n\n      return outer;\n    },\n    'bpmn:CallActivity': function(parentGfx, element) {\n      return renderer('bpmn:SubProcess')(parentGfx, element, {\n        strokeWidth: 5\n      });\n    },\n    'bpmn:Participant': function(parentGfx, element) {\n\n      var attrs = {\n        fillOpacity: DEFAULT_FILL_OPACITY,\n        fill: getFillColor(element, defaultFillColor),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      };\n\n      var lane = renderer('bpmn:Lane')(parentGfx, element, attrs);\n\n      var expandedPool = isExpanded(element);\n\n      if (expandedPool) {\n        drawLine(parentGfx, [\n          { x: 30, y: 0 },\n          { x: 30, y: element.height }\n        ], {\n          stroke: getStrokeColor(element, defaultStrokeColor)\n        });\n        var text = getSemantic(element).name;\n        renderLaneLabel(parentGfx, text, element);\n      } else {\n\n        // Collapsed pool draw text inline\n        var text2 = getSemantic(element).name;\n        renderLabel(parentGfx, text2, {\n          box: element, align: 'center-middle',\n          style: {\n            fill: getStrokeColor(element, defaultStrokeColor)\n          }\n        });\n      }\n\n      var participantMultiplicity = !!(getSemantic(element).participantMultiplicity);\n\n      if (participantMultiplicity) {\n        renderer('ParticipantMultiplicityMarker')(parentGfx, element);\n      }\n\n      return lane;\n    },\n    'bpmn:Lane': function(parentGfx, element, attrs) {\n      var rect = drawRect(parentGfx, element.width, element.height, 0, assign({\n        fill: getFillColor(element, defaultFillColor),\n        fillOpacity: HIGH_FILL_OPACITY,\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      }, attrs));\n\n      var semantic = getSemantic(element);\n\n      if (semantic.$type === 'bpmn:Lane') {\n        var text = semantic.name;\n        renderLaneLabel(parentGfx, text, element);\n      }\n\n      return rect;\n    },\n    'bpmn:InclusiveGateway': function(parentGfx, element) {\n      var diamond = renderer('bpmn:Gateway')(parentGfx, element);\n\n      /* circle path */\n      drawCircle(parentGfx, element.width, element.height, element.height * 0.24, {\n        strokeWidth: 2.5,\n        fill: getFillColor(element, defaultFillColor),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n\n      return diamond;\n    },\n    'bpmn:ExclusiveGateway': function(parentGfx, element) {\n      var diamond = renderer('bpmn:Gateway')(parentGfx, element);\n\n      var pathData = pathMap.getScaledPath('GATEWAY_EXCLUSIVE', {\n        xScaleFactor: 0.4,\n        yScaleFactor: 0.4,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0.32,\n          my: 0.3\n        }\n      });\n\n      if ((getDi(element).isMarkerVisible)) {\n        drawPath(parentGfx, pathData, {\n          strokeWidth: 1,\n          fill: getStrokeColor(element, defaultStrokeColor),\n          stroke: getStrokeColor(element, defaultStrokeColor)\n        });\n      }\n\n      return diamond;\n    },\n    'bpmn:ComplexGateway': function(parentGfx, element) {\n      var diamond = renderer('bpmn:Gateway')(parentGfx, element);\n\n      var pathData = pathMap.getScaledPath('GATEWAY_COMPLEX', {\n        xScaleFactor: 0.5,\n        yScaleFactor:0.5,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0.46,\n          my: 0.26\n        }\n      });\n\n      /* complex path */ drawPath(parentGfx, pathData, {\n        strokeWidth: 1,\n        fill: getStrokeColor(element, defaultStrokeColor),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n\n      return diamond;\n    },\n    'bpmn:ParallelGateway': function(parentGfx, element) {\n      var diamond = renderer('bpmn:Gateway')(parentGfx, element);\n\n      var pathData = pathMap.getScaledPath('GATEWAY_PARALLEL', {\n        xScaleFactor: 0.6,\n        yScaleFactor:0.6,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0.46,\n          my: 0.2\n        }\n      });\n\n      /* parallel path */ drawPath(parentGfx, pathData, {\n        strokeWidth: 1,\n        fill: getStrokeColor(element, defaultStrokeColor),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n\n      return diamond;\n    },\n    'bpmn:EventBasedGateway': function(parentGfx, element) {\n\n      var semantic = getSemantic(element);\n\n      var diamond = renderer('bpmn:Gateway')(parentGfx, element);\n\n      /* outer circle path */ drawCircle(parentGfx, element.width, element.height, element.height * 0.20, {\n        strokeWidth: 1,\n        fill: 'none',\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n\n      var type = semantic.eventGatewayType;\n      var instantiate = !!semantic.instantiate;\n\n      function drawEvent() {\n\n        var pathData = pathMap.getScaledPath('GATEWAY_EVENT_BASED', {\n          xScaleFactor: 0.18,\n          yScaleFactor: 0.18,\n          containerWidth: element.width,\n          containerHeight: element.height,\n          position: {\n            mx: 0.36,\n            my: 0.44\n          }\n        });\n\n        var attrs = {\n          strokeWidth: 2,\n          fill: getFillColor(element, 'none'),\n          stroke: getStrokeColor(element, defaultStrokeColor)\n        };\n\n        /* event path */ drawPath(parentGfx, pathData, attrs);\n      }\n\n      if (type === 'Parallel') {\n\n        var pathData = pathMap.getScaledPath('GATEWAY_PARALLEL', {\n          xScaleFactor: 0.4,\n          yScaleFactor:0.4,\n          containerWidth: element.width,\n          containerHeight: element.height,\n          position: {\n            mx: 0.474,\n            my: 0.296\n          }\n        });\n\n        var parallelPath = drawPath(parentGfx, pathData);\n        svgAttr(parallelPath, {\n          strokeWidth: 1,\n          fill: 'none'\n        });\n      } else if (type === 'Exclusive') {\n\n        if (!instantiate) {\n          var innerCircle = drawCircle(parentGfx, element.width, element.height, element.height * 0.26);\n          svgAttr(innerCircle, {\n            strokeWidth: 1,\n            fill: 'none',\n            stroke: getStrokeColor(element, defaultStrokeColor)\n          });\n        }\n\n        drawEvent();\n      }\n\n\n      return diamond;\n    },\n    'bpmn:Gateway': function(parentGfx, element) {\n      var attrs = {\n        fill: getFillColor(element, defaultFillColor),\n        fillOpacity: DEFAULT_FILL_OPACITY,\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      };\n\n      return drawDiamond(parentGfx, element.width, element.height, attrs);\n    },\n    'bpmn:SequenceFlow': function(parentGfx, element) {\n      var pathData = createPathFromConnection(element);\n\n      var fill = getFillColor(element, defaultFillColor),\n          stroke = getStrokeColor(element, defaultStrokeColor);\n\n      var attrs = {\n        strokeLinejoin: 'round',\n        markerEnd: marker('sequenceflow-end', fill, stroke),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      };\n\n      var path = drawPath(parentGfx, pathData, attrs);\n\n      var sequenceFlow = getSemantic(element);\n\n      var source;\n\n      if (element.source) {\n        source = element.source.businessObject;\n\n        // conditional flow marker\n        if (sequenceFlow.conditionExpression && source.$instanceOf('bpmn:Activity')) {\n          svgAttr(path, {\n            markerStart: marker('conditional-flow-marker', fill, stroke)\n          });\n        }\n\n        // default marker\n        if (source.default && (source.$instanceOf('bpmn:Gateway') || source.$instanceOf('bpmn:Activity')) &&\n            source.default === sequenceFlow) {\n          svgAttr(path, {\n            markerStart: marker('conditional-default-flow-marker', fill, stroke)\n          });\n        }\n      }\n\n      return path;\n    },\n    'bpmn:Association': function(parentGfx, element, attrs) {\n\n      var semantic = getSemantic(element);\n\n      var fill = getFillColor(element, defaultFillColor),\n          stroke = getStrokeColor(element, defaultStrokeColor);\n\n      attrs = assign({\n        strokeDasharray: '0.5, 5',\n        strokeLinecap: 'round',\n        strokeLinejoin: 'round',\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      }, attrs || {});\n\n      if (semantic.associationDirection === 'One' ||\n          semantic.associationDirection === 'Both') {\n        attrs.markerEnd = marker('association-end', fill, stroke);\n      }\n\n      if (semantic.associationDirection === 'Both') {\n        attrs.markerStart = marker('association-start', fill, stroke);\n      }\n\n      return drawLine(parentGfx, element.waypoints, attrs);\n    },\n    'bpmn:DataInputAssociation': function(parentGfx, element) {\n      var fill = getFillColor(element, defaultFillColor),\n          stroke = getStrokeColor(element, defaultStrokeColor);\n\n      return renderer('bpmn:Association')(parentGfx, element, {\n        markerEnd: marker('association-end', fill, stroke)\n      });\n    },\n    'bpmn:DataOutputAssociation': function(parentGfx, element) {\n      var fill = getFillColor(element, defaultFillColor),\n          stroke = getStrokeColor(element, defaultStrokeColor);\n\n      return renderer('bpmn:Association')(parentGfx, element, {\n        markerEnd: marker('association-end', fill, stroke)\n      });\n    },\n    'bpmn:MessageFlow': function(parentGfx, element) {\n\n      var semantic = getSemantic(element),\n          di = getDi(element);\n\n      var fill = getFillColor(element, defaultFillColor),\n          stroke = getStrokeColor(element, defaultStrokeColor);\n\n      var pathData = createPathFromConnection(element);\n\n      var attrs = {\n        markerEnd: marker('messageflow-end', fill, stroke),\n        markerStart: marker('messageflow-start', fill, stroke),\n        strokeDasharray: '10, 12',\n        strokeLinecap: 'round',\n        strokeLinejoin: 'round',\n        strokeWidth: '1.5px',\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      };\n\n      var path = drawPath(parentGfx, pathData, attrs);\n\n      if (semantic.messageRef) {\n        var midPoint = path.getPointAtLength(path.getTotalLength() / 2);\n\n        var markerPathData = pathMap.getScaledPath('MESSAGE_FLOW_MARKER', {\n          abspos: {\n            x: midPoint.x,\n            y: midPoint.y\n          }\n        });\n\n        var messageAttrs = { strokeWidth: 1 };\n\n        if (di.messageVisibleKind === 'initiating') {\n          messageAttrs.fill = 'white';\n          messageAttrs.stroke = 'black';\n        } else {\n          messageAttrs.fill = '#888';\n          messageAttrs.stroke = 'white';\n        }\n\n        drawPath(parentGfx, markerPathData, messageAttrs);\n      }\n\n      return path;\n    },\n    'bpmn:DataObject': function(parentGfx, element) {\n      var pathData = pathMap.getScaledPath('DATA_OBJECT_PATH', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0.474,\n          my: 0.296\n        }\n      });\n\n      var elementObject = drawPath(parentGfx, pathData, {\n        fill: getFillColor(element, defaultFillColor),\n        fillOpacity: DEFAULT_FILL_OPACITY,\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n\n      var semantic = getSemantic(element);\n\n      if (isCollection(semantic)) {\n        renderDataItemCollection(parentGfx, element);\n      }\n\n      return elementObject;\n    },\n    'bpmn:DataObjectReference': as('bpmn:DataObject'),\n    'bpmn:DataInput': function(parentGfx, element) {\n\n      var arrowPathData = pathMap.getRawPath('DATA_ARROW');\n\n      // page\n      var elementObject = renderer('bpmn:DataObject')(parentGfx, element);\n\n      /* input arrow path */ drawPath(parentGfx, arrowPathData, { strokeWidth: 1 });\n\n      return elementObject;\n    },\n    'bpmn:DataOutput': function(parentGfx, element) {\n      var arrowPathData = pathMap.getRawPath('DATA_ARROW');\n\n      // page\n      var elementObject = renderer('bpmn:DataObject')(parentGfx, element);\n\n      /* output arrow path */ drawPath(parentGfx, arrowPathData, {\n        strokeWidth: 1,\n        fill: 'black'\n      });\n\n      return elementObject;\n    },\n    'bpmn:DataStoreReference': function(parentGfx, element) {\n      var DATA_STORE_PATH = pathMap.getScaledPath('DATA_STORE', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0,\n          my: 0.133\n        }\n      });\n\n      var elementStore = drawPath(parentGfx, DATA_STORE_PATH, {\n        strokeWidth: 2,\n        fill: getFillColor(element, defaultFillColor),\n        fillOpacity: DEFAULT_FILL_OPACITY,\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n\n      return elementStore;\n    },\n    'bpmn:BoundaryEvent': function(parentGfx, element) {\n\n      var semantic = getSemantic(element),\n          cancel = semantic.cancelActivity;\n\n      var attrs = {\n        strokeWidth: 1,\n        fill: getFillColor(element, defaultFillColor),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      };\n\n      if (!cancel) {\n        attrs.strokeDasharray = '6';\n        attrs.strokeLinecap = 'round';\n      }\n\n      // apply fillOpacity\n      var outerAttrs = assign({}, attrs, {\n        fillOpacity: 1\n      });\n\n      // apply no-fill\n      var innerAttrs = assign({}, attrs, {\n        fill: 'none'\n      });\n\n      var outer = renderer('bpmn:Event')(parentGfx, element, outerAttrs);\n\n      /* inner path */ drawCircle(parentGfx, element.width, element.height, INNER_OUTER_DIST, innerAttrs);\n\n      renderEventContent(element, parentGfx);\n\n      return outer;\n    },\n    'bpmn:Group': function(parentGfx, element) {\n\n      var group = drawRect(parentGfx, element.width, element.height, TASK_BORDER_RADIUS, {\n        stroke: getStrokeColor(element, defaultStrokeColor),\n        strokeWidth: 1,\n        strokeDasharray: '8,3,1,3',\n        fill: 'none',\n        pointerEvents: 'none'\n      });\n\n      return group;\n    },\n    'label': function(parentGfx, element) {\n      return renderExternalLabel(parentGfx, element);\n    },\n    'bpmn:TextAnnotation': function(parentGfx, element) {\n      var style = {\n        'fill': 'none',\n        'stroke': 'none'\n      };\n\n      var textElement = drawRect(parentGfx, element.width, element.height, 0, 0, style);\n\n      var textPathData = pathMap.getScaledPath('TEXT_ANNOTATION', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: 0.0,\n          my: 0.0\n        }\n      });\n\n      drawPath(parentGfx, textPathData, {\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n\n      var text = getSemantic(element).text || '';\n      renderLabel(parentGfx, text, {\n        box: element,\n        align: 'left-top',\n        padding: 5,\n        style: {\n          fill: getStrokeColor(element, defaultStrokeColor)\n        }\n      });\n\n      return textElement;\n    },\n    'ParticipantMultiplicityMarker': function(parentGfx, element) {\n      var markerPath = pathMap.getScaledPath('MARKER_PARALLEL', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: ((element.width / 2) / element.width),\n          my: (element.height - 15) / element.height\n        }\n      });\n\n      drawMarker('participant-multiplicity', parentGfx, markerPath, {\n        strokeWidth: 2,\n        fill: getFillColor(element, defaultFillColor),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n    },\n    'SubProcessMarker': function(parentGfx, element) {\n      var markerRect = drawRect(parentGfx, 14, 14, 0, {\n        strokeWidth: 1,\n        fill: getFillColor(element, defaultFillColor),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n\n      // Process marker is placed in the middle of the box\n      // therefore fixed values can be used here\n      translate(markerRect, element.width / 2 - 7.5, element.height - 20);\n\n      var markerPath = pathMap.getScaledPath('MARKER_SUB_PROCESS', {\n        xScaleFactor: 1.5,\n        yScaleFactor: 1.5,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: (element.width / 2 - 7.5) / element.width,\n          my: (element.height - 20) / element.height\n        }\n      });\n\n      drawMarker('sub-process', parentGfx, markerPath, {\n        fill: getFillColor(element, defaultFillColor),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n    },\n    'ParallelMarker': function(parentGfx, element, position) {\n      var markerPath = pathMap.getScaledPath('MARKER_PARALLEL', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: ((element.width / 2 + position.parallel) / element.width),\n          my: (element.height - 20) / element.height\n        }\n      });\n\n      drawMarker('parallel', parentGfx, markerPath, {\n        fill: getFillColor(element, defaultFillColor),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n    },\n    'SequentialMarker': function(parentGfx, element, position) {\n      var markerPath = pathMap.getScaledPath('MARKER_SEQUENTIAL', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: ((element.width / 2 + position.seq) / element.width),\n          my: (element.height - 19) / element.height\n        }\n      });\n\n      drawMarker('sequential', parentGfx, markerPath, {\n        fill: getFillColor(element, defaultFillColor),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n    },\n    'CompensationMarker': function(parentGfx, element, position) {\n      var markerMath = pathMap.getScaledPath('MARKER_COMPENSATION', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: ((element.width / 2 + position.compensation) / element.width),\n          my: (element.height - 13) / element.height\n        }\n      });\n\n      drawMarker('compensation', parentGfx, markerMath, {\n        strokeWidth: 1,\n        fill: getFillColor(element, defaultFillColor),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n    },\n    'LoopMarker': function(parentGfx, element, position) {\n      var markerPath = pathMap.getScaledPath('MARKER_LOOP', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: ((element.width / 2 + position.loop) / element.width),\n          my: (element.height - 7) / element.height\n        }\n      });\n\n      drawMarker('loop', parentGfx, markerPath, {\n        strokeWidth: 1,\n        fill: getFillColor(element, defaultFillColor),\n        stroke: getStrokeColor(element, defaultStrokeColor),\n        strokeLinecap: 'round',\n        strokeMiterlimit: 0.5\n      });\n    },\n    'AdhocMarker': function(parentGfx, element, position) {\n      var markerPath = pathMap.getScaledPath('MARKER_ADHOC', {\n        xScaleFactor: 1,\n        yScaleFactor: 1,\n        containerWidth: element.width,\n        containerHeight: element.height,\n        position: {\n          mx: ((element.width / 2 + position.adhoc) / element.width),\n          my: (element.height - 15) / element.height\n        }\n      });\n\n      drawMarker('adhoc', parentGfx, markerPath, {\n        strokeWidth: 1,\n        fill: getStrokeColor(element, defaultStrokeColor),\n        stroke: getStrokeColor(element, defaultStrokeColor)\n      });\n    }\n  };\n\n  function attachTaskMarkers(parentGfx, element, taskMarkers) {\n    var obj = getSemantic(element);\n\n    var subprocess = taskMarkers && taskMarkers.indexOf('SubProcessMarker') !== -1;\n    var position;\n\n    if (subprocess) {\n      position = {\n        seq: -21,\n        parallel: -22,\n        compensation: -42,\n        loop: -18,\n        adhoc: 10\n      };\n    } else {\n      position = {\n        seq: -3,\n        parallel: -6,\n        compensation: -27,\n        loop: 0,\n        adhoc: 10\n      };\n    }\n\n    forEach(taskMarkers, function(marker) {\n      renderer(marker)(parentGfx, element, position);\n    });\n\n    if (obj.isForCompensation) {\n      renderer('CompensationMarker')(parentGfx, element, position);\n    }\n\n    if (obj.$type === 'bpmn:AdHocSubProcess') {\n      renderer('AdhocMarker')(parentGfx, element, position);\n    }\n\n    var loopCharacteristics = obj.loopCharacteristics,\n        isSequential = loopCharacteristics && loopCharacteristics.isSequential;\n\n    if (loopCharacteristics) {\n\n      if (isSequential === undefined) {\n        renderer('LoopMarker')(parentGfx, element, position);\n      }\n\n      if (isSequential === false) {\n        renderer('ParallelMarker')(parentGfx, element, position);\n      }\n\n      if (isSequential === true) {\n        renderer('SequentialMarker')(parentGfx, element, position);\n      }\n    }\n  }\n\n  function renderDataItemCollection(parentGfx, element) {\n\n    var yPosition = (element.height - 18) / element.height;\n\n    var pathData = pathMap.getScaledPath('DATA_OBJECT_COLLECTION_PATH', {\n      xScaleFactor: 1,\n      yScaleFactor: 1,\n      containerWidth: element.width,\n      containerHeight: element.height,\n      position: {\n        mx: 0.33,\n        my: yPosition\n      }\n    });\n\n    /* collection path */ drawPath(parentGfx, pathData, {\n      strokeWidth: 2\n    });\n  }\n\n\n  // extension API, use at your own risk\n  this._drawPath = drawPath;\n\n}\n\n\ninherits(BpmnRenderer, BaseRenderer);\n\nBpmnRenderer.$inject = [\n  'config.bpmnRenderer',\n  'eventBus',\n  'styles',\n  'pathMap',\n  'canvas',\n  'textRenderer'\n];\n\n\nBpmnRenderer.prototype.canRender = function(element) {\n  return is(element, 'bpmn:BaseElement');\n};\n\nBpmnRenderer.prototype.drawShape = function(parentGfx, element) {\n  var type = element.type;\n  var h = this.handlers[type];\n\n  /* jshint -W040 */\n  return h(parentGfx, element);\n};\n\nBpmnRenderer.prototype.drawConnection = function(parentGfx, element) {\n  var type = element.type;\n  var h = this.handlers[type];\n\n  /* jshint -W040 */\n  return h(parentGfx, element);\n};\n\nBpmnRenderer.prototype.getShapePath = function(element) {\n\n  if (is(element, 'bpmn:Event')) {\n    return getCirclePath(element);\n  }\n\n  if (is(element, 'bpmn:Activity')) {\n    return getRoundRectPath(element, TASK_BORDER_RADIUS);\n  }\n\n  if (is(element, 'bpmn:Gateway')) {\n    return getDiamondPath(element);\n  }\n\n  return getRectPath(element);\n};\n"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,UAArB;AAEA,SACEC,QADF,EAEEC,MAFF,EAGEC,OAHF,QAIO,UAJP;AAMA,OAAOC,YAAP,MAAyB,kCAAzB;AAEA,SACEC,UADF,EAEEC,iBAFF,QAGO,gBAHP;AAKA,SACEC,QADF,QAEO,qCAFP;AAIA,SAASC,EAAT,QAAmB,mBAAnB;AAEA,SACEC,UADF,QAEO,gCAFP;AAIA,SACEC,YADF,EAEEC,YAFF,EAGEC,YAHF,EAIEC,KAJF,EAKEC,WALF,EAMEC,aANF,EAOEC,gBAPF,EAQEC,cARF,EASEC,WATF,EAUEC,YAVF,EAWEC,cAXF,QAYO,kBAZP;AAcA,SACEC,KAAK,IAAIC,QADX,QAEO,SAFP;AAIA,SACEC,MAAM,IAAIC,SADZ,EAEEC,IAAI,IAAIC,OAFV,EAGEC,MAAM,IAAIC,SAHZ,EAIEC,OAAO,IAAIC,UAJb,QAKO,UALP;AAOA,SACEC,MADF,EAEEC,SAFF,EAGEC,SAHF,QAIO,sCAJP;AAMA,OAAOC,GAAP,MAAgB,KAAhB;AAEA,IAAIC,YAAY,GAAG,IAAID,GAAJ,EAAnB;AAEA,IAAIE,kBAAkB,GAAG,EAAzB;AACA,IAAIC,gBAAgB,GAAG,CAAvB;AAEA,IAAIC,oBAAoB,GAAG,GAA3B;AAAA,IACIC,iBAAiB,GAAG,GADxB;AAIA,eAAe,SAASC,YAAT,CACXC,MADW,EACHC,QADG,EACOC,MADP,EACeC,OADf,EAEXC,MAFW,EAEHC,YAFG,EAEWC,QAFX,EAEqB;EAElC3C,YAAY,CAAC4C,IAAb,CAAkB,IAAlB,EAAwBN,QAAxB,EAAkCK,QAAlC;EAEA,IAAIE,gBAAgB,GAAGR,MAAM,IAAIA,MAAM,CAACQ,gBAAxC;EAAA,IACIC,kBAAkB,GAAGT,MAAM,IAAIA,MAAM,CAACS,kBAD1C;EAGA,IAAIC,UAAU,GAAGhB,YAAY,CAACiB,IAAb,EAAjB;EAEA,IAAIC,OAAO,GAAG,EAAd;EAEA,IAAIC,YAAY,GAAGX,MAAM,CAACW,YAA1B;;EAEA,SAASC,SAAT,CAAmBC,EAAnB,EAAuBC,OAAvB,EAAgC;IAC9B,IAAIC,KAAK,GAAGxD,MAAM,CAAC;MACjByD,IAAI,EAAE,OADW;MAEjBC,WAAW,EAAE,CAFI;MAGjBC,aAAa,EAAE,OAHE;MAIjBC,eAAe,EAAE;IAJA,CAAD,EAKfL,OAAO,CAACC,KALO,CAAlB;IAOA,IAAIK,GAAG,GAAGN,OAAO,CAACM,GAAR,IAAe;MAAEC,CAAC,EAAE,CAAL;MAAQC,CAAC,EAAE;IAAX,CAAzB;IAEA,IAAIC,KAAK,GAAGT,OAAO,CAACS,KAAR,IAAiB,CAA7B,CAV8B,CAY9B;IACA;;IACA,IAAIR,KAAK,CAACI,eAAN,KAA0B,MAA9B,EAAsC;MACpCJ,KAAK,CAACI,eAAN,GAAwB,CAAC,KAAD,EAAQ,CAAR,CAAxB;IACD;;IAED,IAAIK,MAAM,GAAGvC,SAAS,CAAC,QAAD,CAAtB;IAEAF,OAAO,CAAC+B,OAAO,CAACW,OAAT,EAAkBV,KAAlB,CAAP;IAEAlC,SAAS,CAAC2C,MAAD,EAASV,OAAO,CAACW,OAAjB,CAAT;IAEA1C,OAAO,CAACyC,MAAD,EAAS;MACdX,EAAE,EAAEA,EADU;MAEda,OAAO,EAAE,WAFK;MAGdC,IAAI,EAAEP,GAAG,CAACC,CAHI;MAIdO,IAAI,EAAER,GAAG,CAACE,CAJI;MAKdO,WAAW,EAAE,KAAKN,KALJ;MAMdO,YAAY,EAAE,KAAKP,KANL;MAOdQ,MAAM,EAAE;IAPM,CAAT,CAAP;IAUA,IAAIC,IAAI,GAAGrD,QAAQ,CAAC,MAAD,EAASuB,MAAM,CAAC+B,IAAhB,CAAnB;;IAEA,IAAI,CAACD,IAAL,EAAW;MACTA,IAAI,GAAG/C,SAAS,CAAC,MAAD,CAAhB;MAEAJ,SAAS,CAACqB,MAAM,CAAC+B,IAAR,EAAcD,IAAd,CAAT;IACD;;IAEDnD,SAAS,CAACmD,IAAD,EAAOR,MAAP,CAAT;IAEAd,OAAO,CAACG,EAAD,CAAP,GAAcW,MAAd;EACD;;EAED,SAASU,WAAT,CAAqBC,GAArB,EAA0B;IAExB;IACA,OAAOA,GAAG,CAACC,OAAJ,CAAY,gBAAZ,EAA8B,GAA9B,CAAP;EACD;;EAED,SAASZ,MAAT,CAAgBa,IAAhB,EAAsBrB,IAAtB,EAA4BsB,MAA5B,EAAoC;IAClC,IAAIzB,EAAE,GAAGwB,IAAI,GAAG,GAAP,GAAaH,WAAW,CAAClB,IAAD,CAAxB,GAAiC,GAAjC,GAAuCkB,WAAW,CAACI,MAAD,CAAlD,GAA6D,GAA7D,GAAmE9B,UAA5E;;IAEA,IAAI,CAACE,OAAO,CAACG,EAAD,CAAZ,EAAkB;MAChB0B,YAAY,CAAC1B,EAAD,EAAKwB,IAAL,EAAWrB,IAAX,EAAiBsB,MAAjB,CAAZ;IACD;;IAED,OAAO,UAAUzB,EAAV,GAAe,GAAtB;EACD;;EAED,SAAS0B,YAAT,CAAsB1B,EAAtB,EAA0BwB,IAA1B,EAAgCrB,IAAhC,EAAsCsB,MAAtC,EAA8C;IAE5C,IAAID,IAAI,KAAK,kBAAb,EAAiC;MAC/B,IAAIG,eAAe,GAAGvD,SAAS,CAAC,MAAD,CAA/B;MACAF,OAAO,CAACyD,eAAD,EAAkB;QAAEC,CAAC,EAAE;MAAL,CAAlB,CAAP;MAEA7B,SAAS,CAACC,EAAD,EAAK;QACZY,OAAO,EAAEe,eADG;QAEZpB,GAAG,EAAE;UAAEC,CAAC,EAAE,EAAL;UAASC,CAAC,EAAE;QAAZ,CAFO;QAGZC,KAAK,EAAE,GAHK;QAIZR,KAAK,EAAE;UACLC,IAAI,EAAEsB,MADD;UAELA,MAAM,EAAEA;QAFH;MAJK,CAAL,CAAT;IASD;;IAED,IAAID,IAAI,KAAK,mBAAb,EAAkC;MAChC,IAAIK,gBAAgB,GAAGzD,SAAS,CAAC,QAAD,CAAhC;MACAF,OAAO,CAAC2D,gBAAD,EAAmB;QAAEC,EAAE,EAAE,CAAN;QAASC,EAAE,EAAE,CAAb;QAAgBC,CAAC,EAAE;MAAnB,CAAnB,CAAP;MAEAjC,SAAS,CAACC,EAAD,EAAK;QACZY,OAAO,EAAEiB,gBADG;QAEZ3B,KAAK,EAAE;UACLC,IAAI,EAAEA,IADD;UAELsB,MAAM,EAAEA;QAFH,CAFK;QAMZlB,GAAG,EAAE;UAAEC,CAAC,EAAE,CAAL;UAAQC,CAAC,EAAE;QAAX;MANO,CAAL,CAAT;IAQD;;IAED,IAAIe,IAAI,KAAK,iBAAb,EAAgC;MAC9B,IAAIS,cAAc,GAAG7D,SAAS,CAAC,MAAD,CAA9B;MACAF,OAAO,CAAC+D,cAAD,EAAiB;QAAEL,CAAC,EAAE;MAAL,CAAjB,CAAP;MAEA7B,SAAS,CAACC,EAAD,EAAK;QACZY,OAAO,EAAEqB,cADG;QAEZ/B,KAAK,EAAE;UACLC,IAAI,EAAEA,IADD;UAELsB,MAAM,EAAEA,MAFH;UAGLpB,aAAa,EAAE;QAHV,CAFK;QAOZE,GAAG,EAAE;UAAEC,CAAC,EAAE,GAAL;UAAUC,CAAC,EAAE;QAAb;MAPO,CAAL,CAAT;IASD;;IAED,IAAIe,IAAI,KAAK,mBAAb,EAAkC;MAChC,IAAIU,gBAAgB,GAAG9D,SAAS,CAAC,MAAD,CAAhC;MACAF,OAAO,CAACgE,gBAAD,EAAmB;QAAEN,CAAC,EAAE;MAAL,CAAnB,CAAP;MAEA7B,SAAS,CAACC,EAAD,EAAK;QACZY,OAAO,EAAEsB,gBADG;QAEZhC,KAAK,EAAE;UACLC,IAAI,EAAE,MADD;UAELsB,MAAM,EAAEA,MAFH;UAGLrB,WAAW,EAAE;QAHR,CAFK;QAOZG,GAAG,EAAE;UAAEC,CAAC,EAAE,CAAL;UAAQC,CAAC,EAAE;QAAX,CAPO;QAQZC,KAAK,EAAE;MARK,CAAL,CAAT;IAUD;;IAED,IAAIc,IAAI,KAAK,iBAAb,EAAgC;MAC9B,IAAIW,cAAc,GAAG/D,SAAS,CAAC,MAAD,CAA9B;MACAF,OAAO,CAACiE,cAAD,EAAiB;QAAEP,CAAC,EAAE;MAAL,CAAjB,CAAP;MAEA7B,SAAS,CAACC,EAAD,EAAK;QACZY,OAAO,EAAEuB,cADG;QAEZjC,KAAK,EAAE;UACLC,IAAI,EAAE,MADD;UAELsB,MAAM,EAAEA,MAFH;UAGLrB,WAAW,EAAE;QAHR,CAFK;QAOZG,GAAG,EAAE;UAAEC,CAAC,EAAE,EAAL;UAASC,CAAC,EAAE;QAAZ,CAPO;QAQZC,KAAK,EAAE;MARK,CAAL,CAAT;IAUD;;IAED,IAAIc,IAAI,KAAK,yBAAb,EAAwC;MACtC,IAAIY,qBAAqB,GAAGhE,SAAS,CAAC,MAAD,CAArC;MACAF,OAAO,CAACkE,qBAAD,EAAwB;QAAER,CAAC,EAAE;MAAL,CAAxB,CAAP;MAEA7B,SAAS,CAACC,EAAD,EAAK;QACZY,OAAO,EAAEwB,qBADG;QAEZlC,KAAK,EAAE;UACLC,IAAI,EAAEA,IADD;UAELsB,MAAM,EAAEA;QAFH,CAFK;QAMZlB,GAAG,EAAE;UAAEC,CAAC,EAAE,CAAC,CAAN;UAASC,CAAC,EAAE;QAAZ,CANO;QAOZC,KAAK,EAAE;MAPK,CAAL,CAAT;IASD;;IAED,IAAIc,IAAI,KAAK,iCAAb,EAAgD;MAC9C,IAAIa,4BAA4B,GAAGjE,SAAS,CAAC,MAAD,CAA5C;MACAF,OAAO,CAACmE,4BAAD,EAA+B;QAAET,CAAC,EAAE;MAAL,CAA/B,CAAP;MAEA7B,SAAS,CAACC,EAAD,EAAK;QACZY,OAAO,EAAEyB,4BADG;QAEZnC,KAAK,EAAE;UACLuB,MAAM,EAAEA;QADH,CAFK;QAKZlB,GAAG,EAAE;UAAEC,CAAC,EAAE,CAAL;UAAQC,CAAC,EAAE;QAAX,CALO;QAMZC,KAAK,EAAE;MANK,CAAL,CAAT;IAQD;EACF;;EAED,SAAS4B,UAAT,CAAoBC,SAApB,EAA+BC,KAA/B,EAAsCC,MAAtC,EAA8CC,MAA9C,EAAsDxC,KAAtD,EAA6D;IAE3D,IAAIzD,QAAQ,CAACiG,MAAD,CAAZ,EAAsB;MACpBxC,KAAK,GAAGwC,MAAR;MACAA,MAAM,GAAG,CAAT;IACD;;IAEDA,MAAM,GAAGA,MAAM,IAAI,CAAnB;IAEAxC,KAAK,GAAGJ,YAAY,CAACI,KAAD,EAAQ;MAC1BuB,MAAM,EAAE,OADkB;MAE1BrB,WAAW,EAAE,CAFa;MAG1BD,IAAI,EAAE;IAHoB,CAAR,CAApB;;IAMA,IAAID,KAAK,CAACC,IAAN,KAAe,MAAnB,EAA2B;MACzB,OAAOD,KAAK,CAACyC,WAAb;IACD;;IAED,IAAIb,EAAE,GAAGU,KAAK,GAAG,CAAjB;IAAA,IACIT,EAAE,GAAGU,MAAM,GAAG,CADlB;IAGA,IAAIG,MAAM,GAAGxE,SAAS,CAAC,QAAD,CAAtB;IACAF,OAAO,CAAC0E,MAAD,EAAS;MACdd,EAAE,EAAEA,EADU;MAEdC,EAAE,EAAEA,EAFU;MAGdC,CAAC,EAAEa,IAAI,CAACC,KAAL,CAAW,CAACN,KAAK,GAAGC,MAAT,IAAmB,CAAnB,GAAuBC,MAAlC;IAHW,CAAT,CAAP;IAKAxE,OAAO,CAAC0E,MAAD,EAAS1C,KAAT,CAAP;IAEAlC,SAAS,CAACuE,SAAD,EAAYK,MAAZ,CAAT;IAEA,OAAOA,MAAP;EACD;;EAED,SAASG,QAAT,CAAkBR,SAAlB,EAA6BC,KAA7B,EAAoCC,MAApC,EAA4CT,CAA5C,EAA+CU,MAA/C,EAAuDxC,KAAvD,EAA8D;IAE5D,IAAIzD,QAAQ,CAACiG,MAAD,CAAZ,EAAsB;MACpBxC,KAAK,GAAGwC,MAAR;MACAA,MAAM,GAAG,CAAT;IACD;;IAEDA,MAAM,GAAGA,MAAM,IAAI,CAAnB;IAEAxC,KAAK,GAAGJ,YAAY,CAACI,KAAD,EAAQ;MAC1BuB,MAAM,EAAE,OADkB;MAE1BrB,WAAW,EAAE,CAFa;MAG1BD,IAAI,EAAE;IAHoB,CAAR,CAApB;IAMA,IAAI6C,IAAI,GAAG5E,SAAS,CAAC,MAAD,CAApB;IACAF,OAAO,CAAC8E,IAAD,EAAO;MACZxC,CAAC,EAAEkC,MADS;MAEZjC,CAAC,EAAEiC,MAFS;MAGZF,KAAK,EAAEA,KAAK,GAAGE,MAAM,GAAG,CAHZ;MAIZD,MAAM,EAAEA,MAAM,GAAGC,MAAM,GAAG,CAJd;MAKZO,EAAE,EAAEjB,CALQ;MAMZkB,EAAE,EAAElB;IANQ,CAAP,CAAP;IAQA9D,OAAO,CAAC8E,IAAD,EAAO9C,KAAP,CAAP;IAEAlC,SAAS,CAACuE,SAAD,EAAYS,IAAZ,CAAT;IAEA,OAAOA,IAAP;EACD;;EAED,SAASG,WAAT,CAAqBZ,SAArB,EAAgCC,KAAhC,EAAuCC,MAAvC,EAA+CvC,KAA/C,EAAsD;IAEpD,IAAIkD,GAAG,GAAGZ,KAAK,GAAG,CAAlB;IACA,IAAIa,GAAG,GAAGZ,MAAM,GAAG,CAAnB;IAEA,IAAIa,MAAM,GAAG,CAAC;MAAE9C,CAAC,EAAE4C,GAAL;MAAU3C,CAAC,EAAE;IAAb,CAAD,EAAmB;MAAED,CAAC,EAAEgC,KAAL;MAAY/B,CAAC,EAAE4C;IAAf,CAAnB,EAAyC;MAAE7C,CAAC,EAAE4C,GAAL;MAAU3C,CAAC,EAAEgC;IAAb,CAAzC,EAAgE;MAAEjC,CAAC,EAAE,CAAL;MAAQC,CAAC,EAAE4C;IAAX,CAAhE,CAAb;IAEA,IAAIE,YAAY,GAAGD,MAAM,CAACE,GAAP,CAAW,UAASC,KAAT,EAAgB;MAC5C,OAAOA,KAAK,CAACjD,CAAN,GAAU,GAAV,GAAgBiD,KAAK,CAAChD,CAA7B;IACD,CAFkB,EAEhBiD,IAFgB,CAEX,GAFW,CAAnB;IAIAxD,KAAK,GAAGJ,YAAY,CAACI,KAAD,EAAQ;MAC1BuB,MAAM,EAAE,OADkB;MAE1BrB,WAAW,EAAE,CAFa;MAG1BD,IAAI,EAAE;IAHoB,CAAR,CAApB;IAMA,IAAIwD,OAAO,GAAGvF,SAAS,CAAC,SAAD,CAAvB;IACAF,OAAO,CAACyF,OAAD,EAAU;MACfL,MAAM,EAAEC;IADO,CAAV,CAAP;IAGArF,OAAO,CAACyF,OAAD,EAAUzD,KAAV,CAAP;IAEAlC,SAAS,CAACuE,SAAD,EAAYoB,OAAZ,CAAT;IAEA,OAAOA,OAAP;EACD;;EAED,SAASC,QAAT,CAAkBrB,SAAlB,EAA6BsB,SAA7B,EAAwC3D,KAAxC,EAA+C;IAC7CA,KAAK,GAAGJ,YAAY,CAACI,KAAD,EAAQ,CAAE,SAAF,CAAR,EAAuB;MACzCuB,MAAM,EAAE,OADiC;MAEzCrB,WAAW,EAAE,CAF4B;MAGzCD,IAAI,EAAE;IAHmC,CAAvB,CAApB;IAMA,IAAI2D,IAAI,GAAG7G,UAAU,CAAC4G,SAAD,EAAY3D,KAAZ,CAArB;IAEAlC,SAAS,CAACuE,SAAD,EAAYuB,IAAZ,CAAT;IAEA,OAAOA,IAAP;EACD;;EAED,SAASC,QAAT,CAAkBxB,SAAlB,EAA6BX,CAA7B,EAAgC1B,KAAhC,EAAuC;IAErCA,KAAK,GAAGJ,YAAY,CAACI,KAAD,EAAQ,CAAE,SAAF,CAAR,EAAuB;MACzCE,WAAW,EAAE,CAD4B;MAEzCqB,MAAM,EAAE;IAFiC,CAAvB,CAApB;IAKA,IAAIuC,IAAI,GAAG5F,SAAS,CAAC,MAAD,CAApB;IACAF,OAAO,CAAC8F,IAAD,EAAO;MAAEpC,CAAC,EAAEA;IAAL,CAAP,CAAP;IACA1D,OAAO,CAAC8F,IAAD,EAAO9D,KAAP,CAAP;IAEAlC,SAAS,CAACuE,SAAD,EAAYyB,IAAZ,CAAT;IAEA,OAAOA,IAAP;EACD;;EAED,SAASC,UAAT,CAAoBzC,IAApB,EAA0Be,SAA1B,EAAqCyB,IAArC,EAA2C9D,KAA3C,EAAkD;IAChD,OAAO6D,QAAQ,CAACxB,SAAD,EAAYyB,IAAZ,EAAkBtH,MAAM,CAAC;MAAE,eAAe8E;IAAjB,CAAD,EAA0BtB,KAA1B,CAAxB,CAAf;EACD;;EAED,SAASgE,EAAT,CAAY1C,IAAZ,EAAkB;IAChB,OAAO,UAASe,SAAT,EAAoB3B,OAApB,EAA6B;MAClC,OAAOuD,QAAQ,CAAC3C,IAAD,CAAR,CAAee,SAAf,EAA0B3B,OAA1B,CAAP;IACD,CAFD;EAGD;;EAED,SAASwD,QAAT,CAAkB5C,IAAlB,EAAwB;IACtB,OAAO2C,QAAQ,CAAC3C,IAAD,CAAf;EACD;;EAED,SAAS6C,kBAAT,CAA4BzD,OAA5B,EAAqC2B,SAArC,EAAgD;IAE9C,IAAI+B,KAAK,GAAGhH,WAAW,CAACsD,OAAD,CAAvB;IACA,IAAI2D,UAAU,GAAGpH,YAAY,CAACmH,KAAD,CAA7B;;IAEA,IAAIA,KAAK,CAACE,gBAAN,IAA0BF,KAAK,CAACE,gBAAN,CAAuBC,MAAvB,GAA8B,CAA5D,EAA+D;MAC7D,IAAIH,KAAK,CAACI,gBAAV,EAA4B;QAC1B,OAAON,QAAQ,CAAC,sCAAD,CAAR,CAAiD7B,SAAjD,EAA4D3B,OAA5D,EAAqE2D,UAArE,CAAP;MACD,CAFD,MAGK;QACH,OAAOH,QAAQ,CAAC,8BAAD,CAAR,CAAyC7B,SAAzC,EAAoD3B,OAApD,EAA6D2D,UAA7D,CAAP;MACD;IACF;;IAED,IAAIrH,YAAY,CAACoH,KAAD,EAAQ,6BAAR,CAAhB,EAAwD;MACtD,OAAOF,QAAQ,CAAC,6BAAD,CAAR,CAAwC7B,SAAxC,EAAmD3B,OAAnD,EAA4D2D,UAA5D,CAAP;IACD;;IAED,IAAIrH,YAAY,CAACoH,KAAD,EAAQ,2BAAR,CAAhB,EAAsD;MACpD,OAAOF,QAAQ,CAAC,2BAAD,CAAR,CAAsC7B,SAAtC,EAAiD3B,OAAjD,EAA0D2D,UAA1D,CAAP;IACD;;IAED,IAAIrH,YAAY,CAACoH,KAAD,EAAQ,iCAAR,CAAhB,EAA4D;MAC1D,OAAOF,QAAQ,CAAC,iCAAD,CAAR,CAA4C7B,SAA5C,EAAuD3B,OAAvD,CAAP;IACD;;IAED,IAAI1D,YAAY,CAACoH,KAAD,EAAQ,4BAAR,CAAhB,EAAuD;MACrD,OAAOF,QAAQ,CAAC,4BAAD,CAAR,CAAuC7B,SAAvC,EAAkD3B,OAAlD,EAA2D2D,UAA3D,CAAP;IACD;;IAED,IAAIrH,YAAY,CAACoH,KAAD,EAAQ,gCAAR,CAAhB,EAA2D;MACzD,OAAOF,QAAQ,CAAC,gCAAD,CAAR,CAA2C7B,SAA3C,EAAsD3B,OAAtD,EAA+D2D,UAA/D,CAAP;IACD;;IAED,IAAIrH,YAAY,CAACoH,KAAD,EAAQ,0BAAR,CAAhB,EAAqD;MACnD,OAAOF,QAAQ,CAAC,0BAAD,CAAR,CAAqC7B,SAArC,EAAgD3B,OAAhD,EAAyD2D,UAAzD,CAAP;IACD;;IAED,IAAIrH,YAAY,CAACoH,KAAD,EAAQ,2BAAR,CAAhB,EAAsD;MACpD,OAAOF,QAAQ,CAAC,2BAAD,CAAR,CAAsC7B,SAAtC,EAAiD3B,OAAjD,EAA0D2D,UAA1D,CAAP;IACD;;IAED,IAAIrH,YAAY,CAACoH,KAAD,EAAQ,4BAAR,CAAhB,EAAuD;MACrD,OAAOF,QAAQ,CAAC,4BAAD,CAAR,CAAuC7B,SAAvC,EAAkD3B,OAAlD,EAA2D2D,UAA3D,CAAP;IACD;;IAED,IAAIrH,YAAY,CAACoH,KAAD,EAAQ,gCAAR,CAAhB,EAA2D;MACzD,OAAOF,QAAQ,CAAC,gCAAD,CAAR,CAA2C7B,SAA3C,EAAsD3B,OAAtD,EAA+D2D,UAA/D,CAAP;IACD;;IAED,IAAIrH,YAAY,CAACoH,KAAD,EAAQ,+BAAR,CAAhB,EAA0D;MACxD,OAAOF,QAAQ,CAAC,+BAAD,CAAR,CAA0C7B,SAA1C,EAAqD3B,OAArD,EAA8D2D,UAA9D,CAAP;IACD;;IAED,OAAO,IAAP;EACD;;EAED,SAASI,WAAT,CAAqBpC,SAArB,EAAgCqC,KAAhC,EAAuC3E,OAAvC,EAAgD;IAE9CA,OAAO,GAAGvD,MAAM,CAAC;MACfmI,IAAI,EAAE;QACJrC,KAAK,EAAE;MADH;IADS,CAAD,EAIbvC,OAJa,CAAhB;IAMA,IAAI6E,IAAI,GAAGxF,YAAY,CAACyF,UAAb,CAAwBH,KAAK,IAAI,EAAjC,EAAqC3E,OAArC,CAAX;IAEA3B,UAAU,CAACwG,IAAD,CAAV,CAAiBE,GAAjB,CAAqB,WAArB;IAEAhH,SAAS,CAACuE,SAAD,EAAYuC,IAAZ,CAAT;IAEA,OAAOA,IAAP;EACD;;EAED,SAASG,mBAAT,CAA6B1C,SAA7B,EAAwC3B,OAAxC,EAAiDsE,KAAjD,EAAwD;IACtD,IAAIC,QAAQ,GAAG7H,WAAW,CAACsD,OAAD,CAA1B;IAEA,OAAO+D,WAAW,CAACpC,SAAD,EAAY4C,QAAQ,CAACC,IAArB,EAA2B;MAC3CC,GAAG,EAAEzE,OADsC;MAE3CsE,KAAK,EAAEA,KAFoC;MAG3CI,OAAO,EAAE,CAHkC;MAI3CC,KAAK,EAAE;QACLpF,IAAI,EAAEvC,cAAc,CAACgD,OAAD,EAAUlB,kBAAV;MADf;IAJoC,CAA3B,CAAlB;EAQD;;EAED,SAAS8F,mBAAT,CAA6BjD,SAA7B,EAAwC3B,OAAxC,EAAiD;IAE/C,IAAIyE,GAAG,GAAG;MACR7C,KAAK,EAAE,EADC;MAERC,MAAM,EAAE,EAFA;MAGRjC,CAAC,EAAEI,OAAO,CAAC4B,KAAR,GAAgB,CAAhB,GAAoB5B,OAAO,CAACJ,CAHvB;MAIRC,CAAC,EAAEG,OAAO,CAAC6B,MAAR,GAAiB,CAAjB,GAAqB7B,OAAO,CAACH;IAJxB,CAAV;IAOA,OAAOkE,WAAW,CAACpC,SAAD,EAAYxF,QAAQ,CAAC6D,OAAD,CAApB,EAA+B;MAC/CyE,GAAG,EAAEA,GAD0C;MAE/CI,MAAM,EAAE,IAFuC;MAG/CF,KAAK,EAAE7I,MAAM,CACX,EADW,EAEX4C,YAAY,CAACoG,gBAAb,EAFW,EAGX;QACEvF,IAAI,EAAEvC,cAAc,CAACgD,OAAD,EAAUlB,kBAAV;MADtB,CAHW;IAHkC,CAA/B,CAAlB;EAWD;;EAED,SAASiG,eAAT,CAAyBpD,SAAzB,EAAoCuC,IAApC,EAA0ClE,OAA1C,EAAmD;IACjD,IAAIgF,OAAO,GAAGjB,WAAW,CAACpC,SAAD,EAAYuC,IAAZ,EAAkB;MACzCO,GAAG,EAAE;QACH5C,MAAM,EAAE,EADL;QAEHD,KAAK,EAAE5B,OAAO,CAAC6B;MAFZ,CADoC;MAKzCyC,KAAK,EAAE,eALkC;MAMzCK,KAAK,EAAE;QACLpF,IAAI,EAAEvC,cAAc,CAACgD,OAAD,EAAUlB,kBAAV;MADf;IANkC,CAAlB,CAAzB;IAWA,IAAImG,GAAG,GAAG,CAAC,CAAD,GAAKjF,OAAO,CAAC6B,MAAvB;IAEAjE,SAAS,CAACoH,OAAD,EAAU,CAAV,EAAa,CAACC,GAAd,EAAmB,GAAnB,CAAT;EACD;;EAED,SAASC,wBAAT,CAAkCC,UAAlC,EAA8C;IAC5C,IAAIlC,SAAS,GAAGkC,UAAU,CAAClC,SAA3B;IAEA,IAAImC,QAAQ,GAAG,QAAQnC,SAAS,CAAC,CAAD,CAAT,CAAarD,CAArB,GAAyB,GAAzB,GAA+BqD,SAAS,CAAC,CAAD,CAAT,CAAapD,CAA3D;;IACA,KAAK,IAAIwF,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGpC,SAAS,CAACY,MAA9B,EAAsCwB,CAAC,EAAvC,EAA2C;MACzCD,QAAQ,IAAI,MAAMnC,SAAS,CAACoC,CAAD,CAAT,CAAazF,CAAnB,GAAuB,GAAvB,GAA6BqD,SAAS,CAACoC,CAAD,CAAT,CAAaxF,CAA1C,GAA8C,GAA1D;IACD;;IACD,OAAOuF,QAAP;EACD;;EAED,IAAI7B,QAAQ,GAAG,KAAKA,QAAL,GAAgB;IAC7B,cAAc,UAAS5B,SAAT,EAAoB3B,OAApB,EAA6BV,KAA7B,EAAoC;MAEhD,IAAI,EAAE,iBAAiBA,KAAnB,CAAJ,EAA+B;QAC7BA,KAAK,CAACyC,WAAN,GAAoB7D,oBAApB;MACD;;MAED,OAAOwD,UAAU,CAACC,SAAD,EAAY3B,OAAO,CAAC4B,KAApB,EAA2B5B,OAAO,CAAC6B,MAAnC,EAA2CvC,KAA3C,CAAjB;IACD,CAR4B;IAS7B,mBAAmB,UAASqC,SAAT,EAAoB3B,OAApB,EAA6B;MAC9C,IAAIV,KAAK,GAAG;QACVC,IAAI,EAAExC,YAAY,CAACiD,OAAD,EAAUnB,gBAAV,CADR;QAEVgC,MAAM,EAAE7D,cAAc,CAACgD,OAAD,EAAUlB,kBAAV;MAFZ,CAAZ;MAKA,IAAIyF,QAAQ,GAAG7H,WAAW,CAACsD,OAAD,CAA1B;;MAEA,IAAI,CAACuE,QAAQ,CAACe,cAAd,EAA8B;QAC5BhG,KAAK,GAAG;UACNI,eAAe,EAAE,GADX;UAEND,aAAa,EAAE,OAFT;UAGNF,IAAI,EAAExC,YAAY,CAACiD,OAAD,EAAUnB,gBAAV,CAHZ;UAINgC,MAAM,EAAE7D,cAAc,CAACgD,OAAD,EAAUlB,kBAAV;QAJhB,CAAR;MAMD;;MAED,IAAIkD,MAAM,GAAGwB,QAAQ,CAAC,YAAD,CAAR,CAAuB7B,SAAvB,EAAkC3B,OAAlC,EAA2CV,KAA3C,CAAb;MAEAmE,kBAAkB,CAACzD,OAAD,EAAU2B,SAAV,CAAlB;MAEA,OAAOK,MAAP;IACD,CA/B4B;IAgC7B,+BAA+B,UAASL,SAAT,EAAoB3B,OAApB,EAA6B2D,UAA7B,EAAyC;MACtE,IAAIyB,QAAQ,GAAG5G,OAAO,CAAC+G,aAAR,CAAsB,eAAtB,EAAuC;QACpDC,YAAY,EAAE,GADsC;QAEpDC,YAAY,EAAE,GAFsC;QAGpDC,cAAc,EAAE1F,OAAO,CAAC4B,KAH4B;QAIpD+D,eAAe,EAAE3F,OAAO,CAAC6B,MAJ2B;QAKpD+D,QAAQ,EAAE;UACRC,EAAE,EAAE,KADI;UAERC,EAAE,EAAE;QAFI;MAL0C,CAAvC,CAAf;MAWA,IAAIvG,IAAI,GAAGoE,UAAU,GAAG3G,cAAc,CAACgD,OAAD,EAAUlB,kBAAV,CAAjB,GAAiD/B,YAAY,CAACiD,OAAD,EAAUnB,gBAAV,CAAlF;MACA,IAAIgC,MAAM,GAAG8C,UAAU,GAAG5G,YAAY,CAACiD,OAAD,EAAUnB,gBAAV,CAAf,GAA6C7B,cAAc,CAACgD,OAAD,EAAUlB,kBAAV,CAAlF;MAEA,IAAIiH,WAAW,GAAG5C,QAAQ,CAACxB,SAAD,EAAYyD,QAAZ,EAAsB;QAC9C5F,WAAW,EAAE,CADiC;QAE9CD,IAAI,EAAEA,IAFwC;QAG9CsB,MAAM,EAAEA;MAHsC,CAAtB,CAA1B;MAMA,OAAOkF,WAAP;IACD,CAtD4B;IAuD7B,6BAA6B,UAASpE,SAAT,EAAoB3B,OAApB,EAA6B;MACxD,IAAIgC,MAAM,GAAGN,UAAU,CAACC,SAAD,EAAY3B,OAAO,CAAC4B,KAApB,EAA2B5B,OAAO,CAAC6B,MAAnC,EAA2C,MAAM7B,OAAO,CAAC6B,MAAzD,EAAiE;QACtFrC,WAAW,EAAE,CADyE;QAEtFD,IAAI,EAAExC,YAAY,CAACiD,OAAD,EAAUnB,gBAAV,CAFoE;QAGtFgC,MAAM,EAAE7D,cAAc,CAACgD,OAAD,EAAUlB,kBAAV;MAHgE,CAAjE,CAAvB;MAMA,IAAIsG,QAAQ,GAAG5G,OAAO,CAAC+G,aAAR,CAAsB,gBAAtB,EAAwC;QACrDC,YAAY,EAAE,IADuC;QAErDC,YAAY,EAAE,IAFuC;QAGrDC,cAAc,EAAE1F,OAAO,CAAC4B,KAH6B;QAIrD+D,eAAe,EAAE3F,OAAO,CAAC6B,MAJ4B;QAKrD+D,QAAQ,EAAE;UACRC,EAAE,EAAE,GADI;UAERC,EAAE,EAAE;QAFI;MAL2C,CAAxC,CAAf;MAWA3C,QAAQ,CAACxB,SAAD,EAAYyD,QAAZ,EAAsB;QAC5B5F,WAAW,EAAE,CADe;QAE5BC,aAAa,EAAE,QAFa;QAG5BoB,MAAM,EAAE7D,cAAc,CAACgD,OAAD,EAAUlB,kBAAV;MAHM,CAAtB,CAAR;;MAMA,KAAK,IAAIuG,CAAC,GAAG,CAAb,EAAeA,CAAC,GAAG,EAAnB,EAAuBA,CAAC,EAAxB,EAA4B;QAE1B,IAAIW,YAAY,GAAGxH,OAAO,CAAC+G,aAAR,CAAsB,kBAAtB,EAA0C;UAC3DC,YAAY,EAAE,IAD6C;UAE3DC,YAAY,EAAE,IAF6C;UAG3DC,cAAc,EAAE1F,OAAO,CAAC4B,KAHmC;UAI3D+D,eAAe,EAAE3F,OAAO,CAAC6B,MAJkC;UAK3D+D,QAAQ,EAAE;YACRC,EAAE,EAAE,GADI;YAERC,EAAE,EAAE;UAFI;QALiD,CAA1C,CAAnB;QAWA,IAAIlE,KAAK,GAAG5B,OAAO,CAAC4B,KAAR,GAAgB,CAA5B;QACA,IAAIC,MAAM,GAAG7B,OAAO,CAAC6B,MAAR,GAAiB,CAA9B;QAEAsB,QAAQ,CAACxB,SAAD,EAAYqE,YAAZ,EAA0B;UAChCxG,WAAW,EAAE,CADmB;UAEhCC,aAAa,EAAE,QAFiB;UAGhC7B,SAAS,EAAE,YAAayH,CAAC,GAAG,EAAjB,GAAuB,GAAvB,GAA6BxD,MAA7B,GAAsC,GAAtC,GAA4CD,KAA5C,GAAoD,GAH/B;UAIhCf,MAAM,EAAE7D,cAAc,CAACgD,OAAD,EAAUlB,kBAAV;QAJU,CAA1B,CAAR;MAMD;;MAED,OAAOkD,MAAP;IACD,CAxG4B;IAyG7B,kCAAkC,UAASL,SAAT,EAAoB+B,KAApB,EAA2BC,UAA3B,EAAuC;MACvE,IAAIyB,QAAQ,GAAG5G,OAAO,CAAC+G,aAAR,CAAsB,kBAAtB,EAA0C;QACvDC,YAAY,EAAE,CADyC;QAEvDC,YAAY,EAAE,CAFyC;QAGvDC,cAAc,EAAEhC,KAAK,CAAC9B,KAHiC;QAIvD+D,eAAe,EAAEjC,KAAK,CAAC7B,MAJgC;QAKvD+D,QAAQ,EAAE;UACRC,EAAE,EAAE,GADI;UAERC,EAAE,EAAE;QAFI;MAL6C,CAA1C,CAAf;MAWA,IAAIvG,IAAI,GAAGoE,UAAU,GAAG3G,cAAc,CAAC0G,KAAD,EAAQ5E,kBAAR,CAAjB,GAA+C,MAApE;MAEA,OAAOqE,QAAQ,CAACxB,SAAD,EAAYyD,QAAZ,EAAsB;QACnC5F,WAAW,EAAE,CADsB;QAEnCD,IAAI,EAAEA,IAF6B;QAGnCsB,MAAM,EAAE7D,cAAc,CAAC0G,KAAD,EAAQ5E,kBAAR;MAHa,CAAtB,CAAf;IAKD,CA5H4B;IA6H7B,mCAAmC,UAAS6C,SAAT,EAAoB+B,KAApB,EAA2B;MAC5D,IAAI0B,QAAQ,GAAG5G,OAAO,CAAC+G,aAAR,CAAsB,mBAAtB,EAA2C;QACxDC,YAAY,EAAE,CAD0C;QAExDC,YAAY,EAAE,CAF0C;QAGxDC,cAAc,EAAEhC,KAAK,CAAC9B,KAHkC;QAIxD+D,eAAe,EAAEjC,KAAK,CAAC7B,MAJiC;QAKxD+D,QAAQ,EAAE;UACRC,EAAE,EAAE,GADI;UAERC,EAAE,EAAE;QAFI;MAL8C,CAA3C,CAAf;MAWA,OAAO3C,QAAQ,CAACxB,SAAD,EAAYyD,QAAZ,EAAsB;QACnC5F,WAAW,EAAE,CADsB;QAEnCqB,MAAM,EAAE7D,cAAc,CAAC0G,KAAD,EAAQ5E,kBAAR;MAFa,CAAtB,CAAf;IAID,CA7I4B;IA8I7B,4BAA4B,UAAS6C,SAAT,EAAoB+B,KAApB,EAA2BC,UAA3B,EAAuC;MACjE,IAAIyB,QAAQ,GAAG5G,OAAO,CAAC+G,aAAR,CAAsB,YAAtB,EAAoC;QACjDC,YAAY,EAAE,CADmC;QAEjDC,YAAY,EAAE,CAFmC;QAGjDC,cAAc,EAAEhC,KAAK,CAAC9B,KAH2B;QAIjD+D,eAAe,EAAEjC,KAAK,CAAC7B,MAJ0B;QAKjD+D,QAAQ,EAAE;UACRC,EAAE,EAAE,IADI;UAERC,EAAE,EAAE;QAFI;MALuC,CAApC,CAAf;MAWA,IAAIvG,IAAI,GAAGoE,UAAU,GAAG3G,cAAc,CAAC0G,KAAD,EAAQ5E,kBAAR,CAAjB,GAA+C,MAApE;MAEA,OAAOqE,QAAQ,CAACxB,SAAD,EAAYyD,QAAZ,EAAsB;QACnC5F,WAAW,EAAE,CADsB;QAEnCD,IAAI,EAAEA,IAF6B;QAGnCsB,MAAM,EAAE7D,cAAc,CAAC0G,KAAD,EAAQ5E,kBAAR;MAHa,CAAtB,CAAf;IAKD,CAjK4B;IAkK7B,6BAA6B,UAAS6C,SAAT,EAAoB+B,KAApB,EAA2BC,UAA3B,EAAuC;MAClE,IAAIyB,QAAQ,GAAG5G,OAAO,CAAC+G,aAAR,CAAsB,aAAtB,EAAqC;QAClDC,YAAY,EAAE,GADoC;QAElDC,YAAY,EAAE,GAFoC;QAGlDC,cAAc,EAAEhC,KAAK,CAAC9B,KAH4B;QAIlD+D,eAAe,EAAEjC,KAAK,CAAC7B,MAJ2B;QAKlD+D,QAAQ,EAAE;UACRC,EAAE,EAAE,GADI;UAERC,EAAE,EAAE;QAFI;MALwC,CAArC,CAAf;MAWA,IAAIvG,IAAI,GAAGoE,UAAU,GAAG3G,cAAc,CAAC0G,KAAD,EAAQ5E,kBAAR,CAAjB,GAA+C,MAApE;MAEA,OAAOqE,QAAQ,CAACxB,SAAD,EAAYyD,QAAZ,EAAsB;QACnC5F,WAAW,EAAE,CADsB;QAEnCD,IAAI,EAAEA,IAF6B;QAGnCsB,MAAM,EAAE7D,cAAc,CAAC0G,KAAD,EAAQ5E,kBAAR;MAHa,CAAtB,CAAf;IAKD,CArL4B;IAsL7B,8BAA8B,UAAS6C,SAAT,EAAoB+B,KAApB,EAA2BC,UAA3B,EAAuC;MACnE,IAAIyB,QAAQ,GAAG5G,OAAO,CAAC+G,aAAR,CAAsB,iBAAtB,EAAyC;QACtDC,YAAY,EAAE,GADwC;QAEtDC,YAAY,EAAE,GAFwC;QAGtDC,cAAc,EAAEhC,KAAK,CAAC9B,KAHgC;QAItD+D,eAAe,EAAEjC,KAAK,CAAC7B,MAJ+B;QAKtD+D,QAAQ,EAAE;UACRC,EAAE,EAAE,KADI;UAERC,EAAE,EAAE,CAAC;QAFG;MAL4C,CAAzC,CAAf;MAWA,IAAIvG,IAAI,GAAGoE,UAAU,GAAG3G,cAAc,CAAC0G,KAAD,EAAQ5E,kBAAR,CAAjB,GAA+C,MAApE;MAEA,IAAIsE,IAAI,GAAGD,QAAQ,CAACxB,SAAD,EAAYyD,QAAZ,EAAsB;QACvC5F,WAAW,EAAE,CAD0B;QAEvCD,IAAI,EAAEA,IAFiC;QAGvCsB,MAAM,EAAE7D,cAAc,CAAC0G,KAAD,EAAQ5E,kBAAR;MAHiB,CAAtB,CAAnB;MAMAnB,MAAM,CAACyF,IAAD,EAAO,EAAP,CAAN;MAEA,OAAOA,IAAP;IACD,CA7M4B;IA8M7B,kCAAkC,UAASzB,SAAT,EAAoB+B,KAApB,EAA2BC,UAA3B,EAAuC;MACvE,IAAIyB,QAAQ,GAAG5G,OAAO,CAAC+G,aAAR,CAAsB,oBAAtB,EAA4C;QACzDC,YAAY,EAAE,CAD2C;QAEzDC,YAAY,EAAE,CAF2C;QAGzDC,cAAc,EAAEhC,KAAK,CAAC9B,KAHmC;QAIzD+D,eAAe,EAAEjC,KAAK,CAAC7B,MAJkC;QAKzD+D,QAAQ,EAAE;UACRC,EAAE,EAAE,IADI;UAERC,EAAE,EAAE;QAFI;MAL+C,CAA5C,CAAf;MAWA,IAAIvG,IAAI,GAAGoE,UAAU,GAAG3G,cAAc,CAAC0G,KAAD,EAAQ5E,kBAAR,CAAjB,GAA+C,MAApE;MAEA,OAAOqE,QAAQ,CAACxB,SAAD,EAAYyD,QAAZ,EAAsB;QACnC5F,WAAW,EAAE,CADsB;QAEnCD,IAAI,EAAEA,IAF6B;QAGnCsB,MAAM,EAAE7D,cAAc,CAAC0G,KAAD,EAAQ5E,kBAAR;MAHa,CAAtB,CAAf;IAKD,CAjO4B;IAkO7B,8BAA8B,UAAS6C,SAAT,EAAoB+B,KAApB,EAA2BC,UAA3B,EAAuC;MACnE,IAAIyB,QAAQ,GAAG5G,OAAO,CAAC+G,aAAR,CAAsB,cAAtB,EAAsC;QACnDC,YAAY,EAAE,GADqC;QAEnDC,YAAY,EAAE,GAFqC;QAGnDC,cAAc,EAAEhC,KAAK,CAAC9B,KAH6B;QAInD+D,eAAe,EAAEjC,KAAK,CAAC7B,MAJ4B;QAKnD+D,QAAQ,EAAE;UACRC,EAAE,EAAE,GADI;UAERC,EAAE,EAAE;QAFI;MALyC,CAAtC,CAAf;MAWA,IAAIvG,IAAI,GAAGoE,UAAU,GAAG3G,cAAc,CAAC0G,KAAD,EAAQ5E,kBAAR,CAAjB,GAA+C,MAApE;MAEA,OAAOqE,QAAQ,CAACxB,SAAD,EAAYyD,QAAZ,EAAsB;QACnC5F,WAAW,EAAE,CADsB;QAEnCD,IAAI,EAAEA,IAF6B;QAGnCsB,MAAM,EAAE7D,cAAc,CAAC0G,KAAD,EAAQ5E,kBAAR;MAHa,CAAtB,CAAf;IAKD,CArP4B;IAsP7B,gCAAgC,UAAS6C,SAAT,EAAoB+B,KAApB,EAA2BC,UAA3B,EAAuC;MACrE,IAAIyB,QAAQ,GAAG5G,OAAO,CAAC+G,aAAR,CAAsB,gBAAtB,EAAwC;QACrDC,YAAY,EAAE,GADuC;QAErDC,YAAY,EAAE,GAFuC;QAGrDC,cAAc,EAAEhC,KAAK,CAAC9B,KAH+B;QAIrD+D,eAAe,EAAEjC,KAAK,CAAC7B,MAJ8B;QAKrD+D,QAAQ,EAAE;UACRC,EAAE,EAAE,KADI;UAERC,EAAE,EAAE;QAFI;MAL2C,CAAxC,CAAf;MAWA,IAAIvG,IAAI,GAAGoE,UAAU,GAAG3G,cAAc,CAAC0G,KAAD,EAAQ5E,kBAAR,CAAjB,GAA+C,MAApE;MAEA,OAAOqE,QAAQ,CAACxB,SAAD,EAAYyD,QAAZ,EAAsB;QACnC5F,WAAW,EAAE,CADsB;QAEnCD,IAAI,EAAEA;MAF6B,CAAtB,CAAf;IAID,CAxQ4B;IAyQ7B,wCAAwC,UAASoC,SAAT,EAAoB+B,KAApB,EAA2B;MACjE,IAAI0B,QAAQ,GAAG5G,OAAO,CAAC+G,aAAR,CAAsB,yBAAtB,EAAiD;QAC9DC,YAAY,EAAE,GADgD;QAE9DC,YAAY,EAAE,GAFgD;QAG9DC,cAAc,EAAEhC,KAAK,CAAC9B,KAHwC;QAI9D+D,eAAe,EAAEjC,KAAK,CAAC7B,MAJuC;QAK9D+D,QAAQ,EAAE;UACRC,EAAE,EAAE,KADI;UAERC,EAAE,EAAE;QAFI;MALoD,CAAjD,CAAf;MAWA,OAAO3C,QAAQ,CAACxB,SAAD,EAAYyD,QAAZ,EAAsB;QACnC5F,WAAW,EAAE,CADsB;QAEnCD,IAAI,EAAEvC,cAAc,CAAC0G,KAAD,EAAQ5E,kBAAR,CAFe;QAGnC+B,MAAM,EAAE7D,cAAc,CAAC0G,KAAD,EAAQ5E,kBAAR;MAHa,CAAtB,CAAf;IAKD,CA1R4B;IA2R7B,iBAAiB,UAAS6C,SAAT,EAAoB3B,OAApB,EAA6B;MAC5C,IAAIgC,MAAM,GAAGwB,QAAQ,CAAC,YAAD,CAAR,CAAuB7B,SAAvB,EAAkC3B,OAAlC,EAA2C;QACtDR,WAAW,EAAE,CADyC;QAEtDD,IAAI,EAAExC,YAAY,CAACiD,OAAD,EAAUnB,gBAAV,CAFoC;QAGtDgC,MAAM,EAAE7D,cAAc,CAACgD,OAAD,EAAUlB,kBAAV;MAHgC,CAA3C,CAAb;MAMA2E,kBAAkB,CAACzD,OAAD,EAAU2B,SAAV,EAAqB,IAArB,CAAlB;MAEA,OAAOK,MAAP;IACD,CArS4B;IAsS7B,iCAAiC,UAASL,SAAT,EAAoB3B,OAApB,EAA6B;MAC5D,IAAIgC,MAAM,GAAGN,UAAU,CAACC,SAAD,EAAY3B,OAAO,CAAC4B,KAApB,EAA2B5B,OAAO,CAAC6B,MAAnC,EAA2C,CAA3C,EAA8C;QACnErC,WAAW,EAAE,CADsD;QAEnED,IAAI,EAAEvC,cAAc,CAACgD,OAAD,EAAUlB,kBAAV,CAF+C;QAGnE+B,MAAM,EAAE7D,cAAc,CAACgD,OAAD,EAAUlB,kBAAV;MAH6C,CAA9C,CAAvB;MAMA,OAAOkD,MAAP;IACD,CA9S4B;IA+S7B,0BAA0B,UAASL,SAAT,EAAoB3B,OAApB,EAA6B;MACrD,IAAIiG,KAAK,GAAGzC,QAAQ,CAAC,YAAD,CAAR,CAAuB7B,SAAvB,EAAkC3B,OAAlC,EAA2C;QACrDR,WAAW,EAAE,CADwC;QAErDD,IAAI,EAAExC,YAAY,CAACiD,OAAD,EAAUnB,gBAAV,CAFmC;QAGrDgC,MAAM,EAAE7D,cAAc,CAACgD,OAAD,EAAUlB,kBAAV;MAH+B,CAA3C,CAAZ;MAMA;;MACA4C,UAAU,CAACC,SAAD,EAAY3B,OAAO,CAAC4B,KAApB,EAA2B5B,OAAO,CAAC6B,MAAnC,EAA2C5D,gBAA3C,EAA6D;QACrEuB,WAAW,EAAE,CADwD;QAErED,IAAI,EAAExC,YAAY,CAACiD,OAAD,EAAU,MAAV,CAFmD;QAGrEa,MAAM,EAAE7D,cAAc,CAACgD,OAAD,EAAUlB,kBAAV;MAH+C,CAA7D,CAAV;MAMA2E,kBAAkB,CAACzD,OAAD,EAAU2B,SAAV,CAAlB;MAEA,OAAOsE,KAAP;IACD,CAhU4B;IAiU7B,+BAA+B3C,EAAE,CAAC,wBAAD,CAjUJ;IAkU7B,+BAA+BA,EAAE,CAAC,wBAAD,CAlUJ;IAoU7B,iBAAiB,UAAS3B,SAAT,EAAoB3B,OAApB,EAA6BV,KAA7B,EAAoC;MAEnDA,KAAK,GAAGA,KAAK,IAAI,EAAjB;;MAEA,IAAI,EAAE,iBAAiBA,KAAnB,CAAJ,EAA+B;QAC7BA,KAAK,CAACyC,WAAN,GAAoB7D,oBAApB;MACD;;MAED,OAAOiE,QAAQ,CAACR,SAAD,EAAY3B,OAAO,CAAC4B,KAApB,EAA2B5B,OAAO,CAAC6B,MAAnC,EAA2C7D,kBAA3C,EAA+DsB,KAA/D,CAAf;IACD,CA7U4B;IA+U7B,aAAa,UAASqC,SAAT,EAAoB3B,OAApB,EAA6B;MACxC,IAAIV,KAAK,GAAG;QACVC,IAAI,EAAExC,YAAY,CAACiD,OAAD,EAAUnB,gBAAV,CADR;QAEVgC,MAAM,EAAE7D,cAAc,CAACgD,OAAD,EAAUlB,kBAAV;MAFZ,CAAZ;MAKA,IAAIsD,IAAI,GAAGoB,QAAQ,CAAC,eAAD,CAAR,CAA0B7B,SAA1B,EAAqC3B,OAArC,EAA8CV,KAA9C,CAAX;MAEA+E,mBAAmB,CAAC1C,SAAD,EAAY3B,OAAZ,EAAqB,eAArB,CAAnB;MACAkG,iBAAiB,CAACvE,SAAD,EAAY3B,OAAZ,CAAjB;MAEA,OAAOoC,IAAP;IACD,CA3V4B;IA4V7B,oBAAoB,UAAST,SAAT,EAAoB3B,OAApB,EAA6B;MAC/C,IAAImG,IAAI,GAAG3C,QAAQ,CAAC,WAAD,CAAR,CAAsB7B,SAAtB,EAAiC3B,OAAjC,CAAX;MAEA,IAAIoG,UAAU,GAAG5H,OAAO,CAAC+G,aAAR,CAAsB,mBAAtB,EAA2C;QAC1Dc,MAAM,EAAE;UACNzG,CAAC,EAAE,EADG;UAENC,CAAC,EAAE;QAFG;MADkD,CAA3C,CAAjB;MAOA;;MAAiBsD,QAAQ,CAACxB,SAAD,EAAYyE,UAAZ,EAAwB;QAC/C5G,WAAW,EAAE,CADkC;QAE/CD,IAAI,EAAExC,YAAY,CAACiD,OAAD,EAAUnB,gBAAV,CAF6B;QAG/CgC,MAAM,EAAE7D,cAAc,CAACgD,OAAD,EAAUlB,kBAAV;MAHyB,CAAxB,CAAR;MAMjB,IAAIwH,YAAY,GAAG9H,OAAO,CAAC+G,aAAR,CAAsB,wBAAtB,EAAgD;QACjEc,MAAM,EAAE;UACNzG,CAAC,EAAE,IADG;UAENC,CAAC,EAAE;QAFG;MADyD,CAAhD,CAAnB;MAOA;;MAAmBsD,QAAQ,CAACxB,SAAD,EAAY2E,YAAZ,EAA0B;QACnD9G,WAAW,EAAE,CADsC;QAEnDD,IAAI,EAAExC,YAAY,CAACiD,OAAD,EAAUnB,gBAAV;MAFiC,CAA1B,CAAR;MAKnB,IAAIuG,QAAQ,GAAG5G,OAAO,CAAC+G,aAAR,CAAsB,mBAAtB,EAA2C;QACxDc,MAAM,EAAE;UACNzG,CAAC,EAAE,EADG;UAENC,CAAC,EAAE;QAFG;MADgD,CAA3C,CAAf;MAOA;;MAAcsD,QAAQ,CAACxB,SAAD,EAAYyD,QAAZ,EAAsB;QAC1C5F,WAAW,EAAE,CAD6B;QAE1CD,IAAI,EAAExC,YAAY,CAACiD,OAAD,EAAUnB,gBAAV,CAFwB;QAG1CgC,MAAM,EAAE7D,cAAc,CAACgD,OAAD,EAAUlB,kBAAV;MAHoB,CAAtB,CAAR;MAMd,OAAOqH,IAAP;IACD,CAtY4B;IAuY7B,iBAAiB,UAASxE,SAAT,EAAoB3B,OAApB,EAA6B;MAC5C,IAAImG,IAAI,GAAG3C,QAAQ,CAAC,WAAD,CAAR,CAAsB7B,SAAtB,EAAiC3B,OAAjC,CAAX;MAEA,IAAIJ,CAAC,GAAG,EAAR;MACA,IAAIC,CAAC,GAAG,EAAR;MAEA,IAAIuF,QAAQ,GAAG5G,OAAO,CAAC+G,aAAR,CAAsB,kBAAtB,EAA0C;QACvDc,MAAM,EAAE;UACNzG,CAAC,EAAEA,CADG;UAENC,CAAC,EAAEA;QAFG;MAD+C,CAA1C,CAAf;MAOA;;MAAgBsD,QAAQ,CAACxB,SAAD,EAAYyD,QAAZ,EAAsB;QAC5C5F,WAAW,EAAE,GAD+B;QAE5CD,IAAI,EAAExC,YAAY,CAACiD,OAAD,EAAUnB,gBAAV,CAF0B;QAG5CgC,MAAM,EAAE7D,cAAc,CAACgD,OAAD,EAAUlB,kBAAV;MAHsB,CAAtB,CAAR;MAMhB,IAAIyH,SAAS,GAAG/H,OAAO,CAAC+G,aAAR,CAAsB,kBAAtB,EAA0C;QACxDc,MAAM,EAAE;UACNzG,CAAC,EAAEA,CADG;UAENC,CAAC,EAAEA;QAFG;MADgD,CAA1C,CAAhB;MAOA;;MAAiBsD,QAAQ,CAACxB,SAAD,EAAY4E,SAAZ,EAAuB;QAC9C/G,WAAW,EAAE,GADiC;QAE9CD,IAAI,EAAExC,YAAY,CAACiD,OAAD,EAAUnB,gBAAV,CAF4B;QAG9CgC,MAAM,EAAE7D,cAAc,CAACgD,OAAD,EAAUlB,kBAAV;MAHwB,CAAvB,CAAR;MAMjB,IAAI0H,SAAS,GAAGhI,OAAO,CAAC+G,aAAR,CAAsB,kBAAtB,EAA0C;QACxDc,MAAM,EAAE;UACNzG,CAAC,EAAEA,CADG;UAENC,CAAC,EAAEA;QAFG;MADgD,CAA1C,CAAhB;MAOA;;MAAiBsD,QAAQ,CAACxB,SAAD,EAAY6E,SAAZ,EAAuB;QAC9ChH,WAAW,EAAE,GADiC;QAE9CD,IAAI,EAAEvC,cAAc,CAACgD,OAAD,EAAUlB,kBAAV,CAF0B;QAG9C+B,MAAM,EAAE7D,cAAc,CAACgD,OAAD,EAAUlB,kBAAV;MAHwB,CAAvB,CAAR;MAMjB,OAAOqH,IAAP;IACD,CArb4B;IAsb7B,mBAAmB,UAASxE,SAAT,EAAoB3B,OAApB,EAA6B;MAC9C,IAAImG,IAAI,GAAG3C,QAAQ,CAAC,WAAD,CAAR,CAAsB7B,SAAtB,EAAiC3B,OAAjC,CAAX;MAEA,IAAIoF,QAAQ,GAAG5G,OAAO,CAAC+G,aAAR,CAAsB,kBAAtB,EAA0C;QACvDc,MAAM,EAAE;UACNzG,CAAC,EAAE,EADG;UAENC,CAAC,EAAE;QAFG;MAD+C,CAA1C,CAAf;MAOA;;MAAkBsD,QAAQ,CAACxB,SAAD,EAAYyD,QAAZ,EAAsB;QAC9C5F,WAAW,EAAE,GADiC;QAC5B;QAClBD,IAAI,EAAExC,YAAY,CAACiD,OAAD,EAAUnB,gBAAV,CAF4B;QAG9CgC,MAAM,EAAE7D,cAAc,CAACgD,OAAD,EAAUlB,kBAAV;MAHwB,CAAtB,CAAR;MAMlB,OAAOqH,IAAP;IACD,CAvc4B;IAwc7B,iBAAiB,UAASxE,SAAT,EAAoB3B,OAApB,EAA6B;MAC5C,IAAImG,IAAI,GAAG3C,QAAQ,CAAC,WAAD,CAAR,CAAsB7B,SAAtB,EAAiC3B,OAAjC,CAAX;MAEA,IAAIoF,QAAQ,GAAG5G,OAAO,CAAC+G,aAAR,CAAsB,gBAAtB,EAAwC;QACrDC,YAAY,EAAE,CADuC;QAErDC,YAAY,EAAE,CAFuC;QAGrDC,cAAc,EAAE,EAHqC;QAIrDC,eAAe,EAAE,EAJoC;QAKrDC,QAAQ,EAAE;UACRC,EAAE,EAAE,KADI;UAERC,EAAE,EAAE;QAFI;MAL2C,CAAxC,CAAf;MAWA;;MAAgB3C,QAAQ,CAACxB,SAAD,EAAYyD,QAAZ,EAAsB;QAC5C5F,WAAW,EAAE,CAD+B;QAE5CD,IAAI,EAAEvC,cAAc,CAACgD,OAAD,EAAUlB,kBAAV,CAFwB;QAG5C+B,MAAM,EAAE9D,YAAY,CAACiD,OAAD,EAAUnB,gBAAV;MAHwB,CAAtB,CAAR;MAMhB,OAAOsH,IAAP;IACD,CA7d4B;IA8d7B,oBAAqB,UAASxE,SAAT,EAAoB3B,OAApB,EAA6B;MAChD,IAAIuE,QAAQ,GAAG7H,WAAW,CAACsD,OAAD,CAA1B;MAEA,IAAImG,IAAI,GAAG3C,QAAQ,CAAC,WAAD,CAAR,CAAsB7B,SAAtB,EAAiC3B,OAAjC,CAAX;MACA,IAAIoF,QAAJ;;MAEA,IAAIb,QAAQ,CAACkC,WAAb,EAA0B;QACxB/E,UAAU,CAACC,SAAD,EAAY,EAAZ,EAAgB,EAAhB,EAAoB,KAAK,IAAzB,EAA+B;UAAEnC,WAAW,EAAE;QAAf,CAA/B,CAAV;QAEA4F,QAAQ,GAAG5G,OAAO,CAAC+G,aAAR,CAAsB,8BAAtB,EAAsD;UAC/Dc,MAAM,EAAE;YACNzG,CAAC,EAAE,IADG;YAENC,CAAC,EAAE;UAFG;QADuD,CAAtD,CAAX;MAMD,CATD,MASO;QAELuF,QAAQ,GAAG5G,OAAO,CAAC+G,aAAR,CAAsB,gBAAtB,EAAwC;UACjDC,YAAY,EAAE,GADmC;UAEjDC,YAAY,EAAE,GAFmC;UAGjDC,cAAc,EAAE,EAHiC;UAIjDC,eAAe,EAAE,EAJgC;UAKjDC,QAAQ,EAAE;YACRC,EAAE,EAAE,GADI;YAERC,EAAE,EAAE;UAFI;QALuC,CAAxC,CAAX;MAUD;MAED;;;MAAmB3C,QAAQ,CAACxB,SAAD,EAAYyD,QAAZ,EAAsB;QAC/C5F,WAAW,EAAE,CADkC;QAE/CD,IAAI,EAAExC,YAAY,CAACiD,OAAD,EAAUnB,gBAAV,CAF6B;QAG/CgC,MAAM,EAAE7D,cAAc,CAACgD,OAAD,EAAUlB,kBAAV;MAHyB,CAAtB,CAAR;MAMnB,OAAOqH,IAAP;IACD,CAlgB4B;IAmgB7B,mBAAmB,UAASxE,SAAT,EAAoB3B,OAApB,EAA6B;MAC9C,IAAImG,IAAI,GAAG3C,QAAQ,CAAC,WAAD,CAAR,CAAsB7B,SAAtB,EAAiC3B,OAAjC,CAAX;MAEA,IAAIoF,QAAQ,GAAG5G,OAAO,CAAC+G,aAAR,CAAsB,kBAAtB,EAA0C;QACvDc,MAAM,EAAE;UACNzG,CAAC,EAAE,EADG;UAENC,CAAC,EAAE;QAFG;MAD+C,CAA1C,CAAf;MAOA;;MAAkBsD,QAAQ,CAACxB,SAAD,EAAYyD,QAAZ,EAAsB;QAC9C5F,WAAW,EAAE,CADiC;QAE9CqB,MAAM,EAAE7D,cAAc,CAACgD,OAAD,EAAUlB,kBAAV;MAFwB,CAAtB,CAAR;MAKlB,OAAOqH,IAAP;IACD,CAnhB4B;IAohB7B,yBAAyB,UAASxE,SAAT,EAAoB3B,OAApB,EAA6B;MACpD,IAAImG,IAAI,GAAG3C,QAAQ,CAAC,WAAD,CAAR,CAAsB7B,SAAtB,EAAiC3B,OAAjC,CAAX;MAEA,IAAI0G,cAAc,GAAGlI,OAAO,CAAC+G,aAAR,CAAsB,gCAAtB,EAAwD;QAC3Ec,MAAM,EAAE;UACNzG,CAAC,EAAE,CADG;UAENC,CAAC,EAAE;QAFG;MADmE,CAAxD,CAArB;MAOA,IAAI8G,kBAAkB,GAAGxD,QAAQ,CAACxB,SAAD,EAAY+E,cAAZ,CAAjC;MACApJ,OAAO,CAACqJ,kBAAD,EAAqB;QAC1BnH,WAAW,EAAE,CADa;QAE1BD,IAAI,EAAExC,YAAY,CAACiD,OAAD,EAAU,SAAV,CAFQ;QAG1Ba,MAAM,EAAE7D,cAAc,CAACgD,OAAD,EAAUlB,kBAAV;MAHI,CAArB,CAAP;MAMA,IAAI8H,UAAU,GAAGpI,OAAO,CAAC+G,aAAR,CAAsB,8BAAtB,EAAsD;QACrEc,MAAM,EAAE;UACNzG,CAAC,EAAE,CADG;UAENC,CAAC,EAAE;QAFG;MAD6D,CAAtD,CAAjB;MAOA,IAAIgH,YAAY,GAAG1D,QAAQ,CAACxB,SAAD,EAAYiF,UAAZ,CAA3B;MACAtJ,OAAO,CAACuJ,YAAD,EAAe;QACpBrH,WAAW,EAAE,CADO;QAEpBqB,MAAM,EAAE7D,cAAc,CAACgD,OAAD,EAAUlB,kBAAV;MAFF,CAAf,CAAP;MAKA,OAAOqH,IAAP;IACD,CAnjB4B;IAojB7B,mBAAmB,UAASxE,SAAT,EAAoB3B,OAApB,EAA6BV,KAA7B,EAAoC;MACrDA,KAAK,GAAGxD,MAAM,CAAC;QACbyD,IAAI,EAAExC,YAAY,CAACiD,OAAD,EAAUnB,gBAAV,CADL;QAEbgC,MAAM,EAAE7D,cAAc,CAACgD,OAAD,EAAUlB,kBAAV;MAFT,CAAD,EAGXQ,KAHW,CAAd;MAKA,IAAI8C,IAAI,GAAGoB,QAAQ,CAAC,eAAD,CAAR,CAA0B7B,SAA1B,EAAqC3B,OAArC,EAA8CV,KAA9C,CAAX;MAEA,IAAIwH,QAAQ,GAAG7K,UAAU,CAAC+D,OAAD,CAAzB;;MAEA,IAAI9D,iBAAiB,CAAC8D,OAAD,CAArB,EAAgC;QAC9B1C,OAAO,CAAC8E,IAAD,EAAO;UACZ1C,eAAe,EAAE;QADL,CAAP,CAAP;MAGD;;MAED2E,mBAAmB,CAAC1C,SAAD,EAAY3B,OAAZ,EAAqB8G,QAAQ,GAAG,YAAH,GAAkB,eAA/C,CAAnB;;MAEA,IAAIA,QAAJ,EAAc;QACZZ,iBAAiB,CAACvE,SAAD,EAAY3B,OAAZ,CAAjB;MACD,CAFD,MAEO;QACLkG,iBAAiB,CAACvE,SAAD,EAAY3B,OAAZ,EAAqB,CAAC,kBAAD,CAArB,CAAjB;MACD;;MAED,OAAOoC,IAAP;IACD,CA7kB4B;IA8kB7B,wBAAwB,UAAST,SAAT,EAAoB3B,OAApB,EAA6B;MACnD,OAAOwD,QAAQ,CAAC,iBAAD,CAAR,CAA4B7B,SAA5B,EAAuC3B,OAAvC,CAAP;IACD,CAhlB4B;IAilB7B,oBAAoB,UAAS2B,SAAT,EAAoB3B,OAApB,EAA6B;MAC/C,IAAIiG,KAAK,GAAGzC,QAAQ,CAAC,iBAAD,CAAR,CAA4B7B,SAA5B,EAAuC3B,OAAvC,CAAZ;MAEA,IAAI+G,UAAU,GAAGxI,MAAM,CAACoG,KAAP,CAAa,CAAE,SAAF,EAAa,WAAb,CAAb,EAAyC;QACxD9D,MAAM,EAAE7D,cAAc,CAACgD,OAAD,EAAUlB,kBAAV;MADkC,CAAzC,CAAjB;MAIA;;MAAiBqD,QAAQ,CAACR,SAAD,EAAY3B,OAAO,CAAC4B,KAApB,EAA2B5B,OAAO,CAAC6B,MAAnC,EAA2C7D,kBAAkB,GAAG,CAAhE,EAAmEC,gBAAnE,EAAqF8I,UAArF,CAAR;MAEjB,OAAOd,KAAP;IACD,CA3lB4B;IA4lB7B,qBAAqB,UAAStE,SAAT,EAAoB3B,OAApB,EAA6B;MAChD,OAAOwD,QAAQ,CAAC,iBAAD,CAAR,CAA4B7B,SAA5B,EAAuC3B,OAAvC,EAAgD;QACrDR,WAAW,EAAE;MADwC,CAAhD,CAAP;IAGD,CAhmB4B;IAimB7B,oBAAoB,UAASmC,SAAT,EAAoB3B,OAApB,EAA6B;MAE/C,IAAIV,KAAK,GAAG;QACVyC,WAAW,EAAE7D,oBADH;QAEVqB,IAAI,EAAExC,YAAY,CAACiD,OAAD,EAAUnB,gBAAV,CAFR;QAGVgC,MAAM,EAAE7D,cAAc,CAACgD,OAAD,EAAUlB,kBAAV;MAHZ,CAAZ;MAMA,IAAIkI,IAAI,GAAGxD,QAAQ,CAAC,WAAD,CAAR,CAAsB7B,SAAtB,EAAiC3B,OAAjC,EAA0CV,KAA1C,CAAX;MAEA,IAAI2H,YAAY,GAAGhL,UAAU,CAAC+D,OAAD,CAA7B;;MAEA,IAAIiH,YAAJ,EAAkB;QAChBjE,QAAQ,CAACrB,SAAD,EAAY,CAClB;UAAE/B,CAAC,EAAE,EAAL;UAASC,CAAC,EAAE;QAAZ,CADkB,EAElB;UAAED,CAAC,EAAE,EAAL;UAASC,CAAC,EAAEG,OAAO,CAAC6B;QAApB,CAFkB,CAAZ,EAGL;UACDhB,MAAM,EAAE7D,cAAc,CAACgD,OAAD,EAAUlB,kBAAV;QADrB,CAHK,CAAR;QAMA,IAAIoF,IAAI,GAAGxH,WAAW,CAACsD,OAAD,CAAX,CAAqBwE,IAAhC;QACAO,eAAe,CAACpD,SAAD,EAAYuC,IAAZ,EAAkBlE,OAAlB,CAAf;MACD,CATD,MASO;QAEL;QACA,IAAIkH,KAAK,GAAGxK,WAAW,CAACsD,OAAD,CAAX,CAAqBwE,IAAjC;QACAT,WAAW,CAACpC,SAAD,EAAYuF,KAAZ,EAAmB;UAC5BzC,GAAG,EAAEzE,OADuB;UACdsE,KAAK,EAAE,eADO;UAE5BK,KAAK,EAAE;YACLpF,IAAI,EAAEvC,cAAc,CAACgD,OAAD,EAAUlB,kBAAV;UADf;QAFqB,CAAnB,CAAX;MAMD;;MAED,IAAIqI,uBAAuB,GAAG,CAAC,CAAEzK,WAAW,CAACsD,OAAD,CAAX,CAAqBmH,uBAAtD;;MAEA,IAAIA,uBAAJ,EAA6B;QAC3B3D,QAAQ,CAAC,+BAAD,CAAR,CAA0C7B,SAA1C,EAAqD3B,OAArD;MACD;;MAED,OAAOgH,IAAP;IACD,CAzoB4B;IA0oB7B,aAAa,UAASrF,SAAT,EAAoB3B,OAApB,EAA6BV,KAA7B,EAAoC;MAC/C,IAAI8C,IAAI,GAAGD,QAAQ,CAACR,SAAD,EAAY3B,OAAO,CAAC4B,KAApB,EAA2B5B,OAAO,CAAC6B,MAAnC,EAA2C,CAA3C,EAA8C/F,MAAM,CAAC;QACtEyD,IAAI,EAAExC,YAAY,CAACiD,OAAD,EAAUnB,gBAAV,CADoD;QAEtEkD,WAAW,EAAE5D,iBAFyD;QAGtE0C,MAAM,EAAE7D,cAAc,CAACgD,OAAD,EAAUlB,kBAAV;MAHgD,CAAD,EAIpEQ,KAJoE,CAApD,CAAnB;MAMA,IAAIiF,QAAQ,GAAG7H,WAAW,CAACsD,OAAD,CAA1B;;MAEA,IAAIuE,QAAQ,CAAC6C,KAAT,KAAmB,WAAvB,EAAoC;QAClC,IAAIlD,IAAI,GAAGK,QAAQ,CAACC,IAApB;QACAO,eAAe,CAACpD,SAAD,EAAYuC,IAAZ,EAAkBlE,OAAlB,CAAf;MACD;;MAED,OAAOoC,IAAP;IACD,CAzpB4B;IA0pB7B,yBAAyB,UAAST,SAAT,EAAoB3B,OAApB,EAA6B;MACpD,IAAIqH,OAAO,GAAG7D,QAAQ,CAAC,cAAD,CAAR,CAAyB7B,SAAzB,EAAoC3B,OAApC,CAAd;MAEA;;MACA0B,UAAU,CAACC,SAAD,EAAY3B,OAAO,CAAC4B,KAApB,EAA2B5B,OAAO,CAAC6B,MAAnC,EAA2C7B,OAAO,CAAC6B,MAAR,GAAiB,IAA5D,EAAkE;QAC1ErC,WAAW,EAAE,GAD6D;QAE1ED,IAAI,EAAExC,YAAY,CAACiD,OAAD,EAAUnB,gBAAV,CAFwD;QAG1EgC,MAAM,EAAE7D,cAAc,CAACgD,OAAD,EAAUlB,kBAAV;MAHoD,CAAlE,CAAV;MAMA,OAAOuI,OAAP;IACD,CArqB4B;IAsqB7B,yBAAyB,UAAS1F,SAAT,EAAoB3B,OAApB,EAA6B;MACpD,IAAIqH,OAAO,GAAG7D,QAAQ,CAAC,cAAD,CAAR,CAAyB7B,SAAzB,EAAoC3B,OAApC,CAAd;MAEA,IAAIoF,QAAQ,GAAG5G,OAAO,CAAC+G,aAAR,CAAsB,mBAAtB,EAA2C;QACxDC,YAAY,EAAE,GAD0C;QAExDC,YAAY,EAAE,GAF0C;QAGxDC,cAAc,EAAE1F,OAAO,CAAC4B,KAHgC;QAIxD+D,eAAe,EAAE3F,OAAO,CAAC6B,MAJ+B;QAKxD+D,QAAQ,EAAE;UACRC,EAAE,EAAE,IADI;UAERC,EAAE,EAAE;QAFI;MAL8C,CAA3C,CAAf;;MAWA,IAAKrJ,KAAK,CAACuD,OAAD,CAAL,CAAesH,eAApB,EAAsC;QACpCnE,QAAQ,CAACxB,SAAD,EAAYyD,QAAZ,EAAsB;UAC5B5F,WAAW,EAAE,CADe;UAE5BD,IAAI,EAAEvC,cAAc,CAACgD,OAAD,EAAUlB,kBAAV,CAFQ;UAG5B+B,MAAM,EAAE7D,cAAc,CAACgD,OAAD,EAAUlB,kBAAV;QAHM,CAAtB,CAAR;MAKD;;MAED,OAAOuI,OAAP;IACD,CA7rB4B;IA8rB7B,uBAAuB,UAAS1F,SAAT,EAAoB3B,OAApB,EAA6B;MAClD,IAAIqH,OAAO,GAAG7D,QAAQ,CAAC,cAAD,CAAR,CAAyB7B,SAAzB,EAAoC3B,OAApC,CAAd;MAEA,IAAIoF,QAAQ,GAAG5G,OAAO,CAAC+G,aAAR,CAAsB,iBAAtB,EAAyC;QACtDC,YAAY,EAAE,GADwC;QAEtDC,YAAY,EAAC,GAFyC;QAGtDC,cAAc,EAAE1F,OAAO,CAAC4B,KAH8B;QAItD+D,eAAe,EAAE3F,OAAO,CAAC6B,MAJ6B;QAKtD+D,QAAQ,EAAE;UACRC,EAAE,EAAE,IADI;UAERC,EAAE,EAAE;QAFI;MAL4C,CAAzC,CAAf;MAWA;;MAAmB3C,QAAQ,CAACxB,SAAD,EAAYyD,QAAZ,EAAsB;QAC/C5F,WAAW,EAAE,CADkC;QAE/CD,IAAI,EAAEvC,cAAc,CAACgD,OAAD,EAAUlB,kBAAV,CAF2B;QAG/C+B,MAAM,EAAE7D,cAAc,CAACgD,OAAD,EAAUlB,kBAAV;MAHyB,CAAtB,CAAR;MAMnB,OAAOuI,OAAP;IACD,CAntB4B;IAotB7B,wBAAwB,UAAS1F,SAAT,EAAoB3B,OAApB,EAA6B;MACnD,IAAIqH,OAAO,GAAG7D,QAAQ,CAAC,cAAD,CAAR,CAAyB7B,SAAzB,EAAoC3B,OAApC,CAAd;MAEA,IAAIoF,QAAQ,GAAG5G,OAAO,CAAC+G,aAAR,CAAsB,kBAAtB,EAA0C;QACvDC,YAAY,EAAE,GADyC;QAEvDC,YAAY,EAAC,GAF0C;QAGvDC,cAAc,EAAE1F,OAAO,CAAC4B,KAH+B;QAIvD+D,eAAe,EAAE3F,OAAO,CAAC6B,MAJ8B;QAKvD+D,QAAQ,EAAE;UACRC,EAAE,EAAE,IADI;UAERC,EAAE,EAAE;QAFI;MAL6C,CAA1C,CAAf;MAWA;;MAAoB3C,QAAQ,CAACxB,SAAD,EAAYyD,QAAZ,EAAsB;QAChD5F,WAAW,EAAE,CADmC;QAEhDD,IAAI,EAAEvC,cAAc,CAACgD,OAAD,EAAUlB,kBAAV,CAF4B;QAGhD+B,MAAM,EAAE7D,cAAc,CAACgD,OAAD,EAAUlB,kBAAV;MAH0B,CAAtB,CAAR;MAMpB,OAAOuI,OAAP;IACD,CAzuB4B;IA0uB7B,0BAA0B,UAAS1F,SAAT,EAAoB3B,OAApB,EAA6B;MAErD,IAAIuE,QAAQ,GAAG7H,WAAW,CAACsD,OAAD,CAA1B;MAEA,IAAIqH,OAAO,GAAG7D,QAAQ,CAAC,cAAD,CAAR,CAAyB7B,SAAzB,EAAoC3B,OAApC,CAAd;MAEA;;MAAwB0B,UAAU,CAACC,SAAD,EAAY3B,OAAO,CAAC4B,KAApB,EAA2B5B,OAAO,CAAC6B,MAAnC,EAA2C7B,OAAO,CAAC6B,MAAR,GAAiB,IAA5D,EAAkE;QAClGrC,WAAW,EAAE,CADqF;QAElGD,IAAI,EAAE,MAF4F;QAGlGsB,MAAM,EAAE7D,cAAc,CAACgD,OAAD,EAAUlB,kBAAV;MAH4E,CAAlE,CAAV;MAMxB,IAAI8B,IAAI,GAAG2D,QAAQ,CAACgD,gBAApB;MACA,IAAId,WAAW,GAAG,CAAC,CAAClC,QAAQ,CAACkC,WAA7B;;MAEA,SAASe,SAAT,GAAqB;QAEnB,IAAIpC,QAAQ,GAAG5G,OAAO,CAAC+G,aAAR,CAAsB,qBAAtB,EAA6C;UAC1DC,YAAY,EAAE,IAD4C;UAE1DC,YAAY,EAAE,IAF4C;UAG1DC,cAAc,EAAE1F,OAAO,CAAC4B,KAHkC;UAI1D+D,eAAe,EAAE3F,OAAO,CAAC6B,MAJiC;UAK1D+D,QAAQ,EAAE;YACRC,EAAE,EAAE,IADI;YAERC,EAAE,EAAE;UAFI;QALgD,CAA7C,CAAf;QAWA,IAAIxG,KAAK,GAAG;UACVE,WAAW,EAAE,CADH;UAEVD,IAAI,EAAExC,YAAY,CAACiD,OAAD,EAAU,MAAV,CAFR;UAGVa,MAAM,EAAE7D,cAAc,CAACgD,OAAD,EAAUlB,kBAAV;QAHZ,CAAZ;QAMA;;QAAiBqE,QAAQ,CAACxB,SAAD,EAAYyD,QAAZ,EAAsB9F,KAAtB,CAAR;MAClB;;MAED,IAAIsB,IAAI,KAAK,UAAb,EAAyB;QAEvB,IAAIwE,QAAQ,GAAG5G,OAAO,CAAC+G,aAAR,CAAsB,kBAAtB,EAA0C;UACvDC,YAAY,EAAE,GADyC;UAEvDC,YAAY,EAAC,GAF0C;UAGvDC,cAAc,EAAE1F,OAAO,CAAC4B,KAH+B;UAIvD+D,eAAe,EAAE3F,OAAO,CAAC6B,MAJ8B;UAKvD+D,QAAQ,EAAE;YACRC,EAAE,EAAE,KADI;YAERC,EAAE,EAAE;UAFI;QAL6C,CAA1C,CAAf;QAWA,IAAI2B,YAAY,GAAGtE,QAAQ,CAACxB,SAAD,EAAYyD,QAAZ,CAA3B;QACA9H,OAAO,CAACmK,YAAD,EAAe;UACpBjI,WAAW,EAAE,CADO;UAEpBD,IAAI,EAAE;QAFc,CAAf,CAAP;MAID,CAlBD,MAkBO,IAAIqB,IAAI,KAAK,WAAb,EAA0B;QAE/B,IAAI,CAAC6F,WAAL,EAAkB;UAChB,IAAIiB,WAAW,GAAGhG,UAAU,CAACC,SAAD,EAAY3B,OAAO,CAAC4B,KAApB,EAA2B5B,OAAO,CAAC6B,MAAnC,EAA2C7B,OAAO,CAAC6B,MAAR,GAAiB,IAA5D,CAA5B;UACAvE,OAAO,CAACoK,WAAD,EAAc;YACnBlI,WAAW,EAAE,CADM;YAEnBD,IAAI,EAAE,MAFa;YAGnBsB,MAAM,EAAE7D,cAAc,CAACgD,OAAD,EAAUlB,kBAAV;UAHH,CAAd,CAAP;QAKD;;QAED0I,SAAS;MACV;;MAGD,OAAOH,OAAP;IACD,CAjzB4B;IAkzB7B,gBAAgB,UAAS1F,SAAT,EAAoB3B,OAApB,EAA6B;MAC3C,IAAIV,KAAK,GAAG;QACVC,IAAI,EAAExC,YAAY,CAACiD,OAAD,EAAUnB,gBAAV,CADR;QAEVkD,WAAW,EAAE7D,oBAFH;QAGV2C,MAAM,EAAE7D,cAAc,CAACgD,OAAD,EAAUlB,kBAAV;MAHZ,CAAZ;MAMA,OAAOyD,WAAW,CAACZ,SAAD,EAAY3B,OAAO,CAAC4B,KAApB,EAA2B5B,OAAO,CAAC6B,MAAnC,EAA2CvC,KAA3C,CAAlB;IACD,CA1zB4B;IA2zB7B,qBAAqB,UAASqC,SAAT,EAAoB3B,OAApB,EAA6B;MAChD,IAAIoF,QAAQ,GAAGF,wBAAwB,CAAClF,OAAD,CAAvC;MAEA,IAAIT,IAAI,GAAGxC,YAAY,CAACiD,OAAD,EAAUnB,gBAAV,CAAvB;MAAA,IACIgC,MAAM,GAAG7D,cAAc,CAACgD,OAAD,EAAUlB,kBAAV,CAD3B;MAGA,IAAIQ,KAAK,GAAG;QACVqI,cAAc,EAAE,OADN;QAEVC,SAAS,EAAE7H,MAAM,CAAC,kBAAD,EAAqBR,IAArB,EAA2BsB,MAA3B,CAFP;QAGVA,MAAM,EAAE7D,cAAc,CAACgD,OAAD,EAAUlB,kBAAV;MAHZ,CAAZ;MAMA,IAAIsE,IAAI,GAAGD,QAAQ,CAACxB,SAAD,EAAYyD,QAAZ,EAAsB9F,KAAtB,CAAnB;MAEA,IAAIuI,YAAY,GAAGnL,WAAW,CAACsD,OAAD,CAA9B;MAEA,IAAI8H,MAAJ;;MAEA,IAAI9H,OAAO,CAAC8H,MAAZ,EAAoB;QAClBA,MAAM,GAAG9H,OAAO,CAAC8H,MAAR,CAAeC,cAAxB,CADkB,CAGlB;;QACA,IAAIF,YAAY,CAACG,mBAAb,IAAoCF,MAAM,CAACG,WAAP,CAAmB,eAAnB,CAAxC,EAA6E;UAC3E3K,OAAO,CAAC8F,IAAD,EAAO;YACZ8E,WAAW,EAAEnI,MAAM,CAAC,yBAAD,EAA4BR,IAA5B,EAAkCsB,MAAlC;UADP,CAAP,CAAP;QAGD,CARiB,CAUlB;;;QACA,IAAIiH,MAAM,CAACK,OAAP,KAAmBL,MAAM,CAACG,WAAP,CAAmB,cAAnB,KAAsCH,MAAM,CAACG,WAAP,CAAmB,eAAnB,CAAzD,KACAH,MAAM,CAACK,OAAP,KAAmBN,YADvB,EACqC;UACnCvK,OAAO,CAAC8F,IAAD,EAAO;YACZ8E,WAAW,EAAEnI,MAAM,CAAC,iCAAD,EAAoCR,IAApC,EAA0CsB,MAA1C;UADP,CAAP,CAAP;QAGD;MACF;;MAED,OAAOuC,IAAP;IACD,CAj2B4B;IAk2B7B,oBAAoB,UAASzB,SAAT,EAAoB3B,OAApB,EAA6BV,KAA7B,EAAoC;MAEtD,IAAIiF,QAAQ,GAAG7H,WAAW,CAACsD,OAAD,CAA1B;MAEA,IAAIT,IAAI,GAAGxC,YAAY,CAACiD,OAAD,EAAUnB,gBAAV,CAAvB;MAAA,IACIgC,MAAM,GAAG7D,cAAc,CAACgD,OAAD,EAAUlB,kBAAV,CAD3B;MAGAQ,KAAK,GAAGxD,MAAM,CAAC;QACb4D,eAAe,EAAE,QADJ;QAEbD,aAAa,EAAE,OAFF;QAGbkI,cAAc,EAAE,OAHH;QAIb9G,MAAM,EAAE7D,cAAc,CAACgD,OAAD,EAAUlB,kBAAV;MAJT,CAAD,EAKXQ,KAAK,IAAI,EALE,CAAd;;MAOA,IAAIiF,QAAQ,CAAC6D,oBAAT,KAAkC,KAAlC,IACA7D,QAAQ,CAAC6D,oBAAT,KAAkC,MADtC,EAC8C;QAC5C9I,KAAK,CAACsI,SAAN,GAAkB7H,MAAM,CAAC,iBAAD,EAAoBR,IAApB,EAA0BsB,MAA1B,CAAxB;MACD;;MAED,IAAI0D,QAAQ,CAAC6D,oBAAT,KAAkC,MAAtC,EAA8C;QAC5C9I,KAAK,CAAC4I,WAAN,GAAoBnI,MAAM,CAAC,mBAAD,EAAsBR,IAAtB,EAA4BsB,MAA5B,CAA1B;MACD;;MAED,OAAOmC,QAAQ,CAACrB,SAAD,EAAY3B,OAAO,CAACiD,SAApB,EAA+B3D,KAA/B,CAAf;IACD,CA13B4B;IA23B7B,6BAA6B,UAASqC,SAAT,EAAoB3B,OAApB,EAA6B;MACxD,IAAIT,IAAI,GAAGxC,YAAY,CAACiD,OAAD,EAAUnB,gBAAV,CAAvB;MAAA,IACIgC,MAAM,GAAG7D,cAAc,CAACgD,OAAD,EAAUlB,kBAAV,CAD3B;MAGA,OAAO0E,QAAQ,CAAC,kBAAD,CAAR,CAA6B7B,SAA7B,EAAwC3B,OAAxC,EAAiD;QACtD4H,SAAS,EAAE7H,MAAM,CAAC,iBAAD,EAAoBR,IAApB,EAA0BsB,MAA1B;MADqC,CAAjD,CAAP;IAGD,CAl4B4B;IAm4B7B,8BAA8B,UAASc,SAAT,EAAoB3B,OAApB,EAA6B;MACzD,IAAIT,IAAI,GAAGxC,YAAY,CAACiD,OAAD,EAAUnB,gBAAV,CAAvB;MAAA,IACIgC,MAAM,GAAG7D,cAAc,CAACgD,OAAD,EAAUlB,kBAAV,CAD3B;MAGA,OAAO0E,QAAQ,CAAC,kBAAD,CAAR,CAA6B7B,SAA7B,EAAwC3B,OAAxC,EAAiD;QACtD4H,SAAS,EAAE7H,MAAM,CAAC,iBAAD,EAAoBR,IAApB,EAA0BsB,MAA1B;MADqC,CAAjD,CAAP;IAGD,CA14B4B;IA24B7B,oBAAoB,UAASc,SAAT,EAAoB3B,OAApB,EAA6B;MAE/C,IAAIuE,QAAQ,GAAG7H,WAAW,CAACsD,OAAD,CAA1B;MAAA,IACIqI,EAAE,GAAG5L,KAAK,CAACuD,OAAD,CADd;MAGA,IAAIT,IAAI,GAAGxC,YAAY,CAACiD,OAAD,EAAUnB,gBAAV,CAAvB;MAAA,IACIgC,MAAM,GAAG7D,cAAc,CAACgD,OAAD,EAAUlB,kBAAV,CAD3B;MAGA,IAAIsG,QAAQ,GAAGF,wBAAwB,CAAClF,OAAD,CAAvC;MAEA,IAAIV,KAAK,GAAG;QACVsI,SAAS,EAAE7H,MAAM,CAAC,iBAAD,EAAoBR,IAApB,EAA0BsB,MAA1B,CADP;QAEVqH,WAAW,EAAEnI,MAAM,CAAC,mBAAD,EAAsBR,IAAtB,EAA4BsB,MAA5B,CAFT;QAGVnB,eAAe,EAAE,QAHP;QAIVD,aAAa,EAAE,OAJL;QAKVkI,cAAc,EAAE,OALN;QAMVnI,WAAW,EAAE,OANH;QAOVqB,MAAM,EAAE7D,cAAc,CAACgD,OAAD,EAAUlB,kBAAV;MAPZ,CAAZ;MAUA,IAAIsE,IAAI,GAAGD,QAAQ,CAACxB,SAAD,EAAYyD,QAAZ,EAAsB9F,KAAtB,CAAnB;;MAEA,IAAIiF,QAAQ,CAAC+D,UAAb,EAAyB;QACvB,IAAIC,QAAQ,GAAGnF,IAAI,CAACoF,gBAAL,CAAsBpF,IAAI,CAACqF,cAAL,KAAwB,CAA9C,CAAf;QAEA,IAAIC,cAAc,GAAGlK,OAAO,CAAC+G,aAAR,CAAsB,qBAAtB,EAA6C;UAChEc,MAAM,EAAE;YACNzG,CAAC,EAAE2I,QAAQ,CAAC3I,CADN;YAENC,CAAC,EAAE0I,QAAQ,CAAC1I;UAFN;QADwD,CAA7C,CAArB;QAOA,IAAI8I,YAAY,GAAG;UAAEnJ,WAAW,EAAE;QAAf,CAAnB;;QAEA,IAAI6I,EAAE,CAACO,kBAAH,KAA0B,YAA9B,EAA4C;UAC1CD,YAAY,CAACpJ,IAAb,GAAoB,OAApB;UACAoJ,YAAY,CAAC9H,MAAb,GAAsB,OAAtB;QACD,CAHD,MAGO;UACL8H,YAAY,CAACpJ,IAAb,GAAoB,MAApB;UACAoJ,YAAY,CAAC9H,MAAb,GAAsB,OAAtB;QACD;;QAEDsC,QAAQ,CAACxB,SAAD,EAAY+G,cAAZ,EAA4BC,YAA5B,CAAR;MACD;;MAED,OAAOvF,IAAP;IACD,CAz7B4B;IA07B7B,mBAAmB,UAASzB,SAAT,EAAoB3B,OAApB,EAA6B;MAC9C,IAAIoF,QAAQ,GAAG5G,OAAO,CAAC+G,aAAR,CAAsB,kBAAtB,EAA0C;QACvDC,YAAY,EAAE,CADyC;QAEvDC,YAAY,EAAE,CAFyC;QAGvDC,cAAc,EAAE1F,OAAO,CAAC4B,KAH+B;QAIvD+D,eAAe,EAAE3F,OAAO,CAAC6B,MAJ8B;QAKvD+D,QAAQ,EAAE;UACRC,EAAE,EAAE,KADI;UAERC,EAAE,EAAE;QAFI;MAL6C,CAA1C,CAAf;MAWA,IAAI+C,aAAa,GAAG1F,QAAQ,CAACxB,SAAD,EAAYyD,QAAZ,EAAsB;QAChD7F,IAAI,EAAExC,YAAY,CAACiD,OAAD,EAAUnB,gBAAV,CAD8B;QAEhDkD,WAAW,EAAE7D,oBAFmC;QAGhD2C,MAAM,EAAE7D,cAAc,CAACgD,OAAD,EAAUlB,kBAAV;MAH0B,CAAtB,CAA5B;MAMA,IAAIyF,QAAQ,GAAG7H,WAAW,CAACsD,OAAD,CAA1B;;MAEA,IAAIxD,YAAY,CAAC+H,QAAD,CAAhB,EAA4B;QAC1BuE,wBAAwB,CAACnH,SAAD,EAAY3B,OAAZ,CAAxB;MACD;;MAED,OAAO6I,aAAP;IACD,CAn9B4B;IAo9B7B,4BAA4BvF,EAAE,CAAC,iBAAD,CAp9BD;IAq9B7B,kBAAkB,UAAS3B,SAAT,EAAoB3B,OAApB,EAA6B;MAE7C,IAAI+I,aAAa,GAAGvK,OAAO,CAACwK,UAAR,CAAmB,YAAnB,CAApB,CAF6C,CAI7C;;MACA,IAAIH,aAAa,GAAGrF,QAAQ,CAAC,iBAAD,CAAR,CAA4B7B,SAA5B,EAAuC3B,OAAvC,CAApB;MAEA;;MAAuBmD,QAAQ,CAACxB,SAAD,EAAYoH,aAAZ,EAA2B;QAAEvJ,WAAW,EAAE;MAAf,CAA3B,CAAR;MAEvB,OAAOqJ,aAAP;IACD,CA/9B4B;IAg+B7B,mBAAmB,UAASlH,SAAT,EAAoB3B,OAApB,EAA6B;MAC9C,IAAI+I,aAAa,GAAGvK,OAAO,CAACwK,UAAR,CAAmB,YAAnB,CAApB,CAD8C,CAG9C;;MACA,IAAIH,aAAa,GAAGrF,QAAQ,CAAC,iBAAD,CAAR,CAA4B7B,SAA5B,EAAuC3B,OAAvC,CAApB;MAEA;;MAAwBmD,QAAQ,CAACxB,SAAD,EAAYoH,aAAZ,EAA2B;QACzDvJ,WAAW,EAAE,CAD4C;QAEzDD,IAAI,EAAE;MAFmD,CAA3B,CAAR;MAKxB,OAAOsJ,aAAP;IACD,CA5+B4B;IA6+B7B,2BAA2B,UAASlH,SAAT,EAAoB3B,OAApB,EAA6B;MACtD,IAAIiJ,eAAe,GAAGzK,OAAO,CAAC+G,aAAR,CAAsB,YAAtB,EAAoC;QACxDC,YAAY,EAAE,CAD0C;QAExDC,YAAY,EAAE,CAF0C;QAGxDC,cAAc,EAAE1F,OAAO,CAAC4B,KAHgC;QAIxD+D,eAAe,EAAE3F,OAAO,CAAC6B,MAJ+B;QAKxD+D,QAAQ,EAAE;UACRC,EAAE,EAAE,CADI;UAERC,EAAE,EAAE;QAFI;MAL8C,CAApC,CAAtB;MAWA,IAAIoD,YAAY,GAAG/F,QAAQ,CAACxB,SAAD,EAAYsH,eAAZ,EAA6B;QACtDzJ,WAAW,EAAE,CADyC;QAEtDD,IAAI,EAAExC,YAAY,CAACiD,OAAD,EAAUnB,gBAAV,CAFoC;QAGtDkD,WAAW,EAAE7D,oBAHyC;QAItD2C,MAAM,EAAE7D,cAAc,CAACgD,OAAD,EAAUlB,kBAAV;MAJgC,CAA7B,CAA3B;MAOA,OAAOoK,YAAP;IACD,CAjgC4B;IAkgC7B,sBAAsB,UAASvH,SAAT,EAAoB3B,OAApB,EAA6B;MAEjD,IAAIuE,QAAQ,GAAG7H,WAAW,CAACsD,OAAD,CAA1B;MAAA,IACImJ,MAAM,GAAG5E,QAAQ,CAAC6E,cADtB;MAGA,IAAI9J,KAAK,GAAG;QACVE,WAAW,EAAE,CADH;QAEVD,IAAI,EAAExC,YAAY,CAACiD,OAAD,EAAUnB,gBAAV,CAFR;QAGVgC,MAAM,EAAE7D,cAAc,CAACgD,OAAD,EAAUlB,kBAAV;MAHZ,CAAZ;;MAMA,IAAI,CAACqK,MAAL,EAAa;QACX7J,KAAK,CAACI,eAAN,GAAwB,GAAxB;QACAJ,KAAK,CAACG,aAAN,GAAsB,OAAtB;MACD,CAdgD,CAgBjD;;;MACA,IAAI4J,UAAU,GAAGvN,MAAM,CAAC,EAAD,EAAKwD,KAAL,EAAY;QACjCyC,WAAW,EAAE;MADoB,CAAZ,CAAvB,CAjBiD,CAqBjD;;MACA,IAAIgF,UAAU,GAAGjL,MAAM,CAAC,EAAD,EAAKwD,KAAL,EAAY;QACjCC,IAAI,EAAE;MAD2B,CAAZ,CAAvB;MAIA,IAAI0G,KAAK,GAAGzC,QAAQ,CAAC,YAAD,CAAR,CAAuB7B,SAAvB,EAAkC3B,OAAlC,EAA2CqJ,UAA3C,CAAZ;MAEA;;MAAiB3H,UAAU,CAACC,SAAD,EAAY3B,OAAO,CAAC4B,KAApB,EAA2B5B,OAAO,CAAC6B,MAAnC,EAA2C5D,gBAA3C,EAA6D8I,UAA7D,CAAV;MAEjBtD,kBAAkB,CAACzD,OAAD,EAAU2B,SAAV,CAAlB;MAEA,OAAOsE,KAAP;IACD,CAniC4B;IAoiC7B,cAAc,UAAStE,SAAT,EAAoB3B,OAApB,EAA6B;MAEzC,IAAIsJ,KAAK,GAAGnH,QAAQ,CAACR,SAAD,EAAY3B,OAAO,CAAC4B,KAApB,EAA2B5B,OAAO,CAAC6B,MAAnC,EAA2C7D,kBAA3C,EAA+D;QACjF6C,MAAM,EAAE7D,cAAc,CAACgD,OAAD,EAAUlB,kBAAV,CAD2D;QAEjFU,WAAW,EAAE,CAFoE;QAGjFE,eAAe,EAAE,SAHgE;QAIjFH,IAAI,EAAE,MAJ2E;QAKjFgK,aAAa,EAAE;MALkE,CAA/D,CAApB;MAQA,OAAOD,KAAP;IACD,CA/iC4B;IAgjC7B,SAAS,UAAS3H,SAAT,EAAoB3B,OAApB,EAA6B;MACpC,OAAO4E,mBAAmB,CAACjD,SAAD,EAAY3B,OAAZ,CAA1B;IACD,CAljC4B;IAmjC7B,uBAAuB,UAAS2B,SAAT,EAAoB3B,OAApB,EAA6B;MAClD,IAAI2E,KAAK,GAAG;QACV,QAAQ,MADE;QAEV,UAAU;MAFA,CAAZ;MAKA,IAAI6E,WAAW,GAAGrH,QAAQ,CAACR,SAAD,EAAY3B,OAAO,CAAC4B,KAApB,EAA2B5B,OAAO,CAAC6B,MAAnC,EAA2C,CAA3C,EAA8C,CAA9C,EAAiD8C,KAAjD,CAA1B;MAEA,IAAI8E,YAAY,GAAGjL,OAAO,CAAC+G,aAAR,CAAsB,iBAAtB,EAAyC;QAC1DC,YAAY,EAAE,CAD4C;QAE1DC,YAAY,EAAE,CAF4C;QAG1DC,cAAc,EAAE1F,OAAO,CAAC4B,KAHkC;QAI1D+D,eAAe,EAAE3F,OAAO,CAAC6B,MAJiC;QAK1D+D,QAAQ,EAAE;UACRC,EAAE,EAAE,GADI;UAERC,EAAE,EAAE;QAFI;MALgD,CAAzC,CAAnB;MAWA3C,QAAQ,CAACxB,SAAD,EAAY8H,YAAZ,EAA0B;QAChC5I,MAAM,EAAE7D,cAAc,CAACgD,OAAD,EAAUlB,kBAAV;MADU,CAA1B,CAAR;MAIA,IAAIoF,IAAI,GAAGxH,WAAW,CAACsD,OAAD,CAAX,CAAqBkE,IAArB,IAA6B,EAAxC;MACAH,WAAW,CAACpC,SAAD,EAAYuC,IAAZ,EAAkB;QAC3BO,GAAG,EAAEzE,OADsB;QAE3BsE,KAAK,EAAE,UAFoB;QAG3BI,OAAO,EAAE,CAHkB;QAI3BC,KAAK,EAAE;UACLpF,IAAI,EAAEvC,cAAc,CAACgD,OAAD,EAAUlB,kBAAV;QADf;MAJoB,CAAlB,CAAX;MASA,OAAO0K,WAAP;IACD,CArlC4B;IAslC7B,iCAAiC,UAAS7H,SAAT,EAAoB3B,OAApB,EAA6B;MAC5D,IAAI0J,UAAU,GAAGlL,OAAO,CAAC+G,aAAR,CAAsB,iBAAtB,EAAyC;QACxDC,YAAY,EAAE,CAD0C;QAExDC,YAAY,EAAE,CAF0C;QAGxDC,cAAc,EAAE1F,OAAO,CAAC4B,KAHgC;QAIxD+D,eAAe,EAAE3F,OAAO,CAAC6B,MAJ+B;QAKxD+D,QAAQ,EAAE;UACRC,EAAE,EAAI7F,OAAO,CAAC4B,KAAR,GAAgB,CAAjB,GAAsB5B,OAAO,CAAC4B,KAD3B;UAERkE,EAAE,EAAE,CAAC9F,OAAO,CAAC6B,MAAR,GAAiB,EAAlB,IAAwB7B,OAAO,CAAC6B;QAF5B;MAL8C,CAAzC,CAAjB;MAWAwB,UAAU,CAAC,0BAAD,EAA6B1B,SAA7B,EAAwC+H,UAAxC,EAAoD;QAC5DlK,WAAW,EAAE,CAD+C;QAE5DD,IAAI,EAAExC,YAAY,CAACiD,OAAD,EAAUnB,gBAAV,CAF0C;QAG5DgC,MAAM,EAAE7D,cAAc,CAACgD,OAAD,EAAUlB,kBAAV;MAHsC,CAApD,CAAV;IAKD,CAvmC4B;IAwmC7B,oBAAoB,UAAS6C,SAAT,EAAoB3B,OAApB,EAA6B;MAC/C,IAAI2J,UAAU,GAAGxH,QAAQ,CAACR,SAAD,EAAY,EAAZ,EAAgB,EAAhB,EAAoB,CAApB,EAAuB;QAC9CnC,WAAW,EAAE,CADiC;QAE9CD,IAAI,EAAExC,YAAY,CAACiD,OAAD,EAAUnB,gBAAV,CAF4B;QAG9CgC,MAAM,EAAE7D,cAAc,CAACgD,OAAD,EAAUlB,kBAAV;MAHwB,CAAvB,CAAzB,CAD+C,CAO/C;MACA;;MACAjB,SAAS,CAAC8L,UAAD,EAAa3J,OAAO,CAAC4B,KAAR,GAAgB,CAAhB,GAAoB,GAAjC,EAAsC5B,OAAO,CAAC6B,MAAR,GAAiB,EAAvD,CAAT;MAEA,IAAI6H,UAAU,GAAGlL,OAAO,CAAC+G,aAAR,CAAsB,oBAAtB,EAA4C;QAC3DC,YAAY,EAAE,GAD6C;QAE3DC,YAAY,EAAE,GAF6C;QAG3DC,cAAc,EAAE1F,OAAO,CAAC4B,KAHmC;QAI3D+D,eAAe,EAAE3F,OAAO,CAAC6B,MAJkC;QAK3D+D,QAAQ,EAAE;UACRC,EAAE,EAAE,CAAC7F,OAAO,CAAC4B,KAAR,GAAgB,CAAhB,GAAoB,GAArB,IAA4B5B,OAAO,CAAC4B,KADhC;UAERkE,EAAE,EAAE,CAAC9F,OAAO,CAAC6B,MAAR,GAAiB,EAAlB,IAAwB7B,OAAO,CAAC6B;QAF5B;MALiD,CAA5C,CAAjB;MAWAwB,UAAU,CAAC,aAAD,EAAgB1B,SAAhB,EAA2B+H,UAA3B,EAAuC;QAC/CnK,IAAI,EAAExC,YAAY,CAACiD,OAAD,EAAUnB,gBAAV,CAD6B;QAE/CgC,MAAM,EAAE7D,cAAc,CAACgD,OAAD,EAAUlB,kBAAV;MAFyB,CAAvC,CAAV;IAID,CAloC4B;IAmoC7B,kBAAkB,UAAS6C,SAAT,EAAoB3B,OAApB,EAA6B4F,QAA7B,EAAuC;MACvD,IAAI8D,UAAU,GAAGlL,OAAO,CAAC+G,aAAR,CAAsB,iBAAtB,EAAyC;QACxDC,YAAY,EAAE,CAD0C;QAExDC,YAAY,EAAE,CAF0C;QAGxDC,cAAc,EAAE1F,OAAO,CAAC4B,KAHgC;QAIxD+D,eAAe,EAAE3F,OAAO,CAAC6B,MAJ+B;QAKxD+D,QAAQ,EAAE;UACRC,EAAE,EAAG,CAAC7F,OAAO,CAAC4B,KAAR,GAAgB,CAAhB,GAAoBgE,QAAQ,CAACgE,QAA9B,IAA0C5J,OAAO,CAAC4B,KAD/C;UAERkE,EAAE,EAAE,CAAC9F,OAAO,CAAC6B,MAAR,GAAiB,EAAlB,IAAwB7B,OAAO,CAAC6B;QAF5B;MAL8C,CAAzC,CAAjB;MAWAwB,UAAU,CAAC,UAAD,EAAa1B,SAAb,EAAwB+H,UAAxB,EAAoC;QAC5CnK,IAAI,EAAExC,YAAY,CAACiD,OAAD,EAAUnB,gBAAV,CAD0B;QAE5CgC,MAAM,EAAE7D,cAAc,CAACgD,OAAD,EAAUlB,kBAAV;MAFsB,CAApC,CAAV;IAID,CAnpC4B;IAopC7B,oBAAoB,UAAS6C,SAAT,EAAoB3B,OAApB,EAA6B4F,QAA7B,EAAuC;MACzD,IAAI8D,UAAU,GAAGlL,OAAO,CAAC+G,aAAR,CAAsB,mBAAtB,EAA2C;QAC1DC,YAAY,EAAE,CAD4C;QAE1DC,YAAY,EAAE,CAF4C;QAG1DC,cAAc,EAAE1F,OAAO,CAAC4B,KAHkC;QAI1D+D,eAAe,EAAE3F,OAAO,CAAC6B,MAJiC;QAK1D+D,QAAQ,EAAE;UACRC,EAAE,EAAG,CAAC7F,OAAO,CAAC4B,KAAR,GAAgB,CAAhB,GAAoBgE,QAAQ,CAACiE,GAA9B,IAAqC7J,OAAO,CAAC4B,KAD1C;UAERkE,EAAE,EAAE,CAAC9F,OAAO,CAAC6B,MAAR,GAAiB,EAAlB,IAAwB7B,OAAO,CAAC6B;QAF5B;MALgD,CAA3C,CAAjB;MAWAwB,UAAU,CAAC,YAAD,EAAe1B,SAAf,EAA0B+H,UAA1B,EAAsC;QAC9CnK,IAAI,EAAExC,YAAY,CAACiD,OAAD,EAAUnB,gBAAV,CAD4B;QAE9CgC,MAAM,EAAE7D,cAAc,CAACgD,OAAD,EAAUlB,kBAAV;MAFwB,CAAtC,CAAV;IAID,CApqC4B;IAqqC7B,sBAAsB,UAAS6C,SAAT,EAAoB3B,OAApB,EAA6B4F,QAA7B,EAAuC;MAC3D,IAAIkE,UAAU,GAAGtL,OAAO,CAAC+G,aAAR,CAAsB,qBAAtB,EAA6C;QAC5DC,YAAY,EAAE,CAD8C;QAE5DC,YAAY,EAAE,CAF8C;QAG5DC,cAAc,EAAE1F,OAAO,CAAC4B,KAHoC;QAI5D+D,eAAe,EAAE3F,OAAO,CAAC6B,MAJmC;QAK5D+D,QAAQ,EAAE;UACRC,EAAE,EAAG,CAAC7F,OAAO,CAAC4B,KAAR,GAAgB,CAAhB,GAAoBgE,QAAQ,CAACmE,YAA9B,IAA8C/J,OAAO,CAAC4B,KADnD;UAERkE,EAAE,EAAE,CAAC9F,OAAO,CAAC6B,MAAR,GAAiB,EAAlB,IAAwB7B,OAAO,CAAC6B;QAF5B;MALkD,CAA7C,CAAjB;MAWAwB,UAAU,CAAC,cAAD,EAAiB1B,SAAjB,EAA4BmI,UAA5B,EAAwC;QAChDtK,WAAW,EAAE,CADmC;QAEhDD,IAAI,EAAExC,YAAY,CAACiD,OAAD,EAAUnB,gBAAV,CAF8B;QAGhDgC,MAAM,EAAE7D,cAAc,CAACgD,OAAD,EAAUlB,kBAAV;MAH0B,CAAxC,CAAV;IAKD,CAtrC4B;IAurC7B,cAAc,UAAS6C,SAAT,EAAoB3B,OAApB,EAA6B4F,QAA7B,EAAuC;MACnD,IAAI8D,UAAU,GAAGlL,OAAO,CAAC+G,aAAR,CAAsB,aAAtB,EAAqC;QACpDC,YAAY,EAAE,CADsC;QAEpDC,YAAY,EAAE,CAFsC;QAGpDC,cAAc,EAAE1F,OAAO,CAAC4B,KAH4B;QAIpD+D,eAAe,EAAE3F,OAAO,CAAC6B,MAJ2B;QAKpD+D,QAAQ,EAAE;UACRC,EAAE,EAAG,CAAC7F,OAAO,CAAC4B,KAAR,GAAgB,CAAhB,GAAoBgE,QAAQ,CAACoE,IAA9B,IAAsChK,OAAO,CAAC4B,KAD3C;UAERkE,EAAE,EAAE,CAAC9F,OAAO,CAAC6B,MAAR,GAAiB,CAAlB,IAAuB7B,OAAO,CAAC6B;QAF3B;MAL0C,CAArC,CAAjB;MAWAwB,UAAU,CAAC,MAAD,EAAS1B,SAAT,EAAoB+H,UAApB,EAAgC;QACxClK,WAAW,EAAE,CAD2B;QAExCD,IAAI,EAAExC,YAAY,CAACiD,OAAD,EAAUnB,gBAAV,CAFsB;QAGxCgC,MAAM,EAAE7D,cAAc,CAACgD,OAAD,EAAUlB,kBAAV,CAHkB;QAIxCW,aAAa,EAAE,OAJyB;QAKxCwK,gBAAgB,EAAE;MALsB,CAAhC,CAAV;IAOD,CA1sC4B;IA2sC7B,eAAe,UAAStI,SAAT,EAAoB3B,OAApB,EAA6B4F,QAA7B,EAAuC;MACpD,IAAI8D,UAAU,GAAGlL,OAAO,CAAC+G,aAAR,CAAsB,cAAtB,EAAsC;QACrDC,YAAY,EAAE,CADuC;QAErDC,YAAY,EAAE,CAFuC;QAGrDC,cAAc,EAAE1F,OAAO,CAAC4B,KAH6B;QAIrD+D,eAAe,EAAE3F,OAAO,CAAC6B,MAJ4B;QAKrD+D,QAAQ,EAAE;UACRC,EAAE,EAAG,CAAC7F,OAAO,CAAC4B,KAAR,GAAgB,CAAhB,GAAoBgE,QAAQ,CAACsE,KAA9B,IAAuClK,OAAO,CAAC4B,KAD5C;UAERkE,EAAE,EAAE,CAAC9F,OAAO,CAAC6B,MAAR,GAAiB,EAAlB,IAAwB7B,OAAO,CAAC6B;QAF5B;MAL2C,CAAtC,CAAjB;MAWAwB,UAAU,CAAC,OAAD,EAAU1B,SAAV,EAAqB+H,UAArB,EAAiC;QACzClK,WAAW,EAAE,CAD4B;QAEzCD,IAAI,EAAEvC,cAAc,CAACgD,OAAD,EAAUlB,kBAAV,CAFqB;QAGzC+B,MAAM,EAAE7D,cAAc,CAACgD,OAAD,EAAUlB,kBAAV;MAHmB,CAAjC,CAAV;IAKD;EA5tC4B,CAA/B;;EA+tCA,SAASoH,iBAAT,CAA2BvE,SAA3B,EAAsC3B,OAAtC,EAA+CmK,WAA/C,EAA4D;IAC1D,IAAIC,GAAG,GAAG1N,WAAW,CAACsD,OAAD,CAArB;IAEA,IAAIqK,UAAU,GAAGF,WAAW,IAAIA,WAAW,CAACG,OAAZ,CAAoB,kBAApB,MAA4C,CAAC,CAA7E;IACA,IAAI1E,QAAJ;;IAEA,IAAIyE,UAAJ,EAAgB;MACdzE,QAAQ,GAAG;QACTiE,GAAG,EAAE,CAAC,EADG;QAETD,QAAQ,EAAE,CAAC,EAFF;QAGTG,YAAY,EAAE,CAAC,EAHN;QAITC,IAAI,EAAE,CAAC,EAJE;QAKTE,KAAK,EAAE;MALE,CAAX;IAOD,CARD,MAQO;MACLtE,QAAQ,GAAG;QACTiE,GAAG,EAAE,CAAC,CADG;QAETD,QAAQ,EAAE,CAAC,CAFF;QAGTG,YAAY,EAAE,CAAC,EAHN;QAITC,IAAI,EAAE,CAJG;QAKTE,KAAK,EAAE;MALE,CAAX;IAOD;;IAEDnO,OAAO,CAACoO,WAAD,EAAc,UAASpK,MAAT,EAAiB;MACpCyD,QAAQ,CAACzD,MAAD,CAAR,CAAiB4B,SAAjB,EAA4B3B,OAA5B,EAAqC4F,QAArC;IACD,CAFM,CAAP;;IAIA,IAAIwE,GAAG,CAACG,iBAAR,EAA2B;MACzB/G,QAAQ,CAAC,oBAAD,CAAR,CAA+B7B,SAA/B,EAA0C3B,OAA1C,EAAmD4F,QAAnD;IACD;;IAED,IAAIwE,GAAG,CAAChD,KAAJ,KAAc,sBAAlB,EAA0C;MACxC5D,QAAQ,CAAC,aAAD,CAAR,CAAwB7B,SAAxB,EAAmC3B,OAAnC,EAA4C4F,QAA5C;IACD;;IAED,IAAI4E,mBAAmB,GAAGJ,GAAG,CAACI,mBAA9B;IAAA,IACIC,YAAY,GAAGD,mBAAmB,IAAIA,mBAAmB,CAACC,YAD9D;;IAGA,IAAID,mBAAJ,EAAyB;MAEvB,IAAIC,YAAY,KAAKC,SAArB,EAAgC;QAC9BlH,QAAQ,CAAC,YAAD,CAAR,CAAuB7B,SAAvB,EAAkC3B,OAAlC,EAA2C4F,QAA3C;MACD;;MAED,IAAI6E,YAAY,KAAK,KAArB,EAA4B;QAC1BjH,QAAQ,CAAC,gBAAD,CAAR,CAA2B7B,SAA3B,EAAsC3B,OAAtC,EAA+C4F,QAA/C;MACD;;MAED,IAAI6E,YAAY,KAAK,IAArB,EAA2B;QACzBjH,QAAQ,CAAC,kBAAD,CAAR,CAA6B7B,SAA7B,EAAwC3B,OAAxC,EAAiD4F,QAAjD;MACD;IACF;EACF;;EAED,SAASkD,wBAAT,CAAkCnH,SAAlC,EAA6C3B,OAA7C,EAAsD;IAEpD,IAAI2K,SAAS,GAAG,CAAC3K,OAAO,CAAC6B,MAAR,GAAiB,EAAlB,IAAwB7B,OAAO,CAAC6B,MAAhD;IAEA,IAAIuD,QAAQ,GAAG5G,OAAO,CAAC+G,aAAR,CAAsB,6BAAtB,EAAqD;MAClEC,YAAY,EAAE,CADoD;MAElEC,YAAY,EAAE,CAFoD;MAGlEC,cAAc,EAAE1F,OAAO,CAAC4B,KAH0C;MAIlE+D,eAAe,EAAE3F,OAAO,CAAC6B,MAJyC;MAKlE+D,QAAQ,EAAE;QACRC,EAAE,EAAE,IADI;QAERC,EAAE,EAAE6E;MAFI;IALwD,CAArD,CAAf;IAWA;;IAAsBxH,QAAQ,CAACxB,SAAD,EAAYyD,QAAZ,EAAsB;MAClD5F,WAAW,EAAE;IADqC,CAAtB,CAAR;EAGvB,CAlvDiC,CAqvDlC;;;EACA,KAAKoL,SAAL,GAAiBzH,QAAjB;AAED;AAGDvH,QAAQ,CAACwC,YAAD,EAAepC,YAAf,CAAR;AAEAoC,YAAY,CAACyM,OAAb,GAAuB,CACrB,qBADqB,EAErB,UAFqB,EAGrB,QAHqB,EAIrB,SAJqB,EAKrB,QALqB,EAMrB,cANqB,CAAvB;;AAUAzM,YAAY,CAAC0M,SAAb,CAAuBC,SAAvB,GAAmC,UAAS/K,OAAT,EAAkB;EACnD,OAAO5D,EAAE,CAAC4D,OAAD,EAAU,kBAAV,CAAT;AACD,CAFD;;AAIA5B,YAAY,CAAC0M,SAAb,CAAuBE,SAAvB,GAAmC,UAASrJ,SAAT,EAAoB3B,OAApB,EAA6B;EAC9D,IAAIY,IAAI,GAAGZ,OAAO,CAACY,IAAnB;EACA,IAAIqK,CAAC,GAAG,KAAK1H,QAAL,CAAc3C,IAAd,CAAR;EAEA;;EACA,OAAOqK,CAAC,CAACtJ,SAAD,EAAY3B,OAAZ,CAAR;AACD,CAND;;AAQA5B,YAAY,CAAC0M,SAAb,CAAuBI,cAAvB,GAAwC,UAASvJ,SAAT,EAAoB3B,OAApB,EAA6B;EACnE,IAAIY,IAAI,GAAGZ,OAAO,CAACY,IAAnB;EACA,IAAIqK,CAAC,GAAG,KAAK1H,QAAL,CAAc3C,IAAd,CAAR;EAEA;;EACA,OAAOqK,CAAC,CAACtJ,SAAD,EAAY3B,OAAZ,CAAR;AACD,CAND;;AAQA5B,YAAY,CAAC0M,SAAb,CAAuBK,YAAvB,GAAsC,UAASnL,OAAT,EAAkB;EAEtD,IAAI5D,EAAE,CAAC4D,OAAD,EAAU,YAAV,CAAN,EAA+B;IAC7B,OAAOrD,aAAa,CAACqD,OAAD,CAApB;EACD;;EAED,IAAI5D,EAAE,CAAC4D,OAAD,EAAU,eAAV,CAAN,EAAkC;IAChC,OAAOpD,gBAAgB,CAACoD,OAAD,EAAUhC,kBAAV,CAAvB;EACD;;EAED,IAAI5B,EAAE,CAAC4D,OAAD,EAAU,cAAV,CAAN,EAAiC;IAC/B,OAAOnD,cAAc,CAACmD,OAAD,CAArB;EACD;;EAED,OAAOlD,WAAW,CAACkD,OAAD,CAAlB;AACD,CAfD"},"metadata":{},"sourceType":"module"}